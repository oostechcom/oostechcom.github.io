<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-3.10.0-957.el7_matroxfb | oosTech.com</title>
  <meta name="description" content="[This file is cloned from VesaFB. Thanks go to Gerd Knorr] What is matroxfb?This is a driver for a graphic framebuffer for Matrox devices onAlpha, Intel and PPC boxes. Advantages:  It provides a nice">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-3.10.0-957.el7_matroxfb">
<meta property="og:url" content="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_matroxfb/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="[This file is cloned from VesaFB. Thanks go to Gerd Knorr] What is matroxfb?This is a driver for a graphic framebuffer for Matrox devices onAlpha, Intel and PPC boxes. Advantages:  It provides a nice">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_matroxfb/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_mpc5200/" class="title">Kernel-3.10.0-957.el7_mpc5200</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_6pack/" class="title">Kernel-3.10.0-957.el7_6pack</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#What-is-matroxfb"><span class="toc-number">1.</span> <span class="toc-text">What is matroxfb?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-use-it"><span class="toc-number">2.</span> <span class="toc-text">How to use it?</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#X11"><span class="toc-number">3.</span> <span class="toc-text">X11</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SVGALib"><span class="toc-number">4.</span> <span class="toc-text">SVGALib</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Configuration"><span class="toc-number">5.</span> <span class="toc-text">Configuration</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Limitations"><span class="toc-number">6.</span> <span class="toc-text">Limitations</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Benchmarks"><span class="toc-number">7.</span> <span class="toc-text">Benchmarks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Dualhead-G400"><span class="toc-number">8.</span> <span class="toc-text">Dualhead G400</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Dualhead-G450"><span class="toc-number">9.</span> <span class="toc-text">Dualhead G450</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-3.10.0-957.el7_matroxfb" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-3.10.0-957.el7_matroxfb
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/03/13/Kernel-3.10.0-957.el7_matroxfb/" class="article-date">
	 published: <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
	</a>
</span>

        
	<a href="/2021/03/13/Kernel-3.10.0-957.el7_matroxfb/" class="article-date">
	   updated: <time datetime="2021-03-12T16:00:00.000Z" itemprop="dateUpdated">2021-03-13</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/03/13/Kernel-3.10.0-957.el7_matroxfb/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>[This file is cloned from VesaFB. Thanks go to Gerd Knorr]</p>
<h1 id="What-is-matroxfb"><a href="#What-is-matroxfb" class="headerlink" title="What is matroxfb?"></a>What is matroxfb?</h1><p>This is a driver for a graphic framebuffer for Matrox devices on<br>Alpha, Intel and PPC boxes.</p>
<p>Advantages:</p>
<ul>
<li>It provides a nice large console (128 cols + 48 lines with 1024x768)<br>without using tiny, unreadable fonts.</li>
<li>You can run XF{68,86}_FBDev or XFree86 fbdev driver on top of /dev/fb0</li>
<li>Most important: boot logo :-)</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>graphic mode is slower than text mode… but you should not notice<br>if you use same resolution as you used in textmode.</li>
</ul>
<h1 id="How-to-use-it"><a href="#How-to-use-it" class="headerlink" title="How to use it?"></a>How to use it?</h1><p>Switching modes is done using the video=matroxfb:vesa:… boot parameter<br>or using `fbset’ program.</p>
<p>If you want, for example, enable a resolution of 1280x1024x24bpp you should<br>pass to the kernel this command line: “video=matroxfb:vesa:0x1BB”.</p>
<p>You should compile in both vgacon (to boot if you remove you Matrox from<br>box) and matroxfb (for graphics mode). You should not compile-in vesafb<br>unless you have primary display on non-Matrox VBE2.0 device (see<br>Documentation/fb/vesafb.txt for details).</p>
<p>Currently supported video modes are (through vesa:… interface, PowerMac<br>has [as addon] compatibility code):</p>
<p>[Graphic modes]</p>
<p>bpp | 640x400  640x480  768x576  800x600  960x720<br>—-+——————————————–<br>  4 |            0x12             0x102<br>  8 |  0x100    0x101    0x180    0x103    0x188<br> 15 |           0x110    0x181    0x113    0x189<br> 16 |           0x111    0x182    0x114    0x18A<br> 24 |           0x1B2    0x184    0x1B5    0x18C<br> 32 |           0x112    0x183    0x115    0x18B   </p>
<p>[Graphic modes (continued)]</p>
<p>bpp | 1024x768 1152x864 1280x1024 1408x1056 1600x1200<br>—-+————————————————<br>  4 |   0x104             0x106<br>  8 |   0x105    0x190    0x107     0x198     0x11C<br> 15 |   0x116    0x191    0x119     0x199     0x11D<br> 16 |   0x117    0x192    0x11A     0x19A     0x11E<br> 24 |   0x1B8    0x194    0x1BB     0x19C     0x1BF<br> 32 |   0x118    0x193    0x11B     0x19B</p>
<p>[Text modes]</p>
<p>text | 640x400  640x480  1056x344  1056x400  1056x480<br>—–+————————————————<br> 8x8 |  0x1C0    0x108     0x10A     0x10B     0x10C<br>8x16 | 2, 3, 7                       0x109</p>
<p>You can enter these number either hexadecimal (leading `0x’) or decimal<br>(0x100 = 256). You can also use value + 512 to achieve compatibility<br>with your old number passed to vesafb.</p>
<p>Non-listed number can be achieved by more complicated command-line, for<br>example 1600x1200x32bpp can be specified by `video=matroxfb:vesa:0x11C,depth:32’.</p>
<h1 id="X11"><a href="#X11" class="headerlink" title="X11"></a>X11</h1><p>XF{68,86}_FBDev should work just fine, but it is non-accelerated. On non-intel<br>architectures there are some glitches for 24bpp videomodes. 8, 16 and 32bpp<br>works fine.</p>
<p>Running another (accelerated) X-Server like XF86_SVGA works too. But (at least)<br>XFree servers have big troubles in multihead configurations (even on first<br>head, not even talking about second). Running XFree86 4.x accelerated mga<br>driver is possible, but you must not enable DRI - if you do, resolution and<br>color depth of your X desktop must match resolution and color depths of your<br>virtual consoles, otherwise X will corrupt accelerator settings.</p>
<h1 id="SVGALib"><a href="#SVGALib" class="headerlink" title="SVGALib"></a>SVGALib</h1><p>Driver contains SVGALib compatibility code. It is turned on by choosing textual<br>mode for console. You can do it at boot time by using videomode<br>2,3,7,0x108-0x10C or 0x1C0. At runtime, `fbset -depth 0’ does this work.<br>Unfortunately, after SVGALib application exits, screen contents is corrupted.<br>Switching to another console and back fixes it. I hope that it is SVGALib’s<br>problem and not mine, but I’m not sure.</p>
<h1 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h1><p>You can pass kernel command line options to matroxfb with<br><code>video=matroxfb:option1,option2:value2,option3&#39; (multiple options should be  separated by comma, values are separated from options by </code>:’).<br>Accepted options:</p>
<p>mem:X    - size of memory (X can be in megabytes, kilobytes or bytes)<br>           You can only decrease value determined by driver because of<br>       it always probe for memory. Default is to use whole detected<br>       memory usable for on-screen display (i.e. max. 8 MB).<br>disabled - do not load driver; you can use also <code>off&#39;, but </code>disabled’<br>           is here too.<br>enabled  - load driver, if you have <code>video=matroxfb:disabled&#39; in LILO            configuration, you can override it by this (you cannot override        </code>off’). It is default.<br>noaccel  - do not use acceleration engine. It does not work on Alphas.<br>accel    - use acceleration engine. It is default.<br>nopan    - create initial consoles with vyres = yres, thus disabling virtual<br>           scrolling.<br>pan      - create initial consoles as tall as possible (vyres = memory/vxres).<br>           It is default.<br>nopciretry - disable PCI retries. It is needed for some broken chipsets,<br>           it is autodetected for intel’s 82437. In this case device does<br>       not comply to PCI 2.1 specs (it will not guarantee that every<br>       transaction terminate with success or retry in 32 PCLK).<br>pciretry - enable PCI retries. It is default, except for intel’s 82437.<br>novga    - disables VGA I/O ports. It is default if BIOS did not enable device.<br>           You should not use this option, some boards then do not restart<br>       without power off.<br>vga      - preserve state of VGA I/O ports. It is default. Driver does not<br>           enable VGA I/O if BIOS did not it (it is not safe to enable it in<br>       most cases).<br>nobios   - disables BIOS ROM. It is default if BIOS did not enable BIOS itself.<br>           You should not use this option, some boards then do not restart<br>       without power off.<br>bios     - preserve state of BIOS ROM. It is default. Driver does not enable<br>           BIOS if BIOS was not enabled before.<br>noinit   - tells driver, that devices were already initialized. You should use<br>           it if you have G100 and/or if driver cannot detect memory, you see<br>       strange pattern on screen and so on. Devices not enabled by BIOS<br>       are still initialized. It is default.<br>init     - driver initializes every device it knows about.<br>memtype  - specifies memory type, implies ‘init’. This is valid only for G200<br>           and G400 and has following meaning:<br>             G200: 0 -&gt; 2x128Kx32 chips, 2MB onboard, probably sgram<br>                   1 -&gt; 2x128Kx32 chips, 4MB onboard, probably sgram<br>                   2 -&gt; 2x256Kx32 chips, 4MB onboard, probably sgram<br>                   3 -&gt; 2x256Kx32 chips, 8MB onboard, probably sgram<br>                   4 -&gt; 2x512Kx16 chips, 8/16MB onboard, probably sdram only<br>                   5 -&gt; same as above<br>                   6 -&gt; 4x128Kx32 chips, 4MB onboard, probably sgram<br>                   7 -&gt; 4x128Kx32 chips, 8MB onboard, probably sgram<br>             G400: 0 -&gt; 2x512Kx16 SDRAM, 16/32MB<br>                        2x512Kx32 SGRAM, 16/32MB<br>                   1 -&gt; 2x256Kx32 SGRAM, 8/16MB<br>                   2 -&gt; 4x128Kx32 SGRAM, 8/16MB<br>                   3 -&gt; 4x512Kx32 SDRAM, 32MB<br>                   4 -&gt; 4x256Kx32 SGRAM, 16/32MB<br>                   5 -&gt; 2x1Mx32 SDRAM, 32MB<br>                   6 -&gt; reserved<br>                   7 -&gt; reserved<br>           You should use sdram or sgram parameter in addition to memtype<br>           parameter.<br>nomtrr   - disables write combining on frame buffer. This slows down driver but<br>           there is reported minor incompatibility between GUS DMA and XFree<br>       under high loads if write combining is enabled (sound dropouts).<br>mtrr     - enables write combining on frame buffer. It speeds up video accesses<br>           much. It is default. You must have MTRR support enabled in kernel<br>       and your CPU must have MTRR (f.e. Pentium II have them).<br>sgram    - tells to driver that you have Gxx0 with SGRAM memory. It has no<br>           effect without <code>init&#39;. sdram    - tells to driver that you have Gxx0 with SDRAM memory.            It is a default. inv24    - change timings parameters for 24bpp modes on Millennium and            Millennium II. Specify this if you see strange color shadows around        characters. noinv24  - use standard timings. It is the default. inverse  - invert colors on screen (for LCD displays) noinverse - show true colors on screen. It is default. dev:X    - bind driver to device X. Driver numbers device from 0 up to N,            where device 0 is first </code>known’ device found, 1 second and so on.<br>       lspci lists devices in this order.<br>       Default is <code>every&#39; known device. nohwcursor - disables hardware cursor (use software cursor instead). hwcursor - enables hardware cursor. It is default. If you are using            non-accelerated mode (</code>noaccel’ or <code>fbset -accel false&#39;), software        cursor is used (except for text mode). noblink  - disables cursor blinking. Cursor in text mode always blinks (hw            limitation). blink    - enables cursor blinking. It is default. nofastfont - disables fastfont feature. It is default. fastfont:X - enables fastfont feature. X specifies size of memory reserved for              font data, it must be &gt;= (fontwidth*fontheight*chars_in_font)/8.          It is faster on Gx00 series, but slower on older cards. grayscale - enable grayscale summing. It works in PSEUDOCOLOR modes (text,             4bpp, 8bpp). In DIRECTCOLOR modes it is limited to characters         displayed through putc/putcs. Direct accesses to framebuffer         can paint colors. nograyscale - disable grayscale summing. It is default. cross4MB - enables that pixel line can cross 4MB boundary. It is default for            non-Millennium. nocross4MB - pixel line must not cross 4MB boundary. It is default for              Millennium I or II, because of these devices have hardware          limitations which do not allow this. But this option is          incompatible with some (if not all yet released) versions of          XF86_FBDev. dfp      - enables digital flat panel interface. This option is incompatible with            secondary (TV) output - if DFP is active, TV output must be        inactive and vice versa. DFP always uses same timing as primary        (monitor) output. dfp:X    - use settings X for digital flat panel interface. X is number from            0 to 0xFF, and meaning of each individual bit is described in        G400 manual, in description of DAC register 0x1F. For normal operation        you should set all bits to zero, except lowest bit. This lowest bit        selects who is source of display clocks, whether G400, or panel.        Default value is now read back from hardware - so you should specify        this value only if you are also using </code>init’ parameter.<br>outputs:XYZ - set mapping between CRTC and outputs. Each letter can have value<br>           of 0 (for no CRTC), 1 (CRTC1) or 2 (CRTC2), and first letter corresponds<br>       to primary analog output, second letter to the secondary analog output<br>       and third letter to the DVI output. Default setting is 100 for<br>       cards below G400 or G400 without DFP, 101 for G400 with DFP, and<br>       111 for G450 and G550. You can set mapping only on first card,<br>       use matroxset for setting up other devices.<br>vesa:X   - selects startup videomode. X is number from 0 to 0x1FF, see table<br>           above for detailed explanation. Default is 640x480x8bpp if driver<br>       has 8bpp support. Otherwise first available of 640x350x4bpp,<br>       640x480x15bpp, 640x480x24bpp, 640x480x32bpp or 80x25 text<br>       (80x25 text is always available).</p>
<p>If you are not satisfied with videomode selected by `vesa’ option, you<br>can modify it with these options:</p>
<p>xres:X   - horizontal resolution, in pixels. Default is derived from <code>vesa&#39;            option. yres:X   - vertical resolution, in pixel lines. Default is derived from </code>vesa’<br>           option.<br>upper:X  - top boundary: lines between end of VSYNC pulse and start of first<br>           pixel line of picture. Default is derived from <code>vesa&#39; option. lower:X  - bottom boundary: lines between end of picture and start of VSYNC            pulse. Default is derived from </code>vesa’ option.<br>vslen:X  - length of VSYNC pulse, in lines. Default is derived from <code>vesa&#39;            option. left:X   - left boundary: pixels between end of HSYNC pulse and first pixel.            Default is derived from </code>vesa’ option.<br>right:X  - right boundary: pixels between end of picture and start of HSYNC<br>           pulse. Default is derived from <code>vesa&#39; option. hslen:X  - length of HSYNC pulse, in pixels. Default is derived from </code>vesa’<br>           option.<br>pixclock:X - dotclocks, in ps (picoseconds). Default is derived from <code>vesa&#39;              option and from </code>fh’ and <code>fv&#39; options. sync:X   - sync. pulse - bit 0 inverts HSYNC polarity, bit 1 VSYNC polarity.            If bit 3 (value 0x08) is set, composite sync instead of HSYNC is        generated. If bit 5 (value 0x20) is set, sync on green is turned on.        Do not forget that if you want sync on green, you also probably        want composite sync.        Default depends on </code>vesa’.<br>depth:X  - Bits per pixel: 0=text, 4,8,15,16,24 or 32. Default depends on<br>           `vesa’.</p>
<p>If you know capabilities of your monitor, you can specify some (or all) of<br><code>maxclk&#39;, </code>fh’ and <code>fv&#39;. In this case, </code>pixclock’ is computed so that<br>pixclock &lt;= maxclk, real_fh &lt;= fh and real_fv &lt;= fv.</p>
<p>maxclk:X - maximum dotclock. X can be specified in MHz, kHz or Hz. Default is<br>           <code>don&#39;t care&#39;. fh:X     - maximum horizontal synchronization frequency. X can be specified            in kHz or Hz. Default is </code>don’t care’.<br>fv:X     - maximum vertical frequency. X must be specified in Hz. Default is<br>           70 for modes derived from `vesa’ with yres &lt;= 400, 60Hz for<br>       yres &gt; 400.</p>
<h1 id="Limitations"><a href="#Limitations" class="headerlink" title="Limitations"></a>Limitations</h1><p>There are known and unknown bugs, features and misfeatures.<br>Currently there are following known bugs:</p>
<ul>
<li>SVGALib does not restore screen on exit</li>
<li>generic fbcon-cfbX procedures do not work on Alphas. Due to this,<br>`noaccel’ (and cfb4 accel) driver does not work on Alpha. So everyone<br>with access to /dev/fb* on Alpha can hang machine (you should restrict<br>access to /dev/fb* - everyone with access to this device can destroy<br>your monitor, believe me…).</li>
<li>24bpp does not support correctly XF-FBDev on big-endian architectures.</li>
<li>interlaced text mode is not supported; it looks like hardware limitation,<br>but I’m not sure.</li>
<li>Gxx0 SGRAM/SDRAM is not autodetected.</li>
<li>If you are using more than one framebuffer device, you must boot kernel<br>with ‘video=scrollback:0’.</li>
<li>maybe more…<br>And following misfeatures:</li>
<li>SVGALib does not restore screen on exit.</li>
<li>pixclock for text modes is limited by hardware to<br> 83 MHz on G200<br> 66 MHz on Millennium I<br> 60 MHz on Millennium II<br>Because I have no access to other devices, I do not know specific<br>frequencies for them. So driver does not check this and allows you to<br>set frequency higher that this. It causes sparks, black holes and other<br>pretty effects on screen. Device was not destroyed during tests. :-)</li>
<li>my Millennium G200 oscillator has frequency range from 35 MHz to 380 MHz<br>(and it works with 8bpp on about 320 MHz dotclocks (and changed mclk)).<br>But Matrox says on product sheet that VCO limit is 50-250 MHz, so I believe<br>them (maybe that chip overheats, but it has a very big cooler (G100 has<br>none), so it should work).</li>
<li>special mixed video/graphics videomodes of Mystique and Gx00 - 2G8V16 and<br>G16V16 are not supported</li>
<li>color keying is not supported</li>
<li>feature connector of Mystique and Gx00 is set to VGA mode (it is disabled<br>by BIOS)</li>
<li>DDC (monitor detection) is supported through dualhead driver</li>
<li>some check for input values are not so strict how it should be (you can<br>specify vslen=4000 and so on).</li>
<li>maybe more…<br>And following features:</li>
<li>4bpp is available only on Millennium I and Millennium II. It is hardware<br>limitation.</li>
<li>selection between 1:5:5:5 and 5:6:5 16bpp videomode is done by -rgba<br>option of fbset: “fbset -depth 16 -rgba 5,5,5” selects 1:5:5:5, anything<br>else selects 5:6:5 mode.</li>
<li>text mode uses 6 bit VGA palette instead of 8 bit (one of 262144 colors<br>instead of one of 16M colors). It is due to hardware limitation of<br>Millennium I/II and SVGALib compatibility.</li>
</ul>
<h1 id="Benchmarks"><a href="#Benchmarks" class="headerlink" title="Benchmarks"></a>Benchmarks</h1><p>It is time to redraw whole screen 1000 times in 1024x768, 60Hz. It is<br>time for draw 6144000 characters on screen through /dev/vcsa<br>(for 32bpp it is about 3GB of data (exactly 3000 MB); for 8x16 font in<br>16 seconds, i.e. 187 MBps).<br>Times were obtained from one older version of driver, now they are about 3%<br>faster, it is kernel-space only time on P-II/350 MHz, Millennium I in 33 MHz<br>PCI slot, G200 in AGP 2x slot. I did not test vgacon.</p>
<p>NOACCEL<br>        8x16                 12x22<br>        Millennium I  G200   Millennium I  G200<br>8bpp    16.42         9.54   12.33         9.13<br>16bpp   21.00        15.70   19.11        15.02<br>24bpp   36.66        36.66   35.00        35.00<br>32bpp   35.00        30.00   33.85        28.66</p>
<p>ACCEL, nofastfont<br>        8x16                 12x22                6x11<br>    Millennium I  G200   Millennium I  G200   Millennium I  G200<br>8bpp     7.79         7.24   13.55         7.78   30.00        21.01<br>16bpp    9.13         7.78   16.16         7.78   30.00        21.01<br>24bpp   14.17        10.72   18.69        10.24   34.99        21.01<br>32bpp   16.15         16.16   18.73        13.09   34.99        21.01</p>
<p>ACCEL, fastfont<br>        8x16                 12x22                6x11<br>    Millennium I  G200   Millennium I  G200   Millennium I  G200<br>8bpp     8.41         6.01    6.54         4.37   16.00        10.51<br>16bpp    9.54         9.12    8.76         6.17   17.52        14.01<br>24bpp   15.00        12.36   11.67        10.00   22.01        18.32<br>32bpp   16.18        18.29*  12.71        12.74   24.44        21.00</p>
<p>TEXT<br>        8x16<br>    Millennium I  G200<br>TEXT     3.29         1.50</p>
<ul>
<li>Yes, it is slower than Millennium I.</li>
</ul>
<h1 id="Dualhead-G400"><a href="#Dualhead-G400" class="headerlink" title="Dualhead G400"></a>Dualhead G400</h1><p>Driver supports dualhead G400 with some limitations:</p>
<ul>
<li>secondary head shares videomemory with primary head. It is not problem<br>if you have 32MB of videoram, but if you have only 16MB, you may have<br>to think twice before choosing videomode (for example twice 1880x1440x32bpp<br>is not possible).</li>
<li>due to hardware limitation, secondary head can use only 16 and 32bpp<br>videomodes.</li>
<li>secondary head is not accelerated. There were bad problems with accelerated<br>XFree when secondary head used to use acceleration.</li>
<li>secondary head always powerups in 640x480@60-32 videomode. You have to use<br>fbset to change this mode.</li>
<li>secondary head always powerups in monitor mode. You have to use fbmatroxset<br>to change it to TV mode. Also, you must select at least 525 lines for<br>NTSC output and 625 lines for PAL output.</li>
<li>kernel is not fully multihead ready. So some things are impossible to do.</li>
<li>if you compiled it as module, you must insert i2c-matroxfb, matroxfb_maven<br>and matroxfb_crtc2 into kernel.</li>
</ul>
<h1 id="Dualhead-G450"><a href="#Dualhead-G450" class="headerlink" title="Dualhead G450"></a>Dualhead G450</h1><p>Driver supports dualhead G450 with some limitations:</p>
<ul>
<li>secondary head shares videomemory with primary head. It is not problem<br>if you have 32MB of videoram, but if you have only 16MB, you may have<br>to think twice before choosing videomode.</li>
<li>due to hardware limitation, secondary head can use only 16 and 32bpp<br>videomodes.</li>
<li>secondary head is not accelerated.</li>
<li>secondary head always powerups in 640x480@60-32 videomode. You have to use<br>fbset to change this mode.</li>
<li>TV output is not supported</li>
<li>kernel is not fully multihead ready, so some things are impossible to do.</li>
<li>if you compiled it as module, you must insert matroxfb_g450 and matroxfb_crtc2<br>into kernel.</li>
</ul>
<p>–<br>Petr Vandrovec <a href="mailto:&#x76;&#x61;&#110;&#100;&#x72;&#111;&#x76;&#x65;&#64;&#x76;&#99;&#46;&#99;&#x76;&#x75;&#x74;&#46;&#x63;&#122;">&#x76;&#x61;&#110;&#100;&#x72;&#111;&#x76;&#x65;&#64;&#x76;&#99;&#46;&#99;&#x76;&#x75;&#x74;&#46;&#x63;&#122;</a></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_matroxfb/" title="Kernel-3.10.0-957.el7_matroxfb" target="_blank" rel="external">http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_matroxfb/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/03/13/Kernel-3.10.0-957.el7_marvell/" title="Kernel-3.10.0-957.el7_marvell"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/03/13/Kernel-3.10.0-957.el7_md/" title="Kernel-3.10.0-957.el7_"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>