<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-2.6.32-573.12.1.el6_computone | oosTech.com</title>
  <meta name="description" content="NOTE: This is an unmaintained driver.  It is not guaranteed to work due tochanges made in the tty layer in 2.6.  If you wish to take over maintenance ofthis driver, contact Michael Warfield &amp;#109;&amp;#x6">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-2.6.32-573.12.1.el6_computone">
<meta property="og:url" content="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_computone/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="NOTE: This is an unmaintained driver.  It is not guaranteed to work due tochanges made in the tty layer in 2.6.  If you wish to take over maintenance ofthis driver, contact Michael Warfield &amp;#109;&amp;#x6">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_computone/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Changelog"><span class="toc-number">1.</span> <span class="toc-text">Changelog:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Computone-Intelliport-II-Plus-Multiport-Serial-Driver"><span class="toc-number">2.</span> <span class="toc-text">Computone Intelliport II&#x2F;Plus Multiport Serial Driver</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#This-is-a-shell-archive-produced-by-GNU-sharutils-4-2-1"><span class="toc-number"></span> <span class="toc-text">This is a shell archive (produced by GNU sharutils 4.2.1).</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#To-extract-the-files-from-this-archive-save-it-to-some-FILE-remove"><span class="toc-number"></span> <span class="toc-text">To extract the files from this archive, save it to some FILE, remove</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#everything-before-the-bin-sh-39-line-above-then-type-sh-FILE%E2%80%99"><span class="toc-number"></span> <span class="toc-text">everything before the !&#x2F;bin&#x2F;sh&#39; line above, then type sh FILE’.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Made-on-2001-10-29-10-32-EST-by-x6d-x68-119-x40-97-x6c-x63-x6f-118-101-x2e-x77-x69-116-x74-115-x65-110-100-46-x63-x6f-109"><span class="toc-number"></span> <span class="toc-text">Made on 2001-10-29 10:32 EST by &amp;#x6d;&amp;#x68;&amp;#119;&amp;#x40;&amp;#97;&amp;#x6c;&amp;#x63;&amp;#x6f;&amp;#118;&amp;#101;&amp;#x2e;&amp;#x77;&amp;#x69;&amp;#116;&amp;#x74;&amp;#115;&amp;#x65;&amp;#110;&amp;#100;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#109;.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Source-directory-was-home2-src-tmp%E2%80%99"><span class="toc-number"></span> <span class="toc-text">Source directory was &#96;&#x2F;home2&#x2F;src&#x2F;tmp’.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-1"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Existing-files-will-not-be-overwritten-unless-c%E2%80%99-is-specified"><span class="toc-number"></span> <span class="toc-text">Existing files will not be overwritten unless &#96;-c’ is specified.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-2"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#This-shar-contains"><span class="toc-number"></span> <span class="toc-text">This shar contains:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#length-mode-name"><span class="toc-number"></span> <span class="toc-text">length mode       name</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%94%E2%80%94-%E2%80%94%E2%80%94%E2%80%94-%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E2%80%94"><span class="toc-number"></span> <span class="toc-text">—— ———- ——————————————</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4251-rwxr-xr-x-ip2mkdev"><span class="toc-number"></span> <span class="toc-text">4251 -rwxr-xr-x ip2mkdev</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-3"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ip2mkdev"><span class="toc-number"></span> <span class="toc-text">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; ip2mkdev &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ip2mkdev-1"><span class="toc-number"></span> <span class="toc-text">ip2mkdev</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-4"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Make-or-remove-devices-as-needed-for-Computone-Intelliport-drivers"><span class="toc-number"></span> <span class="toc-text">Make or remove devices as needed for Computone Intelliport drivers</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-5"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#First-rule-If-the-dev-file-exists-and-you-need-it-don%E2%80%99t-mess"><span class="toc-number"></span> <span class="toc-text">First rule!  If the dev file exists and you need it, don’t mess</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#with-it-That-prevents-us-from-screwing-up-open-ttys-ownership"><span class="toc-number"></span> <span class="toc-text">with it.  That prevents us from screwing up open ttys, ownership</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#and-permissions-on-a-running-system"><span class="toc-number"></span> <span class="toc-text">and permissions on a running system!</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-6"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#This-script-will-NOT-remove-devices-that-no-longer-exist-if-their"><span class="toc-number"></span> <span class="toc-text">This script will NOT remove devices that no longer exist if their</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#board-or-interface-box-has-been-removed-If-you-want-to-get-rid"><span class="toc-number"></span> <span class="toc-text">board or interface box has been removed.  If you want to get rid</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#of-them-you-can-manually-do-an-%E2%80%9Crm-f-dev-ttyF-dev-cuaf-%E2%80%9D"><span class="toc-number"></span> <span class="toc-text">of them, you can manually do an “rm -f &#x2F;dev&#x2F;ttyF* &#x2F;dev&#x2F;cuaf*”</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#before-running-this-script-Running-this-script-will-then-recreate"><span class="toc-number"></span> <span class="toc-text">before running this script.  Running this script will then recreate</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#all-the-valid-devices"><span class="toc-number"></span> <span class="toc-text">all the valid devices.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-7"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Michael-H-Warfield"><span class="toc-number"></span> <span class="toc-text">Michael H. Warfield</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mhw"><span class="toc-number"></span> <span class="toc-text">&#x2F;&#x2F;|&#x3D;mhw&#x3D;|&#x2F;&#x2F;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#109-x68-x77-64-119-x69-x74-x74-115-101-110-x64-x2e-99-x6f-109"><span class="toc-number"></span> <span class="toc-text">&amp;#109;&amp;#x68;&amp;#x77;&amp;#64;&amp;#119;&amp;#x69;&amp;#x74;&amp;#x74;&amp;#115;&amp;#101;&amp;#110;&amp;#x64;&amp;#x2e;&amp;#99;&amp;#x6f;&amp;#109;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-8"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Updated-10-29-2000-for-version-1-2-13-naming-convention"><span class="toc-number"></span> <span class="toc-text">Updated 10&#x2F;29&#x2F;2000 for version 1.2.13 naming convention</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#under-devfs-mhw"><span class="toc-number"></span> <span class="toc-text">under devfs.    &#x2F;&#x2F;|&#x3D;mhw&#x3D;|&#x2F;&#x2F;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-9"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Updated-03-09-2000-for-devfs-support-in-ip2-drivers-mhw"><span class="toc-number"></span> <span class="toc-text">Updated 03&#x2F;09&#x2F;2000 for devfs support in ip2 drivers. &#x2F;&#x2F;|&#x3D;mhw&#x3D;|&#x2F;&#x2F;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#-10"><span class="toc-number"></span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#This-is-devfs-mode%E2%80%A6-We-don%E2%80%99t-do-anything-except-create-symlinks"><span class="toc-number"></span> <span class="toc-text">This is devfs mode…  We don’t do anything except create symlinks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#from-the-real-devices-to-the-old-names"><span class="toc-number"></span> <span class="toc-text">from the real devices to the old names!</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ok%E2%80%A6-So-we-got-the-driver-loaded-and-we-can-locate-the-procfs-files"><span class="toc-number"></span> <span class="toc-text">Ok…  So we got the driver loaded and we can locate the procfs files.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Next-we-need-our-major-numbers"><span class="toc-number"></span> <span class="toc-text">Next we need our major numbers.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ok%E2%80%A6-Now-we-should-know-our-major-numbers-if-appropriate%E2%80%A6"><span class="toc-number"></span> <span class="toc-text">Ok…  Now we should know our major numbers, if appropriate…</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Now-we-need-our-boards-and-start-the-device-loops"><span class="toc-number"></span> <span class="toc-text">Now we need our boards and start the device loops.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#This-may-be-a-bug-We-should-at-least-get-this-much-information"><span class="toc-number"></span> <span class="toc-text">This may be a bug.  We should at least get this much information</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Silently-skip-this-one-This-board-seems-to-have-no-boxes"><span class="toc-number"></span> <span class="toc-text">Silently skip this one.  This board seems to have no boxes</span></a>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-2.6.32-573.12.1.el6_computone" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-2.6.32-573.12.1.el6_computone
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_computone/" class="article-date">
	 published: <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
	</a>
</span>

        
	<a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_computone/" class="article-date">
	   updated: <time datetime="2021-03-12T16:00:00.000Z" itemprop="dateUpdated">2021-03-13</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_computone/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>NOTE: This is an unmaintained driver.  It is not guaranteed to work due to<br>changes made in the tty layer in 2.6.  If you wish to take over maintenance of<br>this driver, contact Michael Warfield <a href="mailto:&#109;&#x68;&#x77;&#64;&#119;&#x69;&#116;&#116;&#x73;&#x65;&#x6e;&#100;&#x2e;&#x63;&#x6f;&#109;">&#109;&#x68;&#x77;&#64;&#119;&#x69;&#116;&#116;&#x73;&#x65;&#x6e;&#100;&#x2e;&#x63;&#x6f;&#109;</a>.</p>
<h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog:"></a>Changelog:</h2><p>11-01-2001:    Original Document</p>
<p>10-29-2004:    Minor misspelling &amp; format fix, update status of driver.<br>        James Nelson <a href="mailto:&#x6a;&#x61;&#109;&#x65;&#115;&#x34;&#x37;&#x36;&#53;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;">&#x6a;&#x61;&#109;&#x65;&#115;&#x34;&#x37;&#x36;&#53;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#x6f;&#109;</a></p>
<h2 id="Computone-Intelliport-II-Plus-Multiport-Serial-Driver"><a href="#Computone-Intelliport-II-Plus-Multiport-Serial-Driver" class="headerlink" title="Computone Intelliport II/Plus Multiport Serial Driver"></a>Computone Intelliport II/Plus Multiport Serial Driver</h2><p>Release Notes For Linux Kernel 2.2 and higher.<br>These notes are for the drivers which have already been integrated into the<br>kernel and have been tested on Linux kernels 2.0, 2.2, 2.3, and 2.4.</p>
<p>Version: 1.2.14<br>Date: 11/01/2001<br>Historical Author: Andrew Manison <a href="mailto:&#97;&#109;&#x61;&#110;&#x69;&#x73;&#111;&#110;&#x40;&#x61;&#x6d;&#x65;&#x72;&#x69;&#99;&#97;&#46;&#110;&#101;&#116;">&#97;&#109;&#x61;&#110;&#x69;&#x73;&#111;&#110;&#x40;&#x61;&#x6d;&#x65;&#x72;&#x69;&#99;&#97;&#46;&#110;&#101;&#116;</a><br>Primary Author: Doug McNash<br>Support: <a href="mailto:&#x73;&#x75;&#x70;&#112;&#111;&#114;&#116;&#64;&#99;&#111;&#109;&#x70;&#117;&#116;&#x6f;&#x6e;&#101;&#x2e;&#99;&#x6f;&#x6d;">&#x73;&#x75;&#x70;&#112;&#111;&#114;&#116;&#64;&#99;&#111;&#109;&#x70;&#117;&#116;&#x6f;&#x6e;&#101;&#x2e;&#99;&#x6f;&#x6d;</a><br>Fixes and Updates: Mike Warfield <a href="mailto:&#x6d;&#x68;&#119;&#64;&#119;&#105;&#x74;&#116;&#x73;&#101;&#x6e;&#100;&#x2e;&#99;&#x6f;&#x6d;">&#x6d;&#x68;&#119;&#64;&#119;&#105;&#x74;&#116;&#x73;&#101;&#x6e;&#100;&#x2e;&#99;&#x6f;&#x6d;</a></p>
<p>This file assumes that you are using the Computone drivers which are<br>integrated into the kernel sources.  For updating the drivers or installing<br>drivers into kernels which do not already have Computone drivers, please<br>refer to the instructions in the README.computone file in the driver patch.</p>
<ol>
<li>INTRODUCTION</li>
</ol>
<p>This driver supports the entire family of Intelliport II/Plus controllers<br>with the exception of the MicroChannel controllers.  It does not support<br>products previous to the Intelliport II.</p>
<p>This driver was developed on the v2.0.x Linux tree and has been tested up<br>to v2.4.14; it will probably not work with earlier v1.X kernels,.</p>
<ol start="2">
<li>QUICK INSTALLATION</li>
</ol>
<p>Hardware - If you have an ISA card, find a free interrupt and io port.<br>           List those in use with <code>cat /proc/interrupts</code> and<br>           <code>cat /proc/ioports</code>.  Set the card dip switches to a free<br>           address.  You may need to configure your BIOS to reserve an<br>           irq for an ISA card.  PCI and EISA parameters are set<br>           automagically.  Insert card into computer with the power off<br>           before or after drivers installation.</p>
<pre><code>Note the hardware address from the Computone ISA cards installed into
    the system.  These are required for editing ip2.c or editing
    /etc/modprobe.conf, or for specification on the modprobe
    command line.

Note that the /etc/modules.conf should be used for older (pre-2.6)
    kernels.
</code></pre>
<p>Software -</p>
<p>Module installation:</p>
<p>a) Determine free irq/address to use if any (configure BIOS if need be)<br>b) Run “make config” or “make menuconfig” or “make xconfig”<br>   Select (m) module for CONFIG_COMPUTONE under character<br>   devices.  CONFIG_PCI and CONFIG_MODULES also may need to be set.<br>c) Set address on ISA cards then:<br>   edit /usr/src/linux/drivers/char/ip2.c if needed<br>    or<br>   edit /etc/modprobe.conf if needed (module).<br>    or both to match this setting.<br>d) Run “make modules”<br>e) Run “make modules_install”<br>f) Run “/sbin/depmod -a”<br>g) install driver using <code>modprobe ip2 &lt;options&gt;</code> (options listed below)<br>h) run ip2mkdev (either the script below or the binary version)</p>
<p>Kernel installation:</p>
<p>a) Determine free irq/address to use if any (configure BIOS if need be)<br>b) Run “make config” or “make menuconfig” or “make xconfig”<br>   Select (y) kernel for CONFIG_COMPUTONE under character<br>   devices.  CONFIG_PCI may need to be set if you have PCI bus.<br>c) Set address on ISA cards then:<br>       edit /usr/src/linux/drivers/char/ip2.c<br>           (Optional - may be specified on kernel command line now)<br>d) Run “make zImage” or whatever target you prefer.<br>e) mv /usr/src/linux/arch/i386/boot/zImage to /boot.<br>f) Add new config for this kernel into /etc/lilo.conf, run “lilo”<br>    or copy to a floppy disk and boot from that floppy disk.<br>g) Reboot using this kernel<br>h) run ip2mkdev (either the script below or the binary version)</p>
<p>Kernel command line options:</p>
<p>When compiling the driver into the kernel, io and irq may be<br>compiled into the driver by editing ip2.c and setting the values for<br>io and irq in the appropriate array.  An alternative is to specify<br>a command line parameter to the kernel at boot up.</p>
<pre><code>    ip2=io0,irq0,io1,irq1,io2,irq2,io3,irq3
</code></pre>
<p>Note that this order is very different from the specifications for the<br>modload parameters which have separate IRQ and IO specifiers.</p>
<p>The io port also selects PCI (1) and EISA (2) boards.</p>
<pre><code>    io=0    No board
    io=1    PCI board
    io=2    EISA board
    else    ISA board io address
</code></pre>
<p>You only need to specify the boards which are present.</p>
<pre><code>    Examples:

            2 PCI boards:

                    ip2=1,0,1,0

            1 ISA board at 0x310 irq 5:

                    ip2=0x310,5
</code></pre>
<p>This can be added to and “append” option in lilo.conf similar to this:</p>
<pre><code>    append=&quot;ip2=1,0,1,0&quot;
</code></pre>
<ol start="3">
<li>INSTALLATION</li>
</ol>
<p>Previously, the driver sources were packaged with a set of patch files<br>to update the character drivers’ makefile and configuration file, and other<br>kernel source files. A build script (ip2build) was included which applies<br>the patches if needed, and build any utilities needed.<br>What you receive may be a single patch file in conventional kernel<br>patch format build script. That form can also be applied by<br>running patch -p1 &lt; ThePatchFile.  Otherwise run ip2build.</p>
<p>The driver can be installed as a module (recommended) or built into the<br>kernel. This is selected as for other drivers through the <code>make config</code><br>command from the root of the Linux source tree. If the driver is built<br>into the kernel you will need to edit the file ip2.c to match the boards<br>you are installing. See that file for instructions. If the driver is<br>installed as a module the configuration can also be specified on the<br>modprobe command line as follows:</p>
<pre><code>modprobe ip2 irq=irq1,irq2,irq3,irq4 io=addr1,addr2,addr3,addr4
</code></pre>
<p>where irqnum is one of the valid Intelliport II interrupts (3,4,5,7,10,11,<br>12,15) and addr1-4 are the base addresses for up to four controllers. If<br>the irqs are not specified the driver uses the default in ip2.c (which<br>selects polled mode). If no base addresses are specified the defaults in<br>ip2.c are used. If you are autoloading the driver module with kerneld or<br>kmod the base addresses and interrupt number must also be set in ip2.c<br>and recompile or just insert and options line in /etc/modprobe.conf or both.<br>The options line is equivalent to the command line and takes precedence over<br>what is in ip2.c. </p>
<p>/etc/modprobe.conf sample:<br>    options ip2 io=1,0x328 irq=1,10<br>    alias char-major-71 ip2<br>    alias char-major-72 ip2<br>    alias char-major-73 ip2</p>
<p>The equivalent in ip2.c:</p>
<p>static int io[IP2_MAX_BOARDS]= { 1, 0x328, 0, 0 };<br>static int irq[IP2_MAX_BOARDS] = { 1, 10, -1, -1 }; </p>
<p>The equivalent for the kernel command line (in lilo.conf):</p>
<pre><code>    append=&quot;ip2=1,1,0x328,10&quot;
</code></pre>
<p>Note:    Both io and irq should be updated to reflect YOUR system.  An “io”<br>    address of 1 or 2 indicates a PCI or EISA card in the board table.<br>    The PCI or EISA irq will be assigned automatically.</p>
<p>Specifying an invalid or in-use irq will default the driver into<br>running in polled mode for that card.  If all irq entries are 0 then<br>all cards will operate in polled mode.</p>
<p>If you select the driver as part of the kernel run :</p>
<pre><code>make zlilo (or whatever you do to create a bootable kernel)
</code></pre>
<p>If you selected a module run :</p>
<pre><code>make modules &amp;&amp; make modules_install
</code></pre>
<p>The utility ip2mkdev (see 5 and 7 below) creates all the device nodes<br>required by the driver.  For a device to be created it must be configured<br>in the driver and the board must be installed. Only devices corresponding<br>to real IntelliPort II ports are created. With multiple boards and expansion<br>boxes this will leave gaps in the sequence of device names. ip2mkdev uses<br>Linux tty naming conventions: ttyF0 - ttyF255 for normal devices, and<br>cuf0 - cuf255 for callout devices.</p>
<ol start="4">
<li>USING THE DRIVERS</li>
</ol>
<p>As noted above, the driver implements the ports in accordance with Linux<br>conventions, and the devices should be interchangeable with the standard<br>serial devices. (This is a key point for problem reporting: please make<br>sure that what you are trying do works on the ttySx/cuax ports first; then<br>tell us what went wrong with the ip2 ports!)</p>
<p>Higher speeds can be obtained using the setserial utility which remaps<br>38,400 bps (extb) to 57,600 bps, 115,200 bps, or a custom speed.<br>Intelliport II installations using the PowerPort expansion module can<br>use the custom speed setting to select the highest speeds: 153,600 bps,<br>230,400 bps, 307,200 bps, 460,800bps and 921,600 bps. The base for<br>custom baud rate configuration is fixed at 921,600 for cards/expansion<br>modules with ST654’s and 115200 for those with Cirrus CD1400’s.  This<br>corresponds to the maximum bit rates those chips are capable.<br>For example if the baud base is 921600 and the baud divisor is 18 then<br>the custom rate is 921600/18 = 51200 bps.  See the setserial man page for<br>complete details. Of course if stty accepts the higher rates now you can<br>use that as well as the standard ioctls().</p>
<ol start="5">
<li>ip2mkdev and assorted utilities…</li>
</ol>
<p>Several utilities, including the source for a binary ip2mkdev utility are<br>available under …/drivers/char/ip2.  These can be build by changing to<br>that directory and typing “make” after the kernel has be built.  If you do<br>not wish to compile the binary utilities, the shell script below can be<br>cut out and run as “ip2mkdev” to create the necessary device files.  To<br>use the ip2mkdev script, you must have procfs enabled and the proc file<br>system mounted on /proc.</p>
<ol start="6">
<li>NOTES</li>
</ol>
<p>This is a release version of the driver, but it is impossible to test it<br>in all configurations of Linux. If there is any anomalous behaviour that<br>does not match the standard serial port’s behaviour please let us know.</p>
<ol start="7">
<li>ip2mkdev shell script</li>
</ol>
<p>Previously, this script was simply attached here.  It is now attached as a<br>shar archive to make it easier to extract the script from the documentation.<br>To create the ip2mkdev shell script change to a convenient directory (/tmp<br>works just fine) and run the following command:</p>
<pre><code>unshar Documentation/serial/computone.txt
    (This file)
</code></pre>
<p>You should now have a file ip2mkdev in your current working directory with<br>permissions set to execute.  Running that script with then create the<br>necessary devices for the Computone boards, interfaces, and ports which<br>are present on you system at the time it is run.</p>
<p>#!/bin/sh</p>
<h1 id="This-is-a-shell-archive-produced-by-GNU-sharutils-4-2-1"><a href="#This-is-a-shell-archive-produced-by-GNU-sharutils-4-2-1" class="headerlink" title="This is a shell archive (produced by GNU sharutils 4.2.1)."></a>This is a shell archive (produced by GNU sharutils 4.2.1).</h1><h1 id="To-extract-the-files-from-this-archive-save-it-to-some-FILE-remove"><a href="#To-extract-the-files-from-this-archive-save-it-to-some-FILE-remove" class="headerlink" title="To extract the files from this archive, save it to some FILE, remove"></a>To extract the files from this archive, save it to some FILE, remove</h1><h1 id="everything-before-the-bin-sh-39-line-above-then-type-sh-FILE’"><a href="#everything-before-the-bin-sh-39-line-above-then-type-sh-FILE’" class="headerlink" title="everything before the !/bin/sh&#39; line above, then type sh FILE’."></a>everything before the <code>!/bin/sh&#39; line above, then type </code>sh FILE’.</h1><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="Made-on-2001-10-29-10-32-EST-by-x6d-x68-119-x40-97-x6c-x63-x6f-118-101-x2e-x77-x69-116-x74-115-x65-110-100-46-x63-x6f-109"><a href="#Made-on-2001-10-29-10-32-EST-by-x6d-x68-119-x40-97-x6c-x63-x6f-118-101-x2e-x77-x69-116-x74-115-x65-110-100-46-x63-x6f-109" class="headerlink" title="Made on 2001-10-29 10:32 EST by &#x6d;&#x68;&#119;&#x40;&#97;&#x6c;&#x63;&#x6f;&#118;&#101;&#x2e;&#x77;&#x69;&#116;&#x74;&#115;&#x65;&#110;&#100;&#46;&#x63;&#x6f;&#109;."></a>Made on 2001-10-29 10:32 EST by <a href="mailto:&#x6d;&#x68;&#119;&#x40;&#97;&#x6c;&#x63;&#x6f;&#118;&#101;&#x2e;&#x77;&#x69;&#116;&#x74;&#115;&#x65;&#110;&#100;&#46;&#x63;&#x6f;&#109;">&#x6d;&#x68;&#119;&#x40;&#97;&#x6c;&#x63;&#x6f;&#118;&#101;&#x2e;&#x77;&#x69;&#116;&#x74;&#115;&#x65;&#110;&#100;&#46;&#x63;&#x6f;&#109;</a>.</h1><h1 id="Source-directory-was-home2-src-tmp’"><a href="#Source-directory-was-home2-src-tmp’" class="headerlink" title="Source directory was `/home2/src/tmp’."></a>Source directory was `/home2/src/tmp’.</h1><h1 id="-1"><a href="#-1" class="headerlink" title=""></a></h1><h1 id="Existing-files-will-not-be-overwritten-unless-c’-is-specified"><a href="#Existing-files-will-not-be-overwritten-unless-c’-is-specified" class="headerlink" title="Existing files will not be overwritten unless `-c’ is specified."></a>Existing files will <em>not</em> be overwritten unless `-c’ is specified.</h1><h1 id="-2"><a href="#-2" class="headerlink" title=""></a></h1><h1 id="This-shar-contains"><a href="#This-shar-contains" class="headerlink" title="This shar contains:"></a>This shar contains:</h1><h1 id="length-mode-name"><a href="#length-mode-name" class="headerlink" title="length mode       name"></a>length mode       name</h1><h1 id="——-———-——————————————"><a href="#——-———-——————————————" class="headerlink" title="—— ———- ——————————————"></a>—— ———- ——————————————</h1><h1 id="4251-rwxr-xr-x-ip2mkdev"><a href="#4251-rwxr-xr-x-ip2mkdev" class="headerlink" title="4251 -rwxr-xr-x ip2mkdev"></a>4251 -rwxr-xr-x ip2mkdev</h1><h1 id="-3"><a href="#-3" class="headerlink" title=""></a></h1><p>save_IFS=”${IFS}”<br>IFS=”${IFS}:”<br>gettext_dir=FAILED<br>locale_dir=FAILED<br>first_param=”$1”<br>for dir in $PATH<br>do<br>  if test “$gettext_dir” = FAILED &amp;&amp; test -f $dir/gettext <br>     &amp;&amp; ($dir/gettext –version &gt;/dev/null 2&gt;&amp;1)<br>  then<br>    set <code>$dir/gettext --version 2&gt;&amp;1</code><br>    if test “$3” = GNU<br>    then<br>      gettext_dir=$dir<br>    fi<br>  fi<br>  if test “$locale_dir” = FAILED &amp;&amp; test -f $dir/shar <br>     &amp;&amp; ($dir/shar –print-text-domain-dir &gt;/dev/null 2&gt;&amp;1)<br>  then<br>    locale_dir=<code>$dir/shar --print-text-domain-dir</code><br>  fi<br>done<br>IFS=”$save_IFS”<br>if test “$locale_dir” = FAILED || test “$gettext_dir” = FAILED<br>then<br>  echo=echo<br>else<br>  TEXTDOMAINDIR=$locale_dir<br>  export TEXTDOMAINDIR<br>  TEXTDOMAIN=sharutils<br>  export TEXTDOMAIN<br>  echo=”$gettext_dir/gettext -s”<br>fi<br>if touch -am -t 200112312359.59 $$.touch &gt;/dev/null 2&gt;&amp;1 &amp;&amp; test ! -f 200112312359.59 -a -f $$.touch; then<br>  shar_touch=’touch -am -t $1$2$3$4$5$6.$7 “$8”‘<br>elif touch -am 123123592001.59 $$.touch &gt;/dev/null 2&gt;&amp;1 &amp;&amp; test ! -f 123123592001.59 -a ! -f 123123592001.5 -a -f $$.touch; then<br>  shar_touch=’touch -am $3$4$5$6$1$2.$7 “$8”‘<br>elif touch -am 1231235901 $$.touch &gt;/dev/null 2&gt;&amp;1 &amp;&amp; test ! -f 1231235901 -a -f $$.touch; then<br>  shar_touch=’touch -am $3$4$5$6$2 “$8”‘<br>else<br>  shar_touch=:<br>  echo<br>  $echo ‘WARNING: not restoring timestamps.  Consider getting and’<br>  $echo “installing GNU `touch’, distributed in GNU File Utilities…”<br>  echo<br>fi<br>rm -f 200112312359.59 123123592001.59 123123592001.5 1231235901 $$.touch<br>#<br>if mkdir _sh17581; then<br>  $echo ‘x -‘ ‘creating lock directory’<br>else<br>  $echo ‘failed to create lock directory’<br>  exit 1<br>fi</p>
<h1 id="ip2mkdev"><a href="#ip2mkdev" class="headerlink" title="============= ip2mkdev =============="></a>============= ip2mkdev ==============</h1><p>if test -f ‘ip2mkdev’ &amp;&amp; test “$first_param” != -c; then<br>  $echo ‘x -‘ SKIPPING ‘ip2mkdev’ ‘(file already exists)’<br>else<br>  $echo ‘x -‘ extracting ‘ip2mkdev’ ‘(text)’<br>  sed ‘s/^X//‘ &lt;&lt; ‘SHAR_EOF’ &gt; ‘ip2mkdev’ &amp;&amp;<br>#!/bin/sh -<br>#</p>
<h1 id="ip2mkdev-1"><a href="#ip2mkdev-1" class="headerlink" title="ip2mkdev"></a>ip2mkdev</h1><h1 id="-4"><a href="#-4" class="headerlink" title=""></a></h1><h1 id="Make-or-remove-devices-as-needed-for-Computone-Intelliport-drivers"><a href="#Make-or-remove-devices-as-needed-for-Computone-Intelliport-drivers" class="headerlink" title="Make or remove devices as needed for Computone Intelliport drivers"></a>Make or remove devices as needed for Computone Intelliport drivers</h1><h1 id="-5"><a href="#-5" class="headerlink" title=""></a></h1><h1 id="First-rule-If-the-dev-file-exists-and-you-need-it-don’t-mess"><a href="#First-rule-If-the-dev-file-exists-and-you-need-it-don’t-mess" class="headerlink" title="First rule!  If the dev file exists and you need it, don’t mess"></a>First rule!  If the dev file exists and you need it, don’t mess</h1><h1 id="with-it-That-prevents-us-from-screwing-up-open-ttys-ownership"><a href="#with-it-That-prevents-us-from-screwing-up-open-ttys-ownership" class="headerlink" title="with it.  That prevents us from screwing up open ttys, ownership"></a>with it.  That prevents us from screwing up open ttys, ownership</h1><h1 id="and-permissions-on-a-running-system"><a href="#and-permissions-on-a-running-system" class="headerlink" title="and permissions on a running system!"></a>and permissions on a running system!</h1><h1 id="-6"><a href="#-6" class="headerlink" title=""></a></h1><h1 id="This-script-will-NOT-remove-devices-that-no-longer-exist-if-their"><a href="#This-script-will-NOT-remove-devices-that-no-longer-exist-if-their" class="headerlink" title="This script will NOT remove devices that no longer exist if their"></a>This script will NOT remove devices that no longer exist if their</h1><h1 id="board-or-interface-box-has-been-removed-If-you-want-to-get-rid"><a href="#board-or-interface-box-has-been-removed-If-you-want-to-get-rid" class="headerlink" title="board or interface box has been removed.  If you want to get rid"></a>board or interface box has been removed.  If you want to get rid</h1><h1 id="of-them-you-can-manually-do-an-“rm-f-dev-ttyF-dev-cuaf-”"><a href="#of-them-you-can-manually-do-an-“rm-f-dev-ttyF-dev-cuaf-”" class="headerlink" title="of them, you can manually do an “rm -f /dev/ttyF* /dev/cuaf*”"></a>of them, you can manually do an “rm -f /dev/ttyF* /dev/cuaf*”</h1><h1 id="before-running-this-script-Running-this-script-will-then-recreate"><a href="#before-running-this-script-Running-this-script-will-then-recreate" class="headerlink" title="before running this script.  Running this script will then recreate"></a>before running this script.  Running this script will then recreate</h1><h1 id="all-the-valid-devices"><a href="#all-the-valid-devices" class="headerlink" title="all the valid devices."></a>all the valid devices.</h1><h1 id="-7"><a href="#-7" class="headerlink" title=""></a></h1><h1 id="Michael-H-Warfield"><a href="#Michael-H-Warfield" class="headerlink" title="Michael H. Warfield"></a>Michael H. Warfield</h1><h1 id="mhw"><a href="#mhw" class="headerlink" title="//|=mhw=|//"></a>//|=mhw=|//</h1><h1 id="109-x68-x77-64-119-x69-x74-x74-115-101-110-x64-x2e-99-x6f-109"><a href="#109-x68-x77-64-119-x69-x74-x74-115-101-110-x64-x2e-99-x6f-109" class="headerlink" title="&#109;&#x68;&#x77;&#64;&#119;&#x69;&#x74;&#x74;&#115;&#101;&#110;&#x64;&#x2e;&#99;&#x6f;&#109;"></a><a href="mailto:&#109;&#x68;&#x77;&#64;&#119;&#x69;&#x74;&#x74;&#115;&#101;&#110;&#x64;&#x2e;&#99;&#x6f;&#109;">&#109;&#x68;&#x77;&#64;&#119;&#x69;&#x74;&#x74;&#115;&#101;&#110;&#x64;&#x2e;&#99;&#x6f;&#109;</a></h1><h1 id="-8"><a href="#-8" class="headerlink" title=""></a></h1><h1 id="Updated-10-29-2000-for-version-1-2-13-naming-convention"><a href="#Updated-10-29-2000-for-version-1-2-13-naming-convention" class="headerlink" title="Updated 10/29/2000 for version 1.2.13 naming convention"></a>Updated 10/29/2000 for version 1.2.13 naming convention</h1><h1 id="under-devfs-mhw"><a href="#under-devfs-mhw" class="headerlink" title="under devfs.    //|=mhw=|//"></a>under devfs.    //|=mhw=|//</h1><h1 id="-9"><a href="#-9" class="headerlink" title=""></a></h1><h1 id="Updated-03-09-2000-for-devfs-support-in-ip2-drivers-mhw"><a href="#Updated-03-09-2000-for-devfs-support-in-ip2-drivers-mhw" class="headerlink" title="Updated 03/09/2000 for devfs support in ip2 drivers. //|=mhw=|//"></a>Updated 03/09/2000 for devfs support in ip2 drivers. //|=mhw=|//</h1><h1 id="-10"><a href="#-10" class="headerlink" title=""></a></h1><p>X<br>if test -d /dev/ip2 ; then</p>
<h1 id="This-is-devfs-mode…-We-don’t-do-anything-except-create-symlinks"><a href="#This-is-devfs-mode…-We-don’t-do-anything-except-create-symlinks" class="headerlink" title="This is devfs mode…  We don’t do anything except create symlinks"></a>This is devfs mode…  We don’t do anything except create symlinks</h1><h1 id="from-the-real-devices-to-the-old-names"><a href="#from-the-real-devices-to-the-old-names" class="headerlink" title="from the real devices to the old names!"></a>from the real devices to the old names!</h1><p>X    cd /dev<br>X    echo “Creating symbolic links to devfs devices”<br>X    for i in <code>ls ip2</code> ; do<br>X        if test ! -L ip2$i ; then<br>X            # Remove it incase it wasn’t a symlink (old device)<br>X            rm -f ip2$i<br>X            ln -s ip2/$i ip2$i<br>X        fi<br>X    done<br>X    for i in <code>( cd tts ; ls F* )</code> ; do<br>X        if test ! -L tty$i ; then<br>X            # Remove it incase it wasn’t a symlink (old device)<br>X            rm -f tty$i<br>X            ln -s tts/$i tty$i<br>X        fi<br>X    done<br>X    for i in <code>( cd cua ; ls F* )</code> ; do<br>X        DEVNUMBER=<code>expr $i : &#39;F\(.*\)&#39;</code><br>X        if test ! -L cuf$DEVNUMBER ; then<br>X            # Remove it incase it wasn’t a symlink (old device)<br>X            rm -f cuf$DEVNUMBER<br>X            ln -s cua/$i cuf$DEVNUMBER<br>X        fi<br>X    done<br>X    exit 0<br>fi<br>X<br>if test ! -f /proc/tty/drivers<br>then<br>X    echo “<br>Unable to check driver status.<br>Make sure proc file system is mounted.”<br>X<br>X    exit 255<br>fi<br>X<br>if test ! -f /proc/tty/driver/ip2<br>then<br>X    echo “<br>Unable to locate ip2 proc file.<br>Attempting to load driver”<br>X<br>X    if /sbin/insmod ip2<br>X    then<br>X        if test ! -f /proc/tty/driver/ip2<br>X        then<br>X            echo “<br>Unable to locate ip2 proc file after loading driver.<br>Driver initialization failure or driver version error.<br>“<br>X        exit 255<br>X        fi<br>X    else<br>X        echo “Unable to load ip2 driver.”<br>X        exit 255<br>X    fi<br>fi<br>X</p>
<h1 id="Ok…-So-we-got-the-driver-loaded-and-we-can-locate-the-procfs-files"><a href="#Ok…-So-we-got-the-driver-loaded-and-we-can-locate-the-procfs-files" class="headerlink" title="Ok…  So we got the driver loaded and we can locate the procfs files."></a>Ok…  So we got the driver loaded and we can locate the procfs files.</h1><h1 id="Next-we-need-our-major-numbers"><a href="#Next-we-need-our-major-numbers" class="headerlink" title="Next we need our major numbers."></a>Next we need our major numbers.</h1><p>X<br>TTYMAJOR=<code>sed -e &#39;/^ip2/!d&#39; -e &#39;/\/dev\/tt/!d&#39; -e &#39;s/.*tt[^     ]*[     ]*\([0-9]*\)[     ]*.*/\1/&#39; &lt; /proc/tty/drivers</code><br>CUAMAJOR=<code>sed -e &#39;/^ip2/!d&#39; -e &#39;/\/dev\/cu/!d&#39; -e &#39;s/.*cu[^     ]*[     ]*\([0-9]*\)[     ]*.*/\1/&#39; &lt; /proc/tty/drivers</code><br>BRDMAJOR=<code>sed -e &#39;/^Driver: /!d&#39; -e &#39;s/.*IMajor=\([0-9]*\)[     ]*.*/\1/&#39; &lt; /proc/tty/driver/ip2</code><br>X<br>echo “<br>TTYMAJOR = $TTYMAJOR<br>CUAMAJOR = $CUAMAJOR<br>BRDMAJOR = $BRDMAJOR<br>“<br>X</p>
<h1 id="Ok…-Now-we-should-know-our-major-numbers-if-appropriate…"><a href="#Ok…-Now-we-should-know-our-major-numbers-if-appropriate…" class="headerlink" title="Ok…  Now we should know our major numbers, if appropriate…"></a>Ok…  Now we should know our major numbers, if appropriate…</h1><h1 id="Now-we-need-our-boards-and-start-the-device-loops"><a href="#Now-we-need-our-boards-and-start-the-device-loops" class="headerlink" title="Now we need our boards and start the device loops."></a>Now we need our boards and start the device loops.</h1><p>X<br>grep ‘^Board [0-9]:’ /proc/tty/driver/ip2 | while read token number type alltherest<br>do<br>X    # The test for blank “type” will catch the stats lead-in lines<br>X    # if they exist in the file<br>X    if test “$type” = “vacant” -o “$type” = “Vacant” -o “$type” = “”<br>X    then<br>X        continue<br>X    fi<br>X<br>X    BOARDNO=<code>expr &quot;$number&quot; : &#39;\([0-9]\):&#39;</code><br>X    PORTS=<code>expr &quot;$alltherest&quot; : &#39;.*ports=\([0-9]*\)&#39; | tr &#39;,&#39; &#39; &#39;</code><br>X    MINORS=<code>expr &quot;$alltherest&quot; : &#39;.*minors=\([0-9,]*\)&#39; | tr &#39;,&#39; &#39; &#39;</code><br>X<br>X    if test “$BOARDNO” = “” -o “$PORTS” = “”<br>X    then</p>
<h1 id="This-may-be-a-bug-We-should-at-least-get-this-much-information"><a href="#This-may-be-a-bug-We-should-at-least-get-this-much-information" class="headerlink" title="This may be a bug.  We should at least get this much information"></a>This may be a bug.  We should at least get this much information</h1><p>X        echo “Unable to process board line”<br>X        continue<br>X    fi<br>X<br>X    if test “$MINORS” = “”<br>X    then</p>
<h1 id="Silently-skip-this-one-This-board-seems-to-have-no-boxes"><a href="#Silently-skip-this-one-This-board-seems-to-have-no-boxes" class="headerlink" title="Silently skip this one.  This board seems to have no boxes"></a>Silently skip this one.  This board seems to have no boxes</h1><p>X        continue<br>X    fi<br>X<br>X    echo “board $BOARDNO: $type ports = $PORTS; port numbers = $MINORS”<br>X<br>X    if test “$BRDMAJOR” != “”<br>X    then<br>X        BRDMINOR=<code>expr $BOARDNO \* 4</code><br>X        STSMINOR=<code>expr $BRDMINOR + 1</code><br>X        if test ! -c /dev/ip2ipl$BOARDNO ; then<br>X            mknod /dev/ip2ipl$BOARDNO c $BRDMAJOR $BRDMINOR<br>X        fi<br>X        if test ! -c /dev/ip2stat$BOARDNO ; then<br>X            mknod /dev/ip2stat$BOARDNO c $BRDMAJOR $STSMINOR<br>X        fi<br>X    fi<br>X<br>X    if test “$TTYMAJOR” != “”<br>X    then<br>X        PORTNO=$BOARDBASE<br>X<br>X        for PORTNO in $MINORS<br>X        do<br>X            if test ! -c /dev/ttyF$PORTNO ; then<br>X                # We got the hardware but no device - make it<br>X                mknod /dev/ttyF$PORTNO c $TTYMAJOR $PORTNO<br>X            fi<br>X        done<br>X    fi<br>X<br>X    if test “$CUAMAJOR” != “”<br>X    then<br>X        PORTNO=$BOARDBASE<br>X<br>X        for PORTNO in $MINORS<br>X        do<br>X            if test ! -c /dev/cuf$PORTNO ; then<br>X                # We got the hardware but no device - make it<br>X                mknod /dev/cuf$PORTNO c $CUAMAJOR $PORTNO<br>X            fi<br>X        done<br>X    fi<br>done<br>X<br>Xexit 0<br>SHAR_EOF<br>  (set 20 01 10 29 10 32 01 ‘ip2mkdev’; eval “$shar_touch”) &amp;&amp;<br>  chmod 0755 ‘ip2mkdev’ ||<br>  $echo ‘restore of’ ‘ip2mkdev’ ‘failed’<br>  if ( md5sum –help 2&gt;&amp;1 | grep ‘sage: md5sum [‘ ) &gt;/dev/null 2&gt;&amp;1 <br>  &amp;&amp; ( md5sum –version 2&gt;&amp;1 | grep -v ‘textutils 1.12’ ) &gt;/dev/null; then<br>    md5sum -c &lt;&lt; SHAR_EOF &gt;/dev/null 2&gt;&amp;1 <br>    || $echo ‘ip2mkdev:’ ‘MD5 check failed’<br>cb5717134509f38bad9fde6b1f79b4a4  ip2mkdev<br>SHAR_EOF<br>  else<br>    shar_count=”<code>LC_ALL= LC_CTYPE= LANG= wc -c &lt; &#39;ip2mkdev&#39;</code>“<br>    test 4251 -eq “$shar_count” ||<br>    $echo ‘ip2mkdev:’ ‘original size’ ‘4251,’ ‘current size’ “$shar_count!”<br>  fi<br>fi<br>rm -fr _sh17581<br>exit 0</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_computone/" title="Kernel-2.6.32-573.12.1.el6_computone" target="_blank" rel="external">http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_computone/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_configfs/" title="Kernel-2.6.32-573.12.1.el6_configfs"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_cgroups/" title="Kernel-2.6.32-573.12.1.el6_cgroups"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>