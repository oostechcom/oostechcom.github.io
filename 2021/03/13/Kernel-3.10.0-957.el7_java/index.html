<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-3.10.0-957.el7_java | oosTech.com</title>
  <meta name="description" content="Java(tm) Binary Kernel Support for Linux v1.03            ----------------------------------------------  Linux beats them ALL! While all other OS’s are TALKING about directsupport of Java">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-3.10.0-957.el7_java">
<meta property="og:url" content="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_java/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="Java(tm) Binary Kernel Support for Linux v1.03            ----------------------------------------------  Linux beats them ALL! While all other OS’s are TALKING about directsupport of Java">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_java/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#usr-local-bin-javawrapper-the-wrapper-for-binfmt-misc-java"><span class="toc-number">1.</span> <span class="toc-text">&#x2F;usr&#x2F;local&#x2F;bin&#x2F;javawrapper - the wrapper for binfmt_misc&#x2F;java</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#for-example"><span class="toc-number">2.</span> <span class="toc-text">for example:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CLASS-Test-class"><span class="toc-number">3.</span> <span class="toc-text">CLASS&#x3D;Test.class</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FQCLASS-foo-bar-Test"><span class="toc-number">4.</span> <span class="toc-text">FQCLASS&#x3D;foo.bar.Test</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FQCLASSN-Test"><span class="toc-number">5.</span> <span class="toc-text">FQCLASSN&#x3D;Test</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FQCLASSP-foo-bar"><span class="toc-number">6.</span> <span class="toc-text">FQCLASSP&#x3D;foo&#x2F;bar</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#usr-local-java-bin-jarwrapper-the-wrapper-for-binfmt-misc-jar"><span class="toc-number">7.</span> <span class="toc-text">&#x2F;usr&#x2F;local&#x2F;java&#x2F;bin&#x2F;jarwrapper - the wrapper for binfmt_misc&#x2F;jar</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-3.10.0-957.el7_java" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-3.10.0-957.el7_java
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/03/13/Kernel-3.10.0-957.el7_java/" class="article-date">
	 published: <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
	</a>
</span>

        
	<a href="/2021/03/13/Kernel-3.10.0-957.el7_java/" class="article-date">
	   updated: <time datetime="2021-03-12T16:00:00.000Z" itemprop="dateUpdated">2021-03-13</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/03/13/Kernel-3.10.0-957.el7_java/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <pre><code>           Java(tm) Binary Kernel Support for Linux v1.03
           ----------------------------------------------
</code></pre>
<p>Linux beats them ALL! While all other OS’s are TALKING about direct<br>support of Java Binaries in the OS, Linux is doing it!</p>
<p>You can execute Java applications and Java Applets just like any<br>other program after you have done the following:</p>
<ol>
<li><p>You MUST FIRST install the Java Developers Kit for Linux.<br>The Java on Linux HOWTO gives the details on getting and<br>installing this. This HOWTO can be found at:</p>
<p> <a href="ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/Java-HOWTO">ftp://sunsite.unc.edu/pub/Linux/docs/HOWTO/Java-HOWTO</a></p>
<p>You should also set up a reasonable CLASSPATH environment<br>variable to use Java applications that make use of any<br>nonstandard classes (not included in the same directory<br>as the application itself).</p>
</li>
<li><p>You have to compile BINFMT_MISC either as a module or into<br>the kernel (CONFIG_BINFMT_MISC) and set it up properly.<br>If you choose to compile it as a module, you will have<br>to insert it manually with modprobe/insmod, as kmod<br>cannot easily be supported with binfmt_misc.<br>Read the file ‘binfmt_misc.txt’ in this directory to know<br>more about the configuration process.</p>
</li>
<li><p>Add the following configuration items to binfmt_misc<br>(you should really have read binfmt_misc.txt now):<br>support for Java applications:<br>  ‘:Java:M::\xca\xfe\xba\xbe::/usr/local/bin/javawrapper:’<br>support for executable Jar files:<br>  ‘:ExecutableJAR:E::jar::/usr/local/bin/jarwrapper:’<br>support for Java Applets:<br>  ‘:Applet:E::html::/usr/bin/appletviewer:’<br>or the following, if you want to be more selective:<br>  ‘:Applet:M::&lt;!–applet::/usr/bin/appletviewer:’</p>
<p>Of course you have to fix the path names. The path/file names given in this<br>document match the Debian 2.1 system. (i.e. jdk installed in /usr,<br>custom wrappers from this document in /usr/local)</p>
<p>Note, that for the more selective applet support you have to modify<br>existing html-files to contain <!--applet--> in the first line<br>(‘&lt;’ has to be the first character!) to let this work!</p>
<p>For the compiled Java programs you need a wrapper script like the<br>following (this is because Java is broken in case of the filename<br>handling), again fix the path names, both in the script and in the<br>above given configuration string.</p>
<p>You, too, need the little program after the script. Compile like<br>gcc -O2 -o javaclassname javaclassname.c<br>and stick it to /usr/local/bin.</p>
<p>Both the javawrapper shellscript and the javaclassname program<br>were supplied by Colin J. Watson <a href="mailto:&#99;&#106;&#x77;&#x34;&#52;&#64;&#x63;&#97;&#x6d;&#x2e;&#97;&#x63;&#46;&#x75;&#107;">&#99;&#106;&#x77;&#x34;&#52;&#64;&#x63;&#97;&#x6d;&#x2e;&#97;&#x63;&#46;&#x75;&#107;</a>.</p>
</li>
</ol>
<p>====================== Cut here ===================<br>#!/bin/bash</p>
<h1 id="usr-local-bin-javawrapper-the-wrapper-for-binfmt-misc-java"><a href="#usr-local-bin-javawrapper-the-wrapper-for-binfmt-misc-java" class="headerlink" title="/usr/local/bin/javawrapper - the wrapper for binfmt_misc/java"></a>/usr/local/bin/javawrapper - the wrapper for binfmt_misc/java</h1><p>if [ -z “$1” ]; then<br>    exec 1&gt;&amp;2<br>    echo Usage: $0 class-file<br>    exit 1<br>fi</p>
<p>CLASS=$1<br>FQCLASS=<code>/usr/local/bin/javaclassname $1</code><br>FQCLASSN=<code>echo $FQCLASS | sed -e &#39;s/^.*\.\([^.]*\)$/\1/&#39;</code><br>FQCLASSP=<code>echo $FQCLASS | sed -e &#39;s-\.-/-g&#39; -e &#39;s-^[^/]*$--&#39; -e &#39;s-/[^/]*$--&#39;</code></p>
<h1 id="for-example"><a href="#for-example" class="headerlink" title="for example:"></a>for example:</h1><h1 id="CLASS-Test-class"><a href="#CLASS-Test-class" class="headerlink" title="CLASS=Test.class"></a>CLASS=Test.class</h1><h1 id="FQCLASS-foo-bar-Test"><a href="#FQCLASS-foo-bar-Test" class="headerlink" title="FQCLASS=foo.bar.Test"></a>FQCLASS=foo.bar.Test</h1><h1 id="FQCLASSN-Test"><a href="#FQCLASSN-Test" class="headerlink" title="FQCLASSN=Test"></a>FQCLASSN=Test</h1><h1 id="FQCLASSP-foo-bar"><a href="#FQCLASSP-foo-bar" class="headerlink" title="FQCLASSP=foo/bar"></a>FQCLASSP=foo/bar</h1><p>unset CLASSBASE</p>
<p>declare -i LINKLEVEL=0</p>
<p>while :; do<br>    if [ “<code>basename $CLASS .class</code>“ == “$FQCLASSN” ]; then<br>        # See if this directory works straight off<br>        cd -L <code>dirname $CLASS</code><br>        CLASSDIR=$PWD<br>        cd $OLDPWD<br>        if echo $CLASSDIR | grep -q “$FQCLASSP$”; then<br>            CLASSBASE=<code>echo $CLASSDIR | sed -e &quot;s.$FQCLASSP$..&quot;</code><br>            break;<br>        fi<br>        # Try dereferencing the directory name<br>        cd -P <code>dirname $CLASS</code><br>        CLASSDIR=$PWD<br>        cd $OLDPWD<br>        if echo $CLASSDIR | grep -q “$FQCLASSP$”; then<br>            CLASSBASE=<code>echo $CLASSDIR | sed -e &quot;s.$FQCLASSP$..&quot;</code><br>            break;<br>        fi<br>        # If no other possible filename exists<br>        if [ ! -L $CLASS ]; then<br>            exec 1&gt;&amp;2<br>            echo $0:<br>            echo “  $CLASS should be in a” <br>                 “directory tree called $FQCLASSP”<br>            exit 1<br>        fi<br>    fi<br>    if [ ! -L $CLASS ]; then break; fi<br>    # Go down one more level of symbolic links<br>    let LINKLEVEL+=1<br>    if [ $LINKLEVEL -gt 5 ]; then<br>        exec 1&gt;&amp;2<br>        echo $0:<br>        echo “  Too many symbolic links encountered”<br>        exit 1<br>    fi<br>    CLASS=<code>ls --color=no -l $CLASS | sed -e &#39;s/^.* \([^ ]*\)$/\1/&#39;</code><br>done</p>
<p>if [ -z “$CLASSBASE” ]; then<br>    if [ -z “$FQCLASSP” ]; then<br>        GOODNAME=$FQCLASSN.class<br>    else<br>        GOODNAME=$FQCLASSP/$FQCLASSN.class<br>    fi<br>    exec 1&gt;&amp;2<br>    echo $0:<br>    echo “  $FQCLASS should be in a file called $GOODNAME”<br>    exit 1<br>fi</p>
<p>if ! echo $CLASSPATH | grep -q “^(.<em>:)</em>$CLASSBASE(:.<em>)</em>“; then<br>    # class is not in CLASSPATH, so prepend dir of class to CLASSPATH<br>    if [ -z “${CLASSPATH}” ] ; then<br>        export CLASSPATH=$CLASSBASE<br>    else<br>        export CLASSPATH=$CLASSBASE:$CLASSPATH<br>    fi<br>fi</p>
<p>shift<br>/usr/bin/java $FQCLASS “$@”<br>====================== Cut here ===================</p>
<p>====================== Cut here ===================<br>/* javaclassname.c<br> *</p>
<ul>
<li>Extracts the class name from a Java class file; intended for use in a Java</li>
<li>wrapper of the type supported by the binfmt_misc option in the Linux kernel.</li>
<li></li>
<li>Copyright (C) 1999 Colin J. Watson <a href="mailto:&#x63;&#x6a;&#x77;&#52;&#52;&#x40;&#99;&#97;&#x6d;&#46;&#97;&#99;&#46;&#117;&#x6b;">&#x63;&#x6a;&#x77;&#52;&#52;&#x40;&#99;&#97;&#x6d;&#46;&#97;&#99;&#46;&#117;&#x6b;</a>.</li>
<li></li>
<li>This program is free software; you can redistribute it and/or modify</li>
<li>it under the terms of the GNU General Public License as published by</li>
<li>the Free Software Foundation; either version 2 of the License, or</li>
<li>(at your option) any later version.</li>
<li></li>
<li>This program is distributed in the hope that it will be useful,</li>
<li>but WITHOUT ANY WARRANTY; without even the implied warranty of</li>
<li>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</li>
<li>GNU General Public License for more details.</li>
<li></li>
<li>You should have received a copy of the GNU General Public License</li>
<li>along with this program; if not, write to the Free Software</li>
<li>Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</li>
<li>/</li>
</ul>
<p>#include &lt;stdlib.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;stdarg.h&gt;<br>#include &lt;sys/types.h&gt;</p>
<p>/* From Sun’s Java VM Specification, as tag entries in the constant pool. */</p>
<p>#define CP_UTF8 1<br>#define CP_INTEGER 3<br>#define CP_FLOAT 4<br>#define CP_LONG 5<br>#define CP_DOUBLE 6<br>#define CP_CLASS 7<br>#define CP_STRING 8<br>#define CP_FIELDREF 9<br>#define CP_METHODREF 10<br>#define CP_INTERFACEMETHODREF 11<br>#define CP_NAMEANDTYPE 12</p>
<p>/* Define some commonly used error messages */</p>
<p>#define seek_error() error(“%s: Cannot seek\n”, program)<br>#define corrupt_error() error(“%s: Class file corrupt\n”, program)<br>#define eof_error() error(“%s: Unexpected end of file\n”, program)<br>#define utf8_error() error(“%s: Only ASCII 1-255 supported\n”, program);</p>
<p>char *program;</p>
<p>long *pool;</p>
<p>u_int8_t read_8(FILE *classfile);<br>u_int16_t read_16(FILE <em>classfile);<br>void skip_constant(FILE *classfile, u_int16_t *cur);<br>void error(const char *format, …);<br>int main(int argc, char *</em>argv);</p>
<p>/* Reads in an unsigned 8-bit integer. */<br>u_int8_t read_8(FILE *classfile)<br>{<br>    int b = fgetc(classfile);<br>    if(b == EOF)<br>        eof_error();<br>    return (u_int8_t)b;<br>}</p>
<p>/* Reads in an unsigned 16-bit integer. */<br>u_int16_t read_16(FILE *classfile)<br>{<br>    int b1, b2;<br>    b1 = fgetc(classfile);<br>    if(b1 == EOF)<br>        eof_error();<br>    b2 = fgetc(classfile);<br>    if(b2 == EOF)<br>        eof_error();<br>    return (u_int16_t)((b1 &lt;&lt; 8) | b2);<br>}</p>
<p>/* Reads in a value from the constant pool. */<br>void skip_constant(FILE *classfile, u_int16_t *cur)<br>{<br>    u_int16_t len;<br>    int seekerr = 1;<br>    pool[*cur] = ftell(classfile);<br>    switch(read_8(classfile))<br>    {<br>    case CP_UTF8:<br>        len = read_16(classfile);<br>        seekerr = fseek(classfile, len, SEEK_CUR);<br>        break;<br>    case CP_CLASS:<br>    case CP_STRING:<br>        seekerr = fseek(classfile, 2, SEEK_CUR);<br>        break;<br>    case CP_INTEGER:<br>    case CP_FLOAT:<br>    case CP_FIELDREF:<br>    case CP_METHODREF:<br>    case CP_INTERFACEMETHODREF:<br>    case CP_NAMEANDTYPE:<br>        seekerr = fseek(classfile, 4, SEEK_CUR);<br>        break;<br>    case CP_LONG:<br>    case CP_DOUBLE:<br>        seekerr = fseek(classfile, 8, SEEK_CUR);<br>        ++(*cur);<br>        break;<br>    default:<br>        corrupt_error();<br>    }<br>    if(seekerr)<br>        seek_error();<br>}</p>
<p>void error(const char *format, …)<br>{<br>    va_list ap;<br>    va_start(ap, format);<br>    vfprintf(stderr, format, ap);<br>    va_end(ap);<br>    exit(1);<br>}</p>
<p>int main(int argc, char **argv)<br>{<br>    FILE *classfile;<br>    u_int16_t cp_count, i, this_class, classinfo_ptr;<br>    u_int8_t length;</p>
<pre><code>program = argv[0];

if(!argv[1])
    error(&quot;%s: Missing input file\n&quot;, program);
classfile = fopen(argv[1], &quot;rb&quot;);
if(!classfile)
    error(&quot;%s: Error opening %s\n&quot;, program, argv[1]);

if(fseek(classfile, 8, SEEK_SET))  /* skip magic and version numbers */
    seek_error();
cp_count = read_16(classfile);
pool = calloc(cp_count, sizeof(long));
if(!pool)
    error(&quot;%s: Out of memory for constant pool\n&quot;, program);

for(i = 1; i &lt; cp_count; ++i)
    skip_constant(classfile, &amp;i);
if(fseek(classfile, 2, SEEK_CUR))    /* skip access flags */
    seek_error();

this_class = read_16(classfile);
if(this_class &lt; 1 || this_class &gt;= cp_count)
    corrupt_error();
if(!pool[this_class] || pool[this_class] == -1)
    corrupt_error();
if(fseek(classfile, pool[this_class] + 1, SEEK_SET))
    seek_error();

classinfo_ptr = read_16(classfile);
if(classinfo_ptr &lt; 1 || classinfo_ptr &gt;= cp_count)
    corrupt_error();
if(!pool[classinfo_ptr] || pool[classinfo_ptr] == -1)
    corrupt_error();
if(fseek(classfile, pool[classinfo_ptr] + 1, SEEK_SET))
    seek_error();

length = read_16(classfile);
for(i = 0; i &lt; length; ++i)
&#123;
    u_int8_t x = read_8(classfile);
    if((x &amp; 0x80) || !x)
    &#123;
        if((x &amp; 0xE0) == 0xC0)
        &#123;
            u_int8_t y = read_8(classfile);
            if((y &amp; 0xC0) == 0x80)
            &#123;
                int c = ((x &amp; 0x1f) &lt;&lt; 6) + (y &amp; 0x3f);
                if(c) putchar(c);
                else utf8_error();
            &#125;
            else utf8_error();
        &#125;
        else utf8_error();
    &#125;
    else if(x == &#39;/&#39;) putchar(&#39;.&#39;);
    else putchar(x);
&#125;
putchar(&#39;\n&#39;);
free(pool);
fclose(classfile);
return 0;
</code></pre>
<p>}<br>====================== Cut here ===================</p>
<p>====================== Cut here ===================<br>#!/bin/bash</p>
<h1 id="usr-local-java-bin-jarwrapper-the-wrapper-for-binfmt-misc-jar"><a href="#usr-local-java-bin-jarwrapper-the-wrapper-for-binfmt-misc-jar" class="headerlink" title="/usr/local/java/bin/jarwrapper - the wrapper for binfmt_misc/jar"></a>/usr/local/java/bin/jarwrapper - the wrapper for binfmt_misc/jar</h1><p>java -jar $1<br>====================== Cut here ===================</p>
<p>Now simply chmod +x the .class, .jar and/or .html files you want to execute.<br>To add a Java program to your path best put a symbolic link to the main<br>.class file into /usr/bin (or another place you like) omitting the .class<br>extension. The directory containing the original .class file will be<br>added to your CLASSPATH during execution.</p>
<p>To test your new setup, enter in the following simple Java app, and name<br>it “HelloWorld.java”:</p>
<pre><code>class HelloWorld &#123;
    public static void main(String args[]) &#123;
        System.out.println(&quot;Hello World!&quot;);
    &#125;
&#125;
</code></pre>
<p>Now compile the application with:<br>    javac HelloWorld.java</p>
<p>Set the executable permissions of the binary file, with:<br>    chmod 755 HelloWorld.class</p>
<p>And then execute it:<br>    ./HelloWorld.class</p>
<p>To execute Java Jar files, simple chmod the *.jar files to include<br>the execution bit, then just do<br>       ./Application.jar</p>
<p>To execute Java Applets, simple chmod the *.html files to include<br>the execution bit, then just do<br>    ./Applet.html</p>
<p>originally by Brian A. Lantz, <a href="mailto:&#x62;&#114;&#105;&#97;&#110;&#x40;&#x6c;&#97;&#110;&#116;&#x7a;&#x2e;&#x63;&#x6f;&#x6d;">&#x62;&#114;&#105;&#97;&#110;&#x40;&#x6c;&#97;&#110;&#116;&#x7a;&#x2e;&#x63;&#x6f;&#x6d;</a><br>heavily edited for binfmt_misc by Richard GÃ¼nther<br>new scripts by Colin J. Watson <a href="mailto:&#x63;&#106;&#119;&#x34;&#52;&#64;&#x63;&#x61;&#x6d;&#46;&#97;&#x63;&#46;&#x75;&#x6b;">&#x63;&#106;&#119;&#x34;&#52;&#64;&#x63;&#x61;&#x6d;&#46;&#97;&#x63;&#46;&#x75;&#x6b;</a><br>added executable Jar file support by Kurt Huwig <a href="mailto:&#x6b;&#117;&#x72;&#x74;&#64;&#x69;&#107;&#117;&#45;&#x6e;&#x65;&#116;&#122;&#46;&#x64;&#101;">&#x6b;&#117;&#x72;&#x74;&#64;&#x69;&#107;&#117;&#45;&#x6e;&#x65;&#116;&#122;&#46;&#x64;&#101;</a></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_java/" title="Kernel-3.10.0-957.el7_java" target="_blank" rel="external">http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_java/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/03/13/Kernel-3.10.0-957.el7_jack/" title="Kernel-3.10.0-957.el7_jack"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/03/13/Kernel-3.10.0-957.el7_jfs/" title="Kernel-3.10.0-957.el7_jfs"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>