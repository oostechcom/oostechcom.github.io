<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-2.6.32-573.12.1.el6_edac | oosTech.com</title>
  <meta name="description" content="EDAC - Error Detection And Correction Written by Doug Thompson &amp;#x64;&amp;#x6f;&amp;#x75;&amp;#103;&amp;#116;&amp;#104;&amp;#111;&amp;#109;&amp;#x70;&amp;#x73;&amp;#111;&amp;#110;&amp;#64;&amp;#120;&amp;#x6d;&amp;#105;&amp;#115;&amp;#x73;&amp;#x69;&amp;#111;&amp;#110;&amp;#46;&amp;#99;&amp;#">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-2.6.32-573.12.1.el6_edac">
<meta property="og:url" content="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_edac/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="EDAC - Error Detection And Correction Written by Doug Thompson &amp;#x64;&amp;#x6f;&amp;#x75;&amp;#103;&amp;#116;&amp;#104;&amp;#111;&amp;#109;&amp;#x70;&amp;#x73;&amp;#111;&amp;#110;&amp;#64;&amp;#120;&amp;#x6d;&amp;#105;&amp;#115;&amp;#x73;&amp;#x69;&amp;#111;&amp;#110;&amp;#46;&amp;#99;&amp;#">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_edac/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-2.6.32-573.12.1.el6_edac" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-2.6.32-573.12.1.el6_edac
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_edac/" class="article-date">
	 published: <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
	</a>
</span>

        
	<a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_edac/" class="article-date">
	   updated: <time datetime="2021-03-12T16:00:00.000Z" itemprop="dateUpdated">2021-03-13</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_edac/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>EDAC - Error Detection And Correction</p>
<p>Written by Doug Thompson <a href="mailto:&#x64;&#x6f;&#x75;&#103;&#116;&#104;&#111;&#109;&#x70;&#x73;&#111;&#110;&#64;&#120;&#x6d;&#105;&#115;&#x73;&#x69;&#111;&#110;&#46;&#99;&#111;&#109;">&#x64;&#x6f;&#x75;&#103;&#116;&#104;&#111;&#109;&#x70;&#x73;&#111;&#110;&#64;&#120;&#x6d;&#105;&#115;&#x73;&#x69;&#111;&#110;&#46;&#99;&#111;&#109;</a><br>7 Dec 2005<br>17 Jul 2007    Updated</p>
<p>(c) Mauro Carvalho Chehab <a href="mailto:&#x6d;&#x63;&#x68;&#x65;&#104;&#97;&#x62;&#64;&#114;&#101;&#x64;&#104;&#97;&#116;&#46;&#99;&#111;&#109;">&#x6d;&#x63;&#x68;&#x65;&#104;&#97;&#x62;&#64;&#114;&#101;&#x64;&#104;&#97;&#116;&#46;&#99;&#111;&#109;</a><br>05 Aug 2009    Nehalem interface</p>
<p>EDAC is maintained and written by:</p>
<pre><code>Doug Thompson, Dave Jiang, Dave Peterson et al,
original author: Thayne Harbaugh,
</code></pre>
<p>Contact:<br>    website:    bluesmoke.sourceforge.net<br>    mailing list:    <a href="mailto:&#98;&#108;&#117;&#x65;&#115;&#x6d;&#x6f;&#107;&#x65;&#x2d;&#100;&#101;&#118;&#x65;&#108;&#64;&#108;&#105;&#x73;&#116;&#115;&#x2e;&#115;&#x6f;&#x75;&#x72;&#99;&#101;&#x66;&#111;&#x72;&#103;&#101;&#x2e;&#x6e;&#x65;&#x74;">&#98;&#108;&#117;&#x65;&#115;&#x6d;&#x6f;&#107;&#x65;&#x2d;&#100;&#101;&#118;&#x65;&#108;&#64;&#108;&#105;&#x73;&#116;&#115;&#x2e;&#115;&#x6f;&#x75;&#x72;&#99;&#101;&#x66;&#111;&#x72;&#103;&#101;&#x2e;&#x6e;&#x65;&#x74;</a></p>
<p>“bluesmoke” was the name for this device driver when it was “out-of-tree”<br>and maintained at sourceforge.net.  When it was pushed into 2.6.16 for the<br>first time, it was renamed to ‘EDAC’.</p>
<p>The bluesmoke project at sourceforge.net is now utilized as a ‘staging area’<br>for EDAC development, before it is sent upstream to kernel.org</p>
<p>At the bluesmoke/EDAC project site is a series of quilt patches against<br>recent kernels, stored in a SVN repository. For easier downloading, there<br>is also a tarball snapshot available.</p>
<p>============================================================================<br>EDAC PURPOSE</p>
<p>The ‘edac’ kernel module goal is to detect and report errors that occur<br>within the computer system running under linux.</p>
<p>MEMORY</p>
<p>In the initial release, memory Correctable Errors (CE) and Uncorrectable<br>Errors (UE) are the primary errors being harvested. These types of errors<br>are harvested by the ‘edac_mc’ class of device.</p>
<p>Detecting CE events, then harvesting those events and reporting them,<br>CAN be a predictor of future UE events.  With CE events, the system can<br>continue to operate, but with less safety. Preventive maintenance and<br>proactive part replacement of memory DIMMs exhibiting CEs can reduce<br>the likelihood of the dreaded UE events and system ‘panics’.</p>
<p>NON-MEMORY</p>
<p>A new feature for EDAC, the edac_device class of device, was added in<br>the 2.6.23 version of the kernel.</p>
<p>This new device type allows for non-memory type of ECC hardware detectors<br>to have their states harvested and presented to userspace via the sysfs<br>interface.</p>
<p>Some architectures have ECC detectors for L1, L2 and L3 caches, along with DMA<br>engines, fabric switches, main data path switches, interconnections,<br>and various other hardware data paths. If the hardware reports it, then<br>a edac_device device probably can be constructed to harvest and present<br>that to userspace.</p>
<p>PCI BUS SCANNING</p>
<p>In addition, PCI Bus Parity and SERR Errors are scanned for on PCI devices<br>in order to determine if errors are occurring on data transfers.</p>
<p>The presence of PCI Parity errors must be examined with a grain of salt.<br>There are several add-in adapters that do NOT follow the PCI specification<br>with regards to Parity generation and reporting. The specification says<br>the vendor should tie the parity status bits to 0 if they do not intend<br>to generate parity.  Some vendors do not do this, and thus the parity bit<br>can “float” giving false positives.</p>
<p>In the kernel there is a PCI device attribute located in sysfs that is<br>checked by the EDAC PCI scanning code. If that attribute is set,<br>PCI parity/error scanning is skipped for that device. The attribute<br>is:</p>
<pre><code>broken_parity_status
</code></pre>
<p>as is located in /sys/devices/pci<XXX>/0000:XX:YY.Z directorys for<br>PCI devices.</p>
<p>FUTURE HARDWARE SCANNING</p>
<p>EDAC will have future error detectors that will be integrated with<br>EDAC or added to it, in the following list:</p>
<pre><code>MCE    Machine Check Exception
MCA    Machine Check Architecture
NMI    NMI notification of ECC errors
MSRs     Machine Specific Register error cases
and other mechanisms.
</code></pre>
<p>These errors are usually bus errors, ECC errors, thermal throttling<br>and the like.</p>
<p>============================================================================<br>EDAC VERSIONING</p>
<p>EDAC is composed of a “core” module (edac_core.ko) and several Memory<br>Controller (MC) driver modules. On a given system, the CORE<br>is loaded and one MC driver will be loaded. Both the CORE and<br>the MC driver (or edac_device driver) have individual versions that reflect<br>current release level of their respective modules.</p>
<p>Thus, to “report” on what version a system is running, one must report both<br>the CORE’s and the MC driver’s versions.</p>
<p>LOADING</p>
<p>If ‘edac’ was statically linked with the kernel then no loading is<br>necessary.  If ‘edac’ was built as modules then simply modprobe the<br>‘edac’ pieces that you need.  You should be able to modprobe<br>hardware-specific modules and have the dependencies load the necessary core<br>modules.</p>
<p>Example:</p>
<p>$&gt; modprobe amd76x_edac</p>
<p>loads both the amd76x_edac.ko memory controller module and the edac_mc.ko<br>core module.</p>
<p>============================================================================<br>EDAC sysfs INTERFACE</p>
<p>EDAC presents a ‘sysfs’ interface for control, reporting and attribute<br>reporting purposes.</p>
<p>EDAC lives in the /sys/devices/system/edac directory.</p>
<p>Within this directory there currently reside 2 ‘edac’ components:</p>
<pre><code>mc    memory controller(s) system
pci    PCI control and status system
</code></pre>
<p>============================================================================<br>Memory Controller (mc) Model</p>
<p>First a background on the memory controller’s model abstracted in EDAC.<br>Each ‘mc’ device controls a set of DIMM memory modules. These modules are<br>laid out in a Chip-Select Row (csrowX) and Channel table (chX). There can<br>be multiple csrows and multiple channels.</p>
<p>Memory controllers allow for several csrows, with 8 csrows being a typical value.<br>Yet, the actual number of csrows depends on the electrical “loading”<br>of a given motherboard, memory controller and DIMM characteristics.</p>
<p>Dual channels allows for 128 bit data transfers to the CPU from memory.<br>Some newer chipsets allow for more than 2 channels, like Fully Buffered DIMMs<br>(FB-DIMMs). The following example will assume 2 channels:</p>
<pre><code>    Channel 0    Channel 1
===================================
csrow0    | DIMM_A0    | DIMM_B0 |
csrow1    | DIMM_A0    | DIMM_B0 |
===================================

===================================
csrow2    | DIMM_A1    | DIMM_B1 |
csrow3    | DIMM_A1    | DIMM_B1 |
===================================
</code></pre>
<p>In the above example table there are 4 physical slots on the motherboard<br>for memory DIMMs:</p>
<pre><code>DIMM_A0
DIMM_B0
DIMM_A1
DIMM_B1
</code></pre>
<p>Labels for these slots are usually silk screened on the motherboard. Slots<br>labeled ‘A’ are channel 0 in this example. Slots labeled ‘B’<br>are channel 1. Notice that there are two csrows possible on a<br>physical DIMM. These csrows are allocated their csrow assignment<br>based on the slot into which the memory DIMM is placed. Thus, when 1 DIMM<br>is placed in each Channel, the csrows cross both DIMMs.</p>
<p>Memory DIMMs come single or dual “ranked”. A rank is a populated csrow.<br>Thus, 2 single ranked DIMMs, placed in slots DIMM_A0 and DIMM_B0 above<br>will have 1 csrow, csrow0. csrow1 will be empty. On the other hand,<br>when 2 dual ranked DIMMs are similarly placed, then both csrow0 and<br>csrow1 will be populated. The pattern repeats itself for csrow2 and<br>csrow3.</p>
<p>The representation of the above is reflected in the directory tree<br>in EDAC’s sysfs interface. Starting in directory<br>/sys/devices/system/edac/mc each memory controller will be represented<br>by its own ‘mcX’ directory, where ‘X” is the index of the MC.</p>
<pre><code>..../edac/mc/
       |
       |-&gt;mc0
       |-&gt;mc1
       |-&gt;mc2
       ....
</code></pre>
<p>Under each ‘mcX’ directory each ‘csrowX’ is again represented by a<br>‘csrowX’, where ‘X” is the csrow index:</p>
<pre><code>.../mc/mc0/
    |
    |-&gt;csrow0
    |-&gt;csrow2
    |-&gt;csrow3
    ....
</code></pre>
<p>Notice that there is no csrow1, which indicates that csrow0 is<br>composed of a single ranked DIMMs. This should also apply in both<br>Channels, in order to have dual-channel mode be operational. Since<br>both csrow2 and csrow3 are populated, this indicates a dual ranked<br>set of DIMMs for channels 0 and 1.</p>
<p>Within each of the ‘mcX’ and ‘csrowX’ directories are several<br>EDAC control and attribute files.</p>
<p>============================================================================<br>‘mcX’ DIRECTORIES</p>
<p>In ‘mcX’ directories are EDAC control and attribute files for<br>this ‘X” instance of the memory controllers:</p>
<p>Counter reset control file:</p>
<pre><code>&#39;reset_counters&#39;

This write-only control file will zero all the statistical counters
for UE and CE errors.  Zeroing the counters will also reset the timer
indicating how long since the last counter zero.  This is useful
for computing errors/time.  Since the counters are always reset at
driver initialization time, no module/kernel parameter is available.

RUN TIME: echo &quot;anything&quot; &gt;/sys/devices/system/edac/mc/mc0/counter_reset

    This resets the counters on memory controller 0
</code></pre>
<p>Seconds since last counter reset control file:</p>
<pre><code>&#39;seconds_since_reset&#39;

This attribute file displays how many seconds have elapsed since the
last counter reset. This can be used with the error counters to
measure error rates.
</code></pre>
<p>Memory Controller name attribute file:</p>
<pre><code>&#39;mc_name&#39;

This attribute file displays the type of memory controller
that is being utilized.
</code></pre>
<p>Total memory managed by this memory controller attribute file:</p>
<pre><code>&#39;size_mb&#39;

This attribute file displays, in count of megabytes, of memory
that this instance of memory controller manages.
</code></pre>
<p>Total Uncorrectable Errors count attribute file:</p>
<pre><code>&#39;ue_count&#39;

This attribute file displays the total count of uncorrectable
errors that have occurred on this memory controller. If panic_on_ue
is set this counter will not have a chance to increment,
since EDAC will panic the system.
</code></pre>
<p>Total UE count that had no information attribute fileY:</p>
<pre><code>&#39;ue_noinfo_count&#39;

This attribute file displays the number of UEs that
have occurred have occurred with  no informations as to which DIMM
slot is having errors.
</code></pre>
<p>Total Correctable Errors count attribute file:</p>
<pre><code>&#39;ce_count&#39;

This attribute file displays the total count of correctable
errors that have occurred on this memory controller. This
count is very important to examine. CEs provide early
indications that a DIMM is beginning to fail. This count
field should be monitored for non-zero values and report
such information to the system administrator.
</code></pre>
<p>Total Correctable Errors count attribute file:</p>
<pre><code>&#39;ce_noinfo_count&#39;

This attribute file displays the number of CEs that
have occurred wherewith no informations as to which DIMM slot
is having errors. Memory is handicapped, but operational,
yet no information is available to indicate which slot
the failing memory is in. This count field should be also
be monitored for non-zero values.
</code></pre>
<p>Device Symlink:</p>
<pre><code>&#39;device&#39;

Symlink to the memory controller device.
</code></pre>
<p>Sdram memory scrubbing rate:</p>
<pre><code>&#39;sdram_scrub_rate&#39;

Read/Write attribute file that controls memory scrubbing. The scrubbing
rate is set by writing a minimum bandwidth in bytes/sec to the attribute
file. The rate will be translated to an internal value that gives at
least the specified rate.

Reading the file will return the actual scrubbing rate employed.

If configuration fails or memory scrubbing is not implemented, the value
of the attribute file will be -1.
</code></pre>
<p>============================================================================<br>‘csrowX’ DIRECTORIES</p>
<p>In the ‘csrowX’ directories are EDAC control and attribute files for<br>this ‘X” instance of csrow:</p>
<p>Total Uncorrectable Errors count attribute file:</p>
<pre><code>&#39;ue_count&#39;

This attribute file displays the total count of uncorrectable
errors that have occurred on this csrow. If panic_on_ue is set
this counter will not have a chance to increment, since EDAC
will panic the system.
</code></pre>
<p>Total Correctable Errors count attribute file:</p>
<pre><code>&#39;ce_count&#39;

This attribute file displays the total count of correctable
errors that have occurred on this csrow. This
count is very important to examine. CEs provide early
indications that a DIMM is beginning to fail. This count
field should be monitored for non-zero values and report
such information to the system administrator.
</code></pre>
<p>Total memory managed by this csrow attribute file:</p>
<pre><code>&#39;size_mb&#39;

This attribute file displays, in count of megabytes, of memory
that this csrow contains.
</code></pre>
<p>Memory Type attribute file:</p>
<pre><code>&#39;mem_type&#39;

This attribute file will display what type of memory is currently
on this csrow. Normally, either buffered or unbuffered memory.
Examples:
    Registered-DDR
    Unbuffered-DDR
</code></pre>
<p>EDAC Mode of operation attribute file:</p>
<pre><code>&#39;edac_mode&#39;

This attribute file will display what type of Error detection
and correction is being utilized.
</code></pre>
<p>Device type attribute file:</p>
<pre><code>&#39;dev_type&#39;

This attribute file will display what type of DRAM device is
being utilized on this DIMM.
Examples:
    x1
    x2
    x4
    x8
</code></pre>
<p>Channel 0 CE Count attribute file:</p>
<pre><code>&#39;ch0_ce_count&#39;

This attribute file will display the count of CEs on this
DIMM located in channel 0.
</code></pre>
<p>Channel 0 UE Count attribute file:</p>
<pre><code>&#39;ch0_ue_count&#39;

This attribute file will display the count of UEs on this
DIMM located in channel 0.
</code></pre>
<p>Channel 0 DIMM Label control file:</p>
<pre><code>&#39;ch0_dimm_label&#39;

This control file allows this DIMM to have a label assigned
to it. With this label in the module, when errors occur
the output can provide the DIMM label in the system log.
This becomes vital for panic events to isolate the
cause of the UE event.

DIMM Labels must be assigned after booting, with information
that correctly identifies the physical slot with its
silk screen label. This information is currently very
motherboard specific and determination of this information
must occur in userland at this time.
</code></pre>
<p>Channel 1 CE Count attribute file:</p>
<pre><code>&#39;ch1_ce_count&#39;

This attribute file will display the count of CEs on this
DIMM located in channel 1.
</code></pre>
<p>Channel 1 UE Count attribute file:</p>
<pre><code>&#39;ch1_ue_count&#39;

This attribute file will display the count of UEs on this
DIMM located in channel 0.
</code></pre>
<p>Channel 1 DIMM Label control file:</p>
<pre><code>&#39;ch1_dimm_label&#39;

This control file allows this DIMM to have a label assigned
to it. With this label in the module, when errors occur
the output can provide the DIMM label in the system log.
This becomes vital for panic events to isolate the
cause of the UE event.

DIMM Labels must be assigned after booting, with information
that correctly identifies the physical slot with its
silk screen label. This information is currently very
motherboard specific and determination of this information
must occur in userland at this time.
</code></pre>
<p>============================================================================<br>SYSTEM LOGGING</p>
<p>If logging for UEs and CEs are enabled then system logs will have<br>error notices indicating errors that have been detected:</p>
<p>EDAC MC0: CE page 0x283, offset 0xce0, grain 8, syndrome 0x6ec3, row 0,<br>channel 1 “DIMM_B1”: amd76x_edac</p>
<p>EDAC MC0: CE page 0x1e5, offset 0xfb0, grain 8, syndrome 0xb741, row 0,<br>channel 1 “DIMM_B1”: amd76x_edac</p>
<p>The structure of the message is:<br>    the memory controller            (MC0)<br>    Error type                (CE)<br>    memory page                (0x283)<br>    offset in the page            (0xce0)<br>    the byte granularity             (grain 8)<br>        or resolution of the error<br>    the error syndrome            (0xb741)<br>    memory row                (row 0)<br>    memory channel                (channel 1)<br>    DIMM label, if set prior        (DIMM B1<br>    and then an optional, driver-specific message that may<br>        have additional information.</p>
<p>Both UEs and CEs with no info will lack all but memory controller,<br>error type, a notice of “no info” and then an optional,<br>driver-specific error message.</p>
<p>============================================================================<br>PCI Bus Parity Detection</p>
<p>On Header Type 00 devices the primary status is looked at<br>for any parity error regardless of whether Parity is enabled on the<br>device.  (The spec indicates parity is generated in some cases).<br>On Header Type 01 bridges, the secondary status register is also<br>looked at to see if parity occurred on the bus on the other side of<br>the bridge.</p>
<p>SYSFS CONFIGURATION</p>
<p>Under /sys/devices/system/edac/pci are control and attribute files as follows:</p>
<p>Enable/Disable PCI Parity checking control file:</p>
<pre><code>&#39;check_pci_parity&#39;


This control file enables or disables the PCI Bus Parity scanning
operation. Writing a 1 to this file enables the scanning. Writing
a 0 to this file disables the scanning.

Enable:
echo &quot;1&quot; &gt;/sys/devices/system/edac/pci/check_pci_parity

Disable:
echo &quot;0&quot; &gt;/sys/devices/system/edac/pci/check_pci_parity
</code></pre>
<p>Parity Count:</p>
<pre><code>&#39;pci_parity_count&#39;

This attribute file will display the number of parity errors that
have been detected.
</code></pre>
<p>============================================================================<br>MODULE PARAMETERS</p>
<p>Panic on UE control file:</p>
<pre><code>&#39;edac_mc_panic_on_ue&#39;

An uncorrectable error will cause a machine panic.  This is usually
desirable.  It is a bad idea to continue when an uncorrectable error
occurs - it is indeterminate what was uncorrected and the operating
system context might be so mangled that continuing will lead to further
corruption. If the kernel has MCE configured, then EDAC will never
notice the UE.

LOAD TIME: module/kernel parameter: edac_mc_panic_on_ue=[0|1]

RUN TIME:  echo &quot;1&quot; &gt; /sys/module/edac_core/parameters/edac_mc_panic_on_ue
</code></pre>
<p>Log UE control file:</p>
<pre><code>&#39;edac_mc_log_ue&#39;

Generate kernel messages describing uncorrectable errors.  These errors
are reported through the system message log system.  UE statistics
will be accumulated even when UE logging is disabled.

LOAD TIME: module/kernel parameter: edac_mc_log_ue=[0|1]

RUN TIME: echo &quot;1&quot; &gt; /sys/module/edac_core/parameters/edac_mc_log_ue
</code></pre>
<p>Log CE control file:</p>
<pre><code>&#39;edac_mc_log_ce&#39;

Generate kernel messages describing correctable errors.  These
errors are reported through the system message log system.
CE statistics will be accumulated even when CE logging is disabled.

LOAD TIME: module/kernel parameter: edac_mc_log_ce=[0|1]

RUN TIME: echo &quot;1&quot; &gt; /sys/module/edac_core/parameters/edac_mc_log_ce
</code></pre>
<p>Polling period control file:</p>
<pre><code>&#39;edac_mc_poll_msec&#39;

The time period, in milliseconds, for polling for error information.
Too small a value wastes resources.  Too large a value might delay
necessary handling of errors and might loose valuable information for
locating the error.  1000 milliseconds (once each second) is the current
default. Systems which require all the bandwidth they can get, may
increase this.

LOAD TIME: module/kernel parameter: edac_mc_poll_msec=[0|1]

RUN TIME: echo &quot;1000&quot; &gt; /sys/module/edac_core/parameters/edac_mc_poll_msec
</code></pre>
<p>Panic on PCI PARITY Error:</p>
<pre><code>&#39;panic_on_pci_parity&#39;


This control files enables or disables panicking when a parity
error has been detected.


module/kernel parameter: edac_panic_on_pci_pe=[0|1]

Enable:
echo &quot;1&quot; &gt; /sys/module/edac_core/parameters/edac_panic_on_pci_pe

Disable:
echo &quot;0&quot; &gt; /sys/module/edac_core/parameters/edac_panic_on_pci_pe
</code></pre>
<p>=======================================================================</p>
<p>EDAC_DEVICE type of device</p>
<p>In the header file, edac_core.h, there is a series of edac_device structures<br>and APIs for the EDAC_DEVICE.</p>
<p>User space access to an edac_device is through the sysfs interface.</p>
<p>At the location /sys/devices/system/edac (sysfs) new edac_device devices will<br>appear.</p>
<p>There is a three level tree beneath the above ‘edac’ directory. For example,<br>the ‘test_device_edac’ device (found at the bluesmoke.sourceforget.net website)<br>installs itself as:</p>
<pre><code>/sys/devices/systm/edac/test-instance
</code></pre>
<p>in this directory are various controls, a symlink and one or more ‘instance’<br>directorys.</p>
<p>The standard default controls are:</p>
<pre><code>log_ce        boolean to log CE events
log_ue        boolean to log UE events
panic_on_ue    boolean to &#39;panic&#39; the system if an UE is encountered
        (default off, can be set true via startup script)
poll_msec    time period between POLL cycles for events
</code></pre>
<p>The test_device_edac device adds at least one of its own custom control:</p>
<pre><code>test_bits    which in the current test driver does nothing but
        show how it is installed. A ported driver can
        add one or more such controls and/or attributes
        for specific uses.
        One out-of-tree driver uses controls here to allow
        for ERROR INJECTION operations to hardware
        injection registers
</code></pre>
<p>The symlink points to the ‘struct dev’ that is registered for this edac_device.</p>
<p>INSTANCES</p>
<p>One or more instance directories are present. For the ‘test_device_edac’ case:</p>
<pre><code>test-instance0
</code></pre>
<p>In this directory there are two default counter attributes, which are totals of<br>counter in deeper subdirectories.</p>
<pre><code>ce_count    total of CE events of subdirectories
ue_count    total of UE events of subdirectories
</code></pre>
<p>BLOCKS</p>
<p>At the lowest directory level is the ‘block’ directory. There can be 0, 1<br>or more blocks specified in each instance.</p>
<pre><code>test-block0
</code></pre>
<p>In this directory the default attributes are:</p>
<pre><code>ce_count    which is counter of CE events for this &#39;block&#39;
        of hardware being monitored
ue_count    which is counter of UE events for this &#39;block&#39;
        of hardware being monitored
</code></pre>
<p>The ‘test_device_edac’ device adds 4 attributes and 1 control:</p>
<pre><code>test-block-bits-0    for every POLL cycle this counter
            is incremented
test-block-bits-1    every 10 cycles, this counter is bumped once,
            and test-block-bits-0 is set to 0
test-block-bits-2    every 100 cycles, this counter is bumped once,
            and test-block-bits-1 is set to 0
test-block-bits-3    every 1000 cycles, this counter is bumped once,
            and test-block-bits-2 is set to 0


reset-counters        writing ANY thing to this control will
            reset all the above counters.
</code></pre>
<p>Use of the ‘test_device_edac’ driver should any others to create their own<br>unique drivers for their hardware systems.</p>
<p>The ‘test_device_edac’ sample driver is located at the<br>bluesmoke.sourceforge.net project site for EDAC.</p>
<p>=======================================================================<br>NEHALEM USAGE OF EDAC APIs</p>
<p>This chapter documents some EXPERIMENTAL mappings for EDAC API to handle<br>Nehalem EDAC driver. They will likely be changed on future versions<br>of the driver.</p>
<p>Due to the way Nehalem exports Memory Controller data, some adjustments<br>were done at i7core_edac driver. This chapter will cover those differences</p>
<ol>
<li><p>On Nehalem, there are one Memory Controller per Quick Patch Interconnect<br>(QPI). At the driver, the term “socket” means one QPI. This is<br>associated with a physical CPU socket.</p>
<p>Each MC have 3 physical read channels, 3 physical write channels and<br>3 logic channels. The driver currenty sees it as just 3 channels.<br>Each channel can have up to 3 DIMMs.</p>
<p>The minimum known unity is DIMMs. There are no information about csrows.<br>As EDAC API maps the minimum unity is csrows, the driver sequencially<br>maps channel/dimm into different csrows.</p>
<p>For example, suposing the following layout:<br> Ch0 phy rd0, wr0 (0x063f4031): 2 ranks, UDIMMs<br>   dimm 0 1024 Mb offset: 0, bank: 8, rank: 1, row: 0x4000, col: 0x400<br>   dimm 1 1024 Mb offset: 4, bank: 8, rank: 1, row: 0x4000, col: 0x400</p>
<pre><code> Ch1 phy rd1, wr1 (0x063f4031): 2 ranks, UDIMMs
</code></pre>
<p>   dimm 0 1024 Mb offset: 0, bank: 8, rank: 1, row: 0x4000, col: 0x400<br> Ch2 phy rd3, wr3 (0x063f4031): 2 ranks, UDIMMs<br>   dimm 0 1024 Mb offset: 0, bank: 8, rank: 1, row: 0x4000, col: 0x400<br>The driver will map it as:<br> csrow0: channel 0, dimm0<br> csrow1: channel 0, dimm1<br> csrow2: channel 1, dimm0<br> csrow3: channel 2, dimm0</p>
</li>
</ol>
<p>exports one<br>   DIMM per csrow.</p>
<p>   Each QPI is exported as a different memory controller.</p>
<ol start="2">
<li><p>Nehalem MC has the hability to generate errors. The driver implements this<br>functionality via some error injection nodes:</p>
<p>For injecting a memory error, there are some sysfs nodes, under<br>/sys/devices/system/edac/mc/mc?/:</p>
<p>inject_addrmatch/*:<br>   Controls the error injection mask register. It is possible to specify<br>   several characteristics of the address to match an error code:</p>
<pre><code>  dimm = the affected dimm. Numbers are relative to a channel;
  rank = the memory rank;
  channel = the channel that will generate an error;
  bank = the affected bank;
  page = the page address;
  column (or col) = the address column.
</code></pre>
<p>   each of the above values can be set to “any” to match any valid value.</p>
<p>   At driver init, all values are set to any.</p>
<p>   For example, to generate an error at rank 1 of dimm 2, for any channel,<br>   any bank, any page, any column:</p>
<pre><code> echo 2 &gt;/sys/devices/system/edac/mc/mc0/inject_addrmatch/dimm
 echo 1 &gt;/sys/devices/system/edac/mc/mc0/inject_addrmatch/rank
</code></pre>
<p> To return to the default behaviour of matching any, you can do:</p>
<pre><code> echo any &gt;/sys/devices/system/edac/mc/mc0/inject_addrmatch/dimm
 echo any &gt;/sys/devices/system/edac/mc/mc0/inject_addrmatch/rank
</code></pre>
<p>inject_eccmask:</p>
<pre><code>specifies what bits will have troubles,
</code></pre>
<p>inject_section:</p>
<pre><code>specifies what ECC cache section will get the error:
 3 for both
 2 for the highest
 1 for the lowest
</code></pre>
<p>inject_type:</p>
<pre><code>specifies the type of error, being a combination of the following bits:
 bit 0 - repeat
 bit 1 - ecc
 bit 2 - parity

inject_enable starts the error generation when something different
than 0 is written.
</code></pre>
<p>All inject vars can be read. root permission is needed for write.</p>
<p>Datasheet states that the error will only be generated after a write on an<br>address that matches inject_addrmatch. It seems, however, that reading will<br>also produce an error.</p>
<p>For example, the following code will generate an error for any write access<br>at socket 0, on any DIMM/address on channel 2:</p>
<p>echo 2 &gt;/sys/devices/system/edac/mc/mc0/inject_addrmatch/channel<br>echo 2 &gt;/sys/devices/system/edac/mc/mc0/inject_type<br>echo 64 &gt;/sys/devices/system/edac/mc/mc0/inject_eccmask<br>echo 3 &gt;/sys/devices/system/edac/mc/mc0/inject_section<br>echo 1 &gt;/sys/devices/system/edac/mc/mc0/inject_enable<br>dd if=/dev/mem of=/dev/null seek=16k bs=4k count=1 &gt;&amp; /dev/null</p>
<p>For socket 1, it is needed to replace “mc0” by “mc1” at the above<br>commands.</p>
<p>The generated error message will look like:</p>
<p>EDAC MC0: UE row 0, channel-a= 0 channel-b= 0 labels “-“: NON_FATAL (addr = 0x0075b980, socket=0, Dimm=0, Channel=2, syndrome=0x00000040, count=1, Err=8c0000400001009f:4000080482 (read error: read ECC error))</p>
</li>
<li><p>Nehalem specific Corrected Error memory counters</p>
<p>Nehalem have some registers to count memory errors. The driver uses those<br>registers to report Corrected Errors on devices with Registered Dimms.</p>
<p>However, those counters don’t work with Unregistered Dimms. As the chipset<br>offers some counters that also work with UDIMMS (but with a worse level of<br>granularity than the default ones), the driver exposes those registers for<br>UDIMM memories.</p>
<p>They can be read by looking at the contents of all_channel_counts/</p>
<p>$ for i in /sys/devices/system/edac/mc/mc0/all_channel_counts/*; do echo $i; cat $i; done<br> /sys/devices/system/edac/mc/mc0/all_channel_counts/udimm0<br> 0<br> /sys/devices/system/edac/mc/mc0/all_channel_counts/udimm1<br> 0<br> /sys/devices/system/edac/mc/mc0/all_channel_counts/udimm2<br> 0</p>
<p>What happens here is that errors on different csrows, but at the same<br>dimm number will increment the same counter.<br>So, in this memory mapping:<br> csrow0: channel 0, dimm0<br> csrow1: channel 0, dimm1<br> csrow2: channel 1, dimm0<br> csrow3: channel 2, dimm0<br>The hardware will increment udimm0 for an error at the first dimm at either<br> csrow0, csrow2  or csrow3;<br>The hardware will increment udimm1 for an error at the second dimm at either<br> csrow0, csrow2  or csrow3;<br>The hardware will increment udimm2 for an error at the third dimm at either<br> csrow0, csrow2  or csrow3;</p>
</li>
<li><p>Standard error counters</p>
<p>The standard error counters are generated when an mcelog error is received<br>by the driver. Since, with udimm, this is counted by software, it is<br>possible that some errors could be lost. With rdimm’s, they displays the<br>contents of the registers</p>
</li>
</ol>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_edac/" title="Kernel-2.6.32-573.12.1.el6_edac" target="_blank" rel="external">http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_edac/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_err_inject/" title="Kernel-2.6.32-573.12.1.el6_err_inject"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_e1000/" title="Kernel-2.6.32-573.12.1.el6_e1000"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>