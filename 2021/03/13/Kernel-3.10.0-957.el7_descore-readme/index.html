<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-3.10.0-957.el7_descore-readme | oosTech.com</title>
  <meta name="description" content="Below is the original README file from the descore.shar package.des - fast &amp; portable DES encryption &amp; decryption.Copyright (C) 1992  Dana L. How This program is free software; you can redistr">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-3.10.0-957.el7_descore-readme">
<meta property="og:url" content="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_descore-readme/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="Below is the original README file from the descore.shar package.des - fast &amp; portable DES encryption &amp; decryption.Copyright (C) 1992  Dana L. How This program is free software; you can redistr">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_descore-readme/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Below-is-the-original-README-file-from-the-descore-shar-package"><span class="toc-number">1.</span> <span class="toc-text">Below is the original README file from the descore.shar package.</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-3.10.0-957.el7_descore-readme" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-3.10.0-957.el7_descore-readme
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/03/13/Kernel-3.10.0-957.el7_descore-readme/" class="article-date">
	 published: <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
	</a>
</span>

        
	<a href="/2021/03/13/Kernel-3.10.0-957.el7_descore-readme/" class="article-date">
	   updated: <time datetime="2021-03-12T16:00:00.000Z" itemprop="dateUpdated">2021-03-13</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/03/13/Kernel-3.10.0-957.el7_descore-readme/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="Below-is-the-original-README-file-from-the-descore-shar-package"><a href="#Below-is-the-original-README-file-from-the-descore-shar-package" class="headerlink" title="Below is the original README file from the descore.shar package."></a>Below is the original README file from the descore.shar package.</h2><p>des - fast &amp; portable DES encryption &amp; decryption.<br>Copyright (C) 1992  Dana L. How</p>
<p>This program is free software; you can redistribute it and/or modify<br>it under the terms of the GNU Library General Public License as published by<br>the Free Software Foundation; either version 2 of the License, or<br>(at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful,<br>but WITHOUT ANY WARRANTY; without even the implied warranty of<br>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<br>GNU Library General Public License for more details.</p>
<p>You should have received a copy of the GNU Library General Public License<br>along with this program; if not, write to the Free Software<br>Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</p>
<p>Author’s address: <a href="mailto:&#104;&#x6f;&#x77;&#64;&#x69;&#115;&#x6c;&#46;&#115;&#x74;&#x61;&#110;&#102;&#x6f;&#114;&#x64;&#x2e;&#101;&#100;&#x75;">&#104;&#x6f;&#x77;&#64;&#x69;&#115;&#x6c;&#46;&#115;&#x74;&#x61;&#110;&#102;&#x6f;&#114;&#x64;&#x2e;&#101;&#100;&#x75;</a></p>
<p>$Id: README,v 1.15 1992/05/20 00:25:32 how E $</p>
<p>==&gt;&gt; To compile after untarring/unsharring, just `make’ &lt;&lt;==</p>
<p>This package was designed with the following goals:</p>
<ol>
<li>   Highest possible encryption/decryption PERFORMANCE.</li>
<li>   PORTABILITY to any byte-addressable host with a 32bit unsigned C type</li>
<li>   Plug-compatible replacement for KERBEROS’s low-level routines.</li>
</ol>
<p>This second release includes a number of performance enhancements for<br>register-starved machines.  My discussions with Richard Outerbridge,<br><a href="mailto:&#x37;&#x31;&#x37;&#x35;&#53;&#46;&#50;&#x30;&#x34;&#x40;&#99;&#111;&#109;&#x70;&#x75;&#x73;&#101;&#x72;&#118;&#101;&#46;&#99;&#x6f;&#109;">&#x37;&#x31;&#x37;&#x35;&#53;&#46;&#50;&#x30;&#x34;&#x40;&#99;&#111;&#109;&#x70;&#x75;&#x73;&#101;&#x72;&#118;&#101;&#46;&#99;&#x6f;&#109;</a>, sparked a number of these enhancements.</p>
<p>To more rapidly understand the code in this package, inspect desSmallFips.i<br>(created by typing `make’) BEFORE you tackle desCode.h.  The latter is set<br>up in a parameterized fashion so it can easily be modified by speed-daemon<br>hackers in pursuit of that last microsecond.  You will find it more<br>illuminating to inspect one specific implementation,<br>and then move on to the common abstract skeleton with this one in mind.</p>
<p>performance comparison to other available des code which i could<br>compile on a SPARCStation 1 (cc -O4, gcc -O2):</p>
<p>this code (byte-order independent):<br>   30us per encryption (options: 64k tables, no IP/FP)<br>   33us per encryption (options: 64k tables, FIPS standard bit ordering)<br>   45us per encryption (options:  2k tables, no IP/FP)<br>   48us per encryption (options:  2k tables, FIPS standard bit ordering)<br>  275us to set a new key (uses 1k of key tables)<br>    this has the quickest encryption/decryption routines i’ve seen.<br>    since i was interested in fast des filters rather than crypt(3)<br>    and password cracking, i haven’t really bothered yet to speed up<br>    the key setting routine. also, i have no interest in re-implementing<br>    all the other junk in the mit kerberos des library, so i’ve just<br>    provided my routines with little stub interfaces so they can be<br>    used as drop-in replacements with mit’s code or any of the mit-<br>    compatible packages below. (note that the first two timings above<br>    are highly variable because of cache effects).</p>
<p>kerberos des replacement from australia (version 1.95):<br>   53us per encryption (uses 2k of tables)<br>   96us to set a new key (uses 2.25k of key tables)<br>    so despite the author’s inclusion of some of the performance<br>    improvements i had suggested to him, this package’s<br>    encryption/decryption is still slower on the sparc and 68000.<br>    more specifically, 19-40% slower on the 68020 and 11-35% slower<br>    on the sparc,  depending on the compiler;<br>    in full gory detail (ALT_ECB is a libdes variant):<br>    compiler       machine        desCore    libdes    ALT_ECB    slower by<br>    gcc 2.1 -O2    Sun 3/110    304  uS    369.5uS    461.8uS     22%<br>    cc      -O1    Sun 3/110    336  uS    436.6uS    399.3uS     19%<br>    cc      -O2    Sun 3/110    360  uS    532.4uS    505.1uS     40%<br>    cc      -O4    Sun 3/110    365  uS    532.3uS    505.3uS     38%<br>    gcc 2.1 -O2    Sun 4/50     48  uS     53.4uS     57.5uS     11%<br>    cc      -O2    Sun 4/50     48  uS     64.6uS     64.7uS     35%<br>    cc      -O4    Sun 4/50     48  uS     64.7uS     64.9uS     35%<br>    (my time measurements are not as accurate as his).<br>   the comments in my first release of desCore on version 1.92:<br>   68us per encryption (uses 2k of tables)<br>   96us to set a new key (uses 2.25k of key tables)<br>    this is a very nice package which implements the most important<br>    of the optimizations which i did in my encryption routines.<br>    it’s a bit weak on common low-level optimizations which is why<br>    it’s 39%-106% slower.  because he was interested in fast crypt(3) and<br>    password-cracking applications,  he also used the same ideas to<br>    speed up the key-setting routines with impressive results.<br>    (at some point i may do the same in my package).  he also implements<br>    the rest of the mit des library.<br>    (code from <a href="mailto:&#101;&#x61;&#x79;&#64;&#112;&#115;&#x79;&#x63;&#104;&#46;&#x70;&#x73;&#x79;&#x2e;&#117;&#x71;&#46;&#111;&#122;&#x2e;&#x61;&#x75;">&#101;&#x61;&#x79;&#64;&#112;&#115;&#x79;&#x63;&#104;&#46;&#x70;&#x73;&#x79;&#x2e;&#117;&#x71;&#46;&#111;&#122;&#x2e;&#x61;&#x75;</a> via comp.sources.misc)</p>
<p>fast crypt(3) package from denmark:<br>    the des routine here is buried inside a loop to do the<br>    crypt function and i didn’t feel like ripping it out and measuring<br>    performance. his code takes 26 sparc instructions to compute one<br>    des iteration; above, Quick (64k) takes 21 and Small (2k) takes 37.<br>    he claims to use 280k of tables but the iteration calculation seems<br>    to use only 128k.  his tables and code are machine independent.<br>    (code from <a href="mailto:&#x67;&#x6c;&#x61;&#100;&#64;&#100;&#97;&#105;&#109;&#105;&#46;&#97;&#x61;&#x75;&#46;&#100;&#107;">&#x67;&#x6c;&#x61;&#100;&#64;&#100;&#97;&#105;&#109;&#105;&#46;&#97;&#x61;&#x75;&#46;&#100;&#107;</a> via alt.sources or comp.sources.misc)</p>
<p>swedish reimplementation of Kerberos des library<br>  108us per encryption (uses 34k worth of tables)<br>  134us to set a new key (uses 32k of key tables to get this speed!)<br>    the tables used seem to be machine-independent;<br>    he seems to have included a lot of special case code<br>    so that, e.g., <code>long&#39; loads can be used instead of 4 </code>char’ loads<br>    when the machine’s architecture allows it.<br>    (code obtained from chalmers.se:pub/des)</p>
<p>crack 3.3c package from england:<br>    as in crypt above, the des routine is buried in a loop. it’s<br>    also very modified for crypt.  his iteration code uses 16k<br>    of tables and appears to be slow.<br>    (code obtained from <a href="mailto:&#x61;&#101;&#x6d;&#x40;&#97;&#98;&#101;&#x72;&#x2e;&#97;&#99;&#46;&#x75;&#107;">&#x61;&#101;&#x6d;&#x40;&#97;&#98;&#101;&#x72;&#x2e;&#97;&#99;&#46;&#x75;&#107;</a> via alt.sources or comp.sources.misc)</p>
<p>``highly optimized’’ and tweaked Kerberos/Athena code (byte-order dependent):<br>  165us per encryption (uses 6k worth of tables)<br>  478us to set a new key (uses &lt;1k of key tables)<br>    so despite the comments in this code, it was possible to get<br>    faster code AND smaller tables, as well as making the tables<br>    machine-independent.<br>    (code obtained from prep.ai.mit.edu)</p>
<p>UC Berkeley code (depends on machine-endedness):<br>  226us per encryption<br>10848us to set a new key<br>    table sizes are unclear, but they don’t look very small<br>    (code obtained from wuarchive.wustl.edu)</p>
<p>motivation and history</p>
<p>a while ago i wanted some des routines and the routines documented on sun’s<br>man pages either didn’t exist or dumped core.  i had heard of kerberos,<br>and knew that it used des,  so i figured i’d use its routines.  but once<br>i got it and looked at the code,  it really set off a lot of pet peeves -<br>it was too convoluted, the code had been written without taking<br>advantage of the regular structure of operations such as IP, E, and FP<br>(i.e. the author didn’t sit down and think before coding),<br>it was excessively slow,  the author had attempted to clarify the code<br>by adding MORE statements to make the data movement more <code>consistent&#39; instead of simplifying his implementation and cutting down on all data movement (in particular, his use of L1, R1, L2, R2), and it was full of idiotic </code>tweaks’ for particular machines which failed to deliver significant<br>speedups but which did obfuscate everything.  so i took the test data<br>from his verification program and rewrote everything else.</p>
<p>a while later i ran across the great crypt(3) package mentioned above.<br>the fact that this guy was computing 2 sboxes per table lookup rather<br>than one (and using a MUCH larger table in the process) emboldened me to<br>do the same - it was a trivial change from which i had been scared away<br>by the larger table size.  in his case he didn’t realize you don’t need to keep<br>the working data in TWO forms, one for easy use of half the sboxes in<br>indexing, the other for easy use of the other half; instead you can keep<br>it in the form for the first half and use a simple rotate to get the other<br>half.  this means i have (almost) half the data manipulation and half<br>the table size.  in fairness though he might be encoding something particular<br>to crypt(3) in his tables - i didn’t check.</p>
<p>i’m glad that i implemented it the way i did, because this C version is<br>portable (the ifdef’s are performance enhancements) and it is faster<br>than versions hand-written in assembly for the sparc!</p>
<p>porting notes</p>
<p>one thing i did not want to do was write an enormous mess<br>which depended on endedness and other machine quirks,<br>and which necessarily produced different code and different lookup tables<br>for different machines.  see the kerberos code for an example<br>of what i didn’t want to do; all their endedness-specific `optimizations’<br>obfuscate the code and in the end were slower than a simpler machine<br>independent approach.  however, there are always some portability<br>considerations of some kind, and i have included some options<br>for varying numbers of register variables.<br>perhaps some will still regard the result as a mess!</p>
<ol>
<li>i assume everything is byte addressable, although i don’t actually<br>depend on the byte order, and that bytes are 8 bits.<br>i assume word pointers can be freely cast to and from char pointers.<br>note that 99% of C programs make these assumptions.<br>i always use unsigned char’s if the high bit could be set.</li>
<li>the typedef <code>word&#39; means a 32 bit unsigned integral type. if </code>unsigned long’ is not 32 bits, change the typedef in desCore.h.<br>i assume sizeof(word) == 4 EVERYWHERE.</li>
</ol>
<p>the (worst-case) cost of my NOT doing endedness-specific optimizations<br>in the data loading and storing code surrounding the key iterations<br>is less than 12%.  also, there is the added benefit that<br>the input and output work areas do not need to be word-aligned.</p>
<p>OPTIONAL performance optimizations</p>
<ol>
<li>you should define one of <code>i386,&#39; </code>vax,’ <code>mc68000,&#39; or </code>sparc,’<br>whichever one is closest to the capabilities of your machine.<br>see the start of desCode.h to see exactly what this selection implies.<br>note that if you select the wrong one, the des code will still work;<br>these are just performance tweaks.</li>
<li>for those with functional `asm’ keywords: you should change the<br>ROR and ROL macros to use machine rotate instructions if you have them.<br>this will save 2 instructions and a temporary per use,<br>or about 32 to 40 instructions per en/decryption.<br>note that gcc is smart enough to translate the ROL/R macros into<br>machine rotates!</li>
</ol>
<p>these optimizations are all rather persnickety, yet with them you should<br>be able to get performance equal to assembly-coding, except that:</p>
<ol>
<li>with the lack of a bit rotate operator in C, rotates have to be synthesized<br>from shifts.  so access to `asm’ will speed things up if your machine<br>has rotates, as explained above in (3) (not necessary if you use gcc).</li>
<li>if your machine has less than 12 32-bit registers i doubt your compiler will<br>generate good code.<br><code>i386&#39; tries to configure the code for a 386 by only declaring 3 registers (it appears that gcc can use ebx, esi and edi to hold register variables). however, if you like assembly coding, the 386 does have 7 32-bit registers, and if you use ALL of them, use </code>scaled by 8’ address modes with displacement<br>and other tricks, you can get reasonable routines for DesQuickCore… with<br>about 250 instructions apiece.  For DesSmall… it will help to rearrange<br>des_keymap, i.e., now the sbox # is the high part of the index and<br>the 6 bits of data is the low part; it helps to exchange these.<br>since i have no way to conveniently test it i have not provided my<br>shoehorned 386 version.  note that with this release of desCore, gcc is able<br>to put everything in registers(!), and generate about 370 instructions apiece<br>for the DesQuickCore… routines!</li>
</ol>
<p>coding notes</p>
<p>the en/decryption routines each use 6 necessary register variables,<br>with 4 being actively used at once during the inner iterations.<br>if you don’t have 4 register variables get a new machine.<br>up to 8 more registers are used to hold constants in some configurations.</p>
<p>i assume that the use of a constant is more expensive than using a register:<br>a) additionally, i have tried to put the larger constants in registers.<br>   registering priority was by the following:<br>    anything more than 12 bits (bad for RISC and CISC)<br>    greater than 127 in value (can’t use movq or byte immediate on CISC)<br>    9-127 (may not be able to use CISC shift immediate or add/sub quick),<br>    1-8 were never registered, being the cheapest constants.<br>b) the compiler may be too stupid to realize table and table+256 should<br>   be assigned to different constant registers and instead repetitively<br>   do the arithmetic, so i assign these to explicit `m’ register variables<br>   when possible and helpful.</p>
<p>i assume that indexing is cheaper or equivalent to auto increment/decrement,<br>where the index is 7 bits unsigned or smaller.<br>this assumption is reversed for 68k and vax.</p>
<p>i assume that addresses can be cheaply formed from two registers,<br>or from a register and a small constant.<br>for the 68000, the `two registers and small offset’ form is used sparingly.<br>all index scaling is done explicitly - no hidden shifts by log2(sizeof).</p>
<p>the code is written so that even a dumb compiler<br>should never need more than one hidden temporary,<br>increasing the chance that everything will fit in the registers.<br>KEEP THIS MORE SUBTLE POINT IN MIND IF YOU REWRITE ANYTHING.<br>(actually, there are some code fragments now which do require two temps,<br>but fixing it would either break the structure of the macros or<br>require declaring another temporary).</p>
<p>special efficient data format</p>
<p>bits are manipulated in this arrangement most of the time (S7 S5 S3 S1):<br>    003130292827xxxx242322212019xxxx161514131211xxxx080706050403xxxx<br>(the x bits are still there, i’m just emphasizing where the S boxes are).<br>bits are rotated left 4 when computing S6 S4 S2 S0:<br>    282726252423xxxx201918171615xxxx121110090807xxxx040302010031xxxx<br>the rightmost two bits are usually cleared so the lower byte can be used<br>as an index into an sbox mapping table. the next two x’d bits are set<br>to various values to access different parts of the tables.</p>
<p>how to use the routines</p>
<p>datatypes:<br>    pointer to 8 byte area of type DesData<br>    used to hold keys and input/output blocks to des.</p>
<pre><code>pointer to 128 byte area of type DesKeys
used to hold full 768-bit key.
must be long-aligned.
</code></pre>
<p>DesQuickInit()<br>    call this before using any other routine with `Quick’ in its name.<br>    it generates the special 64k table these routines need.<br>DesQuickDone()<br>    frees this table</p>
<p>DesMethod(m, k)<br>    m points to a 128byte block, k points to an 8 byte des key<br>    which must have odd parity (or -1 is returned) and which must<br>    not be a (semi-)weak key (or -2 is returned).<br>    normally DesMethod() returns 0.<br>    m is filled in from k so that when one of the routines below<br>    is called with m, the routine will act like standard des<br>    en/decryption with the key k. if you use DesMethod,<br>    you supply a standard 56bit key; however, if you fill in<br>    m yourself, you will get a 768bit key - but then it won’t<br>    be standard.  it’s 768bits not 1024 because the least significant<br>    two bits of each byte are not used.  note that these two bits<br>    will be set to magic constants which speed up the encryption/decryption<br>    on some machines.  and yes, each byte controls<br>    a specific sbox during a specific iteration.<br>    you really shouldn’t use the 768bit format directly;  i should<br>    provide a routine that converts 128 6-bit bytes (specified in<br>    S-box mapping order or something) into the right format for you.<br>    this would entail some byte concatenation and rotation.</p>
<p>Des{Small|Quick}{Fips|Core}{Encrypt|Decrypt}(d, m, s)<br>    performs des on the 8 bytes at s into the 8 bytes at d. (d,s: char *).<br>    uses m as a 768bit key as explained above.<br>    the Encrypt|Decrypt choice is obvious.<br>    Fips|Core determines whether a completely standard FIPS initial<br>    and final permutation is done; if not, then the data is loaded<br>    and stored in a nonstandard bit order (FIPS w/o IP/FP).<br>    Fips slows down Quick by 10%, Small by 9%.<br>    Small|Quick determines whether you use the normal routine<br>    or the crazy quick one which gobbles up 64k more of memory.<br>    Small is 50% slower then Quick, but Quick needs 32 times as much<br>    memory.  Quick is included for programs that do nothing but DES,<br>    e.g., encryption filters, etc.</p>
<p>Getting it to compile on your machine</p>
<p>there are no machine-dependencies in the code (see porting),<br>except perhaps the `now()’ macro in desTest.c.<br>ALL generated tables are machine independent.<br>you should edit the Makefile with the appropriate optimization flags<br>for your compiler (MAX optimization).</p>
<p>Speeding up kerberos (and/or its des library)</p>
<p>note that i have included a kerberos-compatible interface in desUtil.c<br>through the functions des_key_sched() and des_ecb_encrypt().<br>to use these with kerberos or kerberos-compatible code put desCore.a<br>ahead of the kerberos-compatible library on your linker’s command line.<br>you should not need to #include desCore.h;  just include the header<br>file provided with the kerberos library.</p>
<p>Other uses</p>
<p>the macros in desCode.h would be very useful for putting inline des<br>functions in more complicated encryption routines.</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_descore-readme/" title="Kernel-3.10.0-957.el7_descore-readme" target="_blank" rel="external">http://www.oostech.com/2021/03/13/Kernel-3.10.0-957.el7_descore-readme/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/03/13/Kernel-3.10.0-957.el7_dm-raid/" title="Kernel-3.10.0-957.el7_dm-rai"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/03/13/Kernel-3.10.0-957.el7_cxlflash/" title="Kernel-3.10.0-957.el7_cxlflash"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>