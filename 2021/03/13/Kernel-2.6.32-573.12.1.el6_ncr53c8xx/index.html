<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-2.6.32-573.12.1.el6_ncr53c8xx | oosTech.com</title>
  <meta name="description" content="The Linux NCR53C8XX&#x2F;SYM53C8XX drivers README file Written by Gerard Roudier &amp;#x67;&amp;#114;&amp;#x6f;&amp;#x75;&amp;#x64;&amp;#105;&amp;#x65;&amp;#114;&amp;#x40;&amp;#102;&amp;#114;&amp;#x65;&amp;#x65;&amp;#46;&amp;#x66;&amp;#114;21 Rue Carnot95170 DEUIL LA B">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-2.6.32-573.12.1.el6_ncr53c8xx">
<meta property="og:url" content="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_ncr53c8xx/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="The Linux NCR53C8XX&#x2F;SYM53C8XX drivers README file Written by Gerard Roudier &amp;#x67;&amp;#114;&amp;#x6f;&amp;#x75;&amp;#x64;&amp;#105;&amp;#x65;&amp;#114;&amp;#x40;&amp;#102;&amp;#114;&amp;#x65;&amp;#x65;&amp;#46;&amp;#x66;&amp;#114;21 Rue Carnot95170 DEUIL LA B">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-12T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_ncr53c8xx/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#29-May-1999"><span class="toc-number">1.</span> <span class="toc-text">29 May 1999</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#typical-data-at-NVRAM-address-0x100-53c810a-NVRAM"><span class="toc-number">1.1.</span> <span class="toc-text">typical data at NVRAM address 0x100 (53c810a NVRAM)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#default-set-up-is-identical-for-53c810a-and-53c875-NVRAM"><span class="toc-number">1.2.</span> <span class="toc-text">default set up is identical for 53c810a and 53c875 NVRAM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#default-set-up-is-identical-for-53c810a-and-53c875-NVRAM-1"><span class="toc-number">1.3.</span> <span class="toc-text">default set up is identical for 53c810a and 53c875 NVRAM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#default-set-up-is-identical-for-53c810a-and-53c875-NVRAM-2"><span class="toc-number">1.4.</span> <span class="toc-text">default set up is identical for 53c810a and 53c875 NVRAM</span></a></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-2.6.32-573.12.1.el6_ncr53c8xx" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-2.6.32-573.12.1.el6_ncr53c8xx
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_ncr53c8xx/" class="article-date">
	 published: <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
	</a>
</span>

        
	<a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_ncr53c8xx/" class="article-date">
	   updated: <time datetime="2021-03-12T16:00:00.000Z" itemprop="dateUpdated">2021-03-13</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_ncr53c8xx/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>The Linux NCR53C8XX/SYM53C8XX drivers README file</p>
<p>Written by Gerard Roudier <a href="mailto:&#x67;&#114;&#x6f;&#x75;&#x64;&#105;&#x65;&#114;&#x40;&#102;&#114;&#x65;&#x65;&#46;&#x66;&#114;">&#x67;&#114;&#x6f;&#x75;&#x64;&#105;&#x65;&#114;&#x40;&#102;&#114;&#x65;&#x65;&#46;&#x66;&#114;</a><br>21 Rue Carnot<br>95170 DEUIL LA BARRE - FRANCE</p>
<h1 id="29-May-1999"><a href="#29-May-1999" class="headerlink" title="29 May 1999"></a>29 May 1999</h1><ol>
<li> Introduction</li>
<li> Supported chips and SCSI features</li>
<li>Advantages of the enhanced 896 driver<br>   3.1 Optimized SCSI SCRIPTS<br>   3.2 New features of the SYM53C896 (64 bit PCI dual LVD SCSI controller)</li>
<li> Memory mapped I/O versus normal I/O</li>
<li> Tagged command queueing</li>
<li> Parity checking</li>
<li> Profiling information</li>
<li>Control commands<br>   8.1  Set minimum synchronous period<br>   8.2  Set wide size<br>   8.3  Set maximum number of concurrent tagged commands<br>   8.4  Set order type for tagged command<br>   8.5  Set debug mode<br>   8.6  Clear profile counters<br>   8.7  Set flag (no_disc)<br>   8.8  Set verbose level<br>   8.9  Reset all logical units of a target<br>   8.10 Abort all tasks of all logical units of a target</li>
<li> Configuration parameters</li>
<li>Boot setup commands<br>  10.1 Syntax<br>  10.2 Available arguments<pre><code>     10.2.1  Master parity checking
     10.2.2  Scsi parity checking
     10.2.3  Scsi disconnections
     10.2.4  Special features
     10.2.5  Ultra SCSI support
     10.2.6  Default number of tagged commands
     10.2.7  Default synchronous period factor
     10.2.8  Negotiate synchronous with all devices
     10.2.9  Verbosity level
     10.2.10 Debug mode
     10.2.11 Burst max
     10.2.12 LED support
     10.2.13 Max wide
     10.2.14 Differential mode
     10.2.15 IRQ mode
     10.2.16 Reverse probe
     10.2.17 Fix up PCI configuration space
     10.2.18 Serial NVRAM
     10.2.19 Check SCSI BUS 
     10.2.20 Exclude a host from being attached
     10.2.21 Suggest a default SCSI id for hosts
     10.2.22 Enable use of IMMEDIATE ARBITRATION
</code></pre>
  10.3 Advised boot setup commands<br>  10.4 PCI configuration fix-up boot option<br>  10.5 Serial NVRAM support boot option<br>  10.6 SCSI BUS checking boot option<br>  10.7 IMMEDIATE ARBITRATION boot option</li>
<li>Some constants and flags of the ncr53c8xx.h header file</li>
<li>Installation</li>
<li>Architecture dependent features</li>
<li>Known problems<br>  14.1 Tagged commands with Iomega Jaz device<br>  14.2 Device names change when another controller is added<br>  14.3 Using only 8 bit devices with a WIDE SCSI controller.<br>  14.4 Possible data corruption during a Memory Write and Invalidate<br>  14.5 IRQ sharing problems</li>
<li>SCSI problem troubleshooting<br>  15.1 Problem tracking<br>  15.2 Understanding hardware error reports</li>
<li>Synchronous transfer negotiation tables<br>  16.1 Synchronous timings for 53C875 and 53C860 Ultra-SCSI controllers<br>  16.2 Synchronous timings for fast SCSI-2 53C8XX controllers</li>
<li>Serial NVRAM support (by Richard Waltham)<br>  17.1 Features<br>  17.2 Symbios NVRAM layout<br>  17.3 Tekram  NVRAM layout</li>
<li>Support for Big Endian<br>  18.1 Big Endian CPU<br>  18.2 NCR chip in Big Endian mode of operations</li>
</ol>
<p>===============================================================================</p>
<ol>
<li>Introduction</li>
</ol>
<p>The initial Linux ncr53c8xx driver has been a port of the ncr driver from<br>FreeBSD that has been achieved in November 1995 by:<br>          Gerard Roudier              <a href="mailto:&#103;&#x72;&#111;&#x75;&#100;&#105;&#x65;&#114;&#64;&#x66;&#x72;&#101;&#101;&#46;&#x66;&#114;">&#103;&#x72;&#111;&#x75;&#100;&#105;&#x65;&#114;&#64;&#x66;&#x72;&#101;&#101;&#46;&#x66;&#114;</a></p>
<p>The original driver has been written for 386bsd and FreeBSD by:<br>          Wolfgang Stanglmeier        <a href="mailto:&#x77;&#x6f;&#x6c;&#x66;&#64;&#x63;&#x6f;&#x6c;&#x6f;&#x67;&#110;&#x65;&#x2e;&#x64;&#x65;">&#x77;&#x6f;&#x6c;&#x66;&#64;&#x63;&#x6f;&#x6c;&#x6f;&#x67;&#110;&#x65;&#x2e;&#x64;&#x65;</a><br>          Stefan Esser                <a href="mailto:&#115;&#x65;&#64;&#109;&#x69;&#46;&#85;&#110;&#x69;&#45;&#x4b;&#111;&#x65;&#108;&#x6e;&#x2e;&#100;&#101;">&#115;&#x65;&#64;&#109;&#x69;&#46;&#85;&#110;&#x69;&#45;&#x4b;&#111;&#x65;&#108;&#x6e;&#x2e;&#100;&#101;</a></p>
<p>It is now available as a bundle of 2 drivers:</p>
<ul>
<li>ncr53c8xx generic driver that supports all the SYM53C8XX family including<br>the earliest 810 rev. 1, the latest 896 (2 channel LVD SCSI controller) and<br>the new 895A (1 channel LVD SCSI controller).</li>
<li>sym53c8xx enhanced driver (a.k.a. 896 drivers) that drops support of oldest<br>chips in order to gain advantage of new features, as LOAD/STORE instructions<br>available since the 810A and hardware phase mismatch available with the<br>896 and the 895A.</li>
</ul>
<p>You can find technical information about the NCR 8xx family in the<br>PCI-HOWTO written by Michael Will and in the SCSI-HOWTO written by<br>Drew Eckhardt.</p>
<p>Information about new chips is available at LSILOGIC web server:</p>
<pre><code>      http://www.lsilogic.com/
</code></pre>
<p>SCSI standard documentations are available at SYMBIOS ftp server:</p>
<pre><code>      ftp://ftp.symbios.com/
</code></pre>
<p>Useful SCSI tools written by Eric Youngdale are available at tsx-11:</p>
<pre><code>      ftp://tsx-11.mit.edu/pub/linux/ALPHA/scsi/scsiinfo-X.Y.tar.gz
      ftp://tsx-11.mit.edu/pub/linux/ALPHA/scsi/scsidev-X.Y.tar.gz
</code></pre>
<p>These tools are not ALPHA but quite clean and work quite well.<br>It is essential you have the ‘scsiinfo’ package.</p>
<p>This short documentation describes the features of the generic and enhanced<br>drivers, configuration parameters and control commands available through<br>the proc SCSI file system read / write operations.</p>
<p>This driver has been tested OK with linux/i386, Linux/Alpha and Linux/PPC.</p>
<p>Latest driver version and patches are available at:</p>
<pre><code>      ftp://ftp.tux.org/pub/people/gerard-roudier
</code></pre>
<p>or<br>          <a href="ftp://ftp.symbios.com/mirror/ftp.tux.org/pub/tux/roudier/drivers">ftp://ftp.symbios.com/mirror/ftp.tux.org/pub/tux/roudier/drivers</a></p>
<p>I am not a native speaker of English and there are probably lots of<br>mistakes in this README file. Any help will be welcome.</p>
<ol start="2">
<li>Supported chips and SCSI features</li>
</ol>
<p>The following features are supported for all chips:</p>
<pre><code>Synchronous negotiation
Disconnection
Tagged command queuing
SCSI parity checking
Master parity checking
</code></pre>
<p>“Wide negotiation” is supported for chips that allow it.  The<br>following table shows some characteristics of NCR 8xx family chips<br>and what drivers support them.</p>
<pre><code>                                              Supported by   Supported by
   On board                                   the generic    the enhanced 
</code></pre>
<p>Chip   SDMS BIOS   Wide   SCSI std.   Max. sync   driver         driver</p>
<hr>
<p>810        N         N      FAST10    10 MB/s        Y             N<br>810A       N         N      FAST10    10 MB/s        Y             Y<br>815        Y         N      FAST10    10 MB/s        Y             N<br>825        Y         Y      FAST10    20 MB/s        Y             N<br>825A       Y         Y      FAST10    20 MB/s        Y             Y<br>860        N         N      FAST20    20 MB/s        Y             Y<br>875        Y         Y      FAST20    40 MB/s        Y             Y<br>876        Y         Y      FAST20    40 MB/s        Y             Y<br>895        Y         Y      FAST40    80 MB/s        Y             Y<br>895A       Y         Y      FAST40    80 MB/s        Y             Y<br>896        Y         Y      FAST40    80 MB/s        Y             Y<br>897        Y         Y      FAST40    80 MB/s        Y             Y<br>1510D      Y         Y      FAST40    80 MB/s        Y             Y<br>1010       Y         Y      FAST80   160 MB/s        N             Y<br>1010_66*   Y         Y      FAST80   160 MB/s        N             Y</p>
<ul>
<li>Chip supports 33MHz and 66MHz PCI buses.</li>
</ul>
<p>Summary of other supported features:</p>
<p>Module:                allow to load the driver<br>Memory mapped I/O:     increases performance<br>Profiling information: read operations from the proc SCSI file system<br>Control commands:      write operations to the proc SCSI file system<br>Debugging information: written to syslog (expert only)<br>Scatter / gather<br>Shared interrupt<br>Boot setup commands<br>Serial NVRAM:          Symbios and Tekram formats</p>
<ol start="3">
<li>Advantages of the enhanced 896 driver</li>
</ol>
<p>3.1 Optimized SCSI SCRIPTS.</p>
<p>The 810A, 825A, 875, 895, 896 and 895A support new SCSI SCRIPTS instructions<br>named LOAD and STORE that allow to move up to 1 DWORD from/to an IO register<br>to/from memory much faster that the MOVE MEMORY instruction that is supported<br>by the 53c7xx and 53c8xx family.<br>The LOAD/STORE instructions support absolute and DSA relative addressing<br>modes.  The SCSI SCRIPTS had been entirely rewritten using LOAD/STORE instead<br>of MOVE MEMORY instructions.</p>
<p>3.2 New features of the SYM53C896 (64 bit PCI dual LVD SCSI controller)</p>
<p>The 896 and the 895A allows handling of the phase mismatch context from<br>SCRIPTS (avoids the phase mismatch interrupt that stops the SCSI processor<br>until the C code has saved the context of the transfer).<br>Implementing this without using LOAD/STORE instructions would be painful<br>and I didn’t even want to try it.</p>
<p>The 896 chip supports 64 bit PCI transactions and addressing, while the<br>895A supports 32 bit PCI transactions and 64 bit addressing.<br>The SCRIPTS processor of these chips is not true 64 bit, but uses segment<br>registers for bit 32-63. Another interesting feature is that LOAD/STORE<br>instructions that address the on-chip RAM (8k) remain internal to the chip.</p>
<p>Due to the use of LOAD/STORE SCRIPTS instructions, this driver does not<br>support the following chips:</p>
<ul>
<li>SYM53C810 revision &lt; 0x10 (16)</li>
<li>SYM53C815 all revisions</li>
<li>SYM53C825 revision &lt; 0x10 (16)</li>
</ul>
<ol start="4">
<li>Memory mapped I/O versus normal I/O</li>
</ol>
<p>Memory mapped I/O has less latency than normal I/O.  Since<br>linux-1.3.x, memory mapped I/O is used rather than normal I/O.  Memory<br>mapped I/O seems to work fine on most hardware configurations, but<br>some poorly designed motherboards may break this feature.</p>
<p>The configuration option CONFIG_SCSI_NCR53C8XX_IOMAPPED forces the<br>driver to use normal I/O in all cases.</p>
<ol start="5">
<li>Tagged command queueing</li>
</ol>
<p>Queuing more than 1 command at a time to a device allows it to perform<br>optimizations based on actual head positions and its mechanical<br>characteristics. This feature may also reduce average command latency.<br>In order to really gain advantage of this feature, devices must have<br>a reasonable cache size (No miracle is to be expected for a low-end<br>hard disk with 128 KB or less).<br>Some known SCSI devices do not properly support tagged command queuing.<br>Generally, firmware revisions that fix this kind of problems are available<br>at respective vendor web/ftp sites.<br>All I can say is that the hard disks I use on my machines behave well with<br>this driver with tagged command queuing enabled:</p>
<ul>
<li>IBM S12 0662</li>
<li>Conner 1080S</li>
<li>Quantum Atlas I</li>
<li>Quantum Atlas II</li>
</ul>
<p>If your controller has NVRAM, you can configure this feature per target<br>from the user setup tool. The Tekram Setup program allows to tune the<br>maximum number of queued commands up to 32. The Symbios Setup only allows<br>to enable or disable this feature.</p>
<p>The maximum number of simultaneous tagged commands queued to a device<br>is currently set to 8 by default.  This value is suitable for most SCSI<br>disks.  With large SCSI disks (&gt;= 2GB, cache &gt;= 512KB, average seek time<br>&lt;= 10 ms), using a larger value may give better performances.</p>
<p>The sym53c8xx driver supports up to 255 commands per device, and the<br>generic ncr53c8xx driver supports up to 64, but using more than 32 is<br>generally not worth-while, unless you are using a very large disk or disk<br>array. It is noticeable that most of recent hard disks seem not to accept<br>more than 64 simultaneous commands. So, using more than 64 queued commands<br>is probably just resource wasting.</p>
<p>If your controller does not have NVRAM or if it is managed by the SDMS<br>BIOS/SETUP, you can configure tagged queueing feature and device queue<br>depths from the boot command-line. For example:</p>
<p>  ncr53c8xx=tags:4/t2t3q15-t4q7/t1u0q32</p>
<p>will set tagged commands queue depths as follow:</p>
<ul>
<li>target 2  all luns  on controller 0 –&gt; 15</li>
<li>target 3  all luns  on controller 0 –&gt; 15</li>
<li>target 4  all luns  on controller 0 –&gt;  7</li>
<li>target 1  lun 0     on controller 1 –&gt; 32</li>
<li>all other target/lun                –&gt;  4</li>
</ul>
<p>In some special conditions, some SCSI disk firmwares may return a<br>QUEUE FULL status for a SCSI command. This behaviour is managed by the<br>driver using the following heuristic:</p>
<ul>
<li><p>Each time a QUEUE FULL status is returned, tagged queue depth is reduced<br>to the actual number of disconnected commands. </p>
</li>
<li><p>Every 1000 successfully completed SCSI commands, if allowed by the<br>current limit, the maximum number of queueable commands is incremented.</p>
</li>
</ul>
<p>Since QUEUE FULL status reception and handling is resource wasting, the<br>driver notifies by default this problem to user by indicating the actual<br>number of commands used and their status, as well as its decision on the<br>device queue depth change.<br>The heuristic used by the driver in handling QUEUE FULL ensures that the<br>impact on performances is not too bad. You can get rid of the messages by<br>setting verbose level to zero, as follow:</p>
<p>1st method: boot your system using ‘ncr53c8xx=verb:0’ option.<br>2nd method: apply “setverbose 0” control command to the proc fs entry<br>            corresponding to your controller after boot-up.</p>
<ol start="6">
<li>Parity checking</li>
</ol>
<p>The driver supports SCSI parity checking and PCI bus master parity<br>checking.  These features must be enabled in order to ensure safe data<br>transfers.  However, some flawed devices or mother boards will have<br>problems with parity. You can disable either PCI parity or SCSI parity<br>checking by entering appropriate options from the boot command line.<br>(See 10: Boot setup commands).</p>
<ol start="7">
<li>Profiling information</li>
</ol>
<p>Profiling information is available through the proc SCSI file system.<br>Since gathering profiling information may impact performances, this<br>feature is disabled by default and requires a compilation configuration<br>option to be set to Y.</p>
<p>The device associated with a host has the following pathname:</p>
<pre><code>      /proc/scsi/ncr53c8xx/N     (N=0,1,2 ....)
</code></pre>
<p>Generally, only 1 board is used on hardware configuration, and that device is:<br>          /proc/scsi/ncr53c8xx/0</p>
<p>However, if the driver has been made as module, the number of the<br>hosts is incremented each time the driver is loaded.</p>
<p>In order to display profiling information, just enter:</p>
<pre><code>     cat /proc/scsi/ncr53c8xx/0
</code></pre>
<p>and you will get something like the following text:</p>
<hr>
<p>General information:<br>  Chip NCR53C810, device id 0x1, revision id 0x2<br>  IO port address 0x6000, IRQ number 10<br>  Using memory mapped IO at virtual address 0x282c000<br>  Synchronous transfer period 25, max commands per lun 4<br>Profiling information:<br>  num_trans    = 18014<br>  num_kbytes   = 671314<br>  num_disc     = 25763<br>  num_break    = 1673<br>  num_int      = 1685<br>  num_fly      = 18038<br>  ms_setup     = 4940<br>  ms_data      = 369940<br>  ms_disc      = 183090<br>  ms_post      = 1320</p>
<hr>
<p>General information is easy to understand. The device ID and the<br>revision ID identify the SCSI chip as follows:</p>
<p>Chip    Device id     Revision Id</p>
<hr>
<p>810       0x1            &lt;  0x10<br>810A      0x1            &gt;= 0x10<br>815       0x4<br>825       0x3            &lt;  0x10<br>860       0x6<br>825A      0x3            &gt;= 0x10<br>875       0xf<br>895       0xc</p>
<p>The profiling information is updated upon completion of SCSI commands.<br>A data structure is allocated and zeroed when the host adapter is<br>attached. So, if the driver is a module, the profile counters are<br>cleared each time the driver is loaded.  The “clearprof” command<br>allows you to clear these counters at any time.</p>
<p>The following counters are available:</p>
<p>(“num” prefix means “number of”,<br>“ms” means milli-seconds)</p>
<p>num_trans<br>    Number of completed commands<br>    Example above: 18014 completed commands</p>
<p>num_kbytes<br>    Number of kbytes transferred<br>    Example above: 671 MB transferred</p>
<p>num_disc<br>    Number of SCSI disconnections<br>    Example above: 25763 SCSI disconnections</p>
<p>num_break<br>    number of script interruptions (phase mismatch)<br>    Example above: 1673 script interruptions</p>
<p>num_int<br>    Number of interrupts other than “on the fly”<br>    Example above: 1685 interruptions not “on the fly”</p>
<p>num_fly<br>    Number of interrupts “on the fly”<br>    Example above: 18038 interruptions “on the fly”</p>
<p>ms_setup<br>    Elapsed time for SCSI commands setups<br>    Example above: 4.94 seconds</p>
<p>ms_data<br>    Elapsed time for data transfers<br>    Example above: 369.94 seconds spent for data transfer</p>
<p>ms_disc<br>    Elapsed time for SCSI disconnections<br>    Example above: 183.09 seconds spent disconnected</p>
<p>ms_post<br>    Elapsed time for command post processing<br>    (time from SCSI status get to command completion call)<br>    Example above: 1.32 seconds spent for post processing</p>
<p>Due to the 1/100 second tick of the system clock, “ms_post” time may<br>be wrong.</p>
<p>In the example above, we got 18038 interrupts “on the fly” and only<br>1673 script breaks generally due to disconnections inside a segment<br>of the scatter list.</p>
<ol start="8">
<li>Control commands</li>
</ol>
<p>Control commands can be sent to the driver with write operations to<br>the proc SCSI file system. The generic command syntax is the<br>following:</p>
<pre><code>  echo &quot;&lt;verb&gt; &lt;parameters&gt;&quot; &gt;/proc/scsi/ncr53c8xx/0
  (assumes controller number is 0)
</code></pre>
<p>Using “all” for “<target>“ parameter with the commands below will<br>apply to all targets of the SCSI chain (except the controller).</p>
<p>Available commands:</p>
<p>8.1 Set minimum synchronous period factor</p>
<pre><code>setsync &lt;target&gt; &lt;period factor&gt;

target:    target number
period:    minimum synchronous period.
           Maximum speed = 1000/(4*period factor) except for special
           cases below.

Specify a period of 255, to force asynchronous transfer mode.

  10 means 25 nano-seconds synchronous period
  11 means 30 nano-seconds synchronous period
  12 means 50 nano-seconds synchronous period
</code></pre>
<p>8.2 Set wide size</p>
<pre><code>setwide &lt;target&gt; &lt;size&gt;

target:    target number
size:      0=8 bits, 1=16bits
</code></pre>
<p>8.3 Set maximum number of concurrent tagged commands</p>
<pre><code>settags &lt;target&gt; &lt;tags&gt;

target:    target number
tags:      number of concurrent tagged commands
           must not be greater than SCSI_NCR_MAX_TAGS (default: 8)
</code></pre>
<p>8.4 Set order type for tagged command</p>
<pre><code>setorder &lt;order&gt;

order:     3 possible values:
           simple: use SIMPLE TAG for all operations (read and write)
           ordered: use ORDERED TAG for all operations
           default: use default tag type,
                    SIMPLE  TAG for read  operations
                    ORDERED TAG for write operations
</code></pre>
<p>8.5 Set debug mode</p>
<pre><code>setdebug &lt;list of debug flags&gt;

Available debug flags:
    alloc:   print info about memory allocations (ccb, lcb)
    queue:   print info about insertions into the command start queue
    result:  print sense data on CHECK CONDITION status
    scatter: print info about the scatter process
    scripts: print info about the script binding process
tiny:    print minimal debugging information
timing:  print timing information of the NCR chip
nego:    print information about SCSI negotiations
phase:   print information on script interruptions

Use &quot;setdebug&quot; with no argument to reset debug flags.
</code></pre>
<p>8.6 Clear profile counters</p>
<pre><code>clearprof

The profile counters are automatically cleared when the amount of
data transferred reaches 1000 GB in order to avoid overflow.
The &quot;clearprof&quot; command allows you to clear these counters at any time.
</code></pre>
<p>8.7 Set flag (no_disc)</p>
<pre><code>setflag &lt;target&gt; &lt;flag&gt;

target:    target number

For the moment, only one flag is available:

    no_disc:   not allow target to disconnect.

Do not specify any flag in order to reset the flag. For example:
- setflag 4
  will reset no_disc flag for target 4, so will allow it disconnections.
- setflag all
  will allow disconnection for all devices on the SCSI bus.
</code></pre>
<p>8.8 Set verbose level</p>
<pre><code>setverbose #level

The driver default verbose level is 1. This command allows to change 
th driver verbose level after boot-up.
</code></pre>
<p>8.9 Reset all logical units of a target</p>
<pre><code>resetdev &lt;target&gt;

target:    target number
The driver will try to send a BUS DEVICE RESET message to the target.
(Only supported by the SYM53C8XX driver and provided for test purpose)
</code></pre>
<p>8.10 Abort all tasks of all logical units of a target</p>
<pre><code>cleardev &lt;target&gt;

target:    target number
The driver will try to send a ABORT message to all the logical units 
of the target.
(Only supported by the SYM53C8XX driver and provided for test purpose)
</code></pre>
<ol start="9">
<li>Configuration parameters</li>
</ol>
<p>If the firmware of all your devices is perfect enough, all the<br>features supported by the driver can be enabled at start-up.  However,<br>if only one has a flaw for some SCSI feature, you can disable the<br>support by the driver of this feature at linux start-up and enable<br>this feature after boot-up only for devices that support it safely.</p>
<p>CONFIG_SCSI_NCR53C8XX_IOMAPPED       (default answer: n)<br>    Answer “y” if you suspect your mother board to not allow memory mapped I/O.<br>    May slow down performance a little.  This option is required by<br>    Linux/PPC and is used no matter what you select here.  Linux/PPC<br>    suffers no performance loss with this option since all IO is memory<br>    mapped anyway.</p>
<p>CONFIG_SCSI_NCR53C8XX_DEFAULT_TAGS    (default answer: 8)<br>    Default tagged command queue depth.</p>
<p>CONFIG_SCSI_NCR53C8XX_MAX_TAGS         (default answer: 8)<br>    This option allows you to specify the maximum number of tagged commands<br>    that can be queued to a device. The maximum supported value is 32.</p>
<p>CONFIG_SCSI_NCR53C8XX_SYNC            (default answer: 5)<br>    This option allows you to specify the frequency in MHz the driver<br>    will use at boot time for synchronous data transfer negotiations.<br>    This frequency can be changed later with the “setsync” control command.<br>    0 means “asynchronous data transfers”.</p>
<p>CONFIG_SCSI_NCR53C8XX_FORCE_SYNC_NEGO (default answer: n)<br>    Force synchronous negotiation for all SCSI-2 devices.<br>    Some SCSI-2 devices do not report this feature in byte 7 of inquiry<br>    response but do support it properly (TAMARACK scanners for example).</p>
<p>CONFIG_SCSI_NCR53C8XX_NO_DISCONNECT   (default and only reasonable answer: n)<br>    If you suspect a device of yours does not properly support disconnections,<br>    you can answer “y”. Then, all SCSI devices will never disconnect the bus<br>    even while performing long SCSI operations.</p>
<p>CONFIG_SCSI_NCR53C8XX_SYMBIOS_COMPAT<br>    Genuine SYMBIOS boards use GPIO0 in output for controller LED and GPIO3<br>    bit as a flag indicating singled-ended/differential interface.<br>    If all the boards of your system are genuine SYMBIOS boards or use<br>    BIOS and drivers from SYMBIOS, you would want to enable this option.<br>    This option must NOT be enabled if your system has at least one 53C8XX<br>    based scsi board with a vendor-specific BIOS.<br>    For example, Tekram DC-390/U, DC-390/W and DC-390/F scsi controllers<br>    use a vendor-specific BIOS and are known to not use SYMBIOS compatible<br>    GPIO wiring. So, this option must not be enabled if your system has<br>    such a board installed.</p>
<p>CONFIG_SCSI_NCR53C8XX_NVRAM_DETECT<br>    Enable support for reading the serial NVRAM data on Symbios and<br>    some Symbios compatible cards, and Tekram DC390W/U/F cards. Useful for<br>    systems with more than one Symbios compatible controller where at least<br>    one has a serial NVRAM, or for a system with a mixture of Symbios and<br>    Tekram cards. Enables setting the boot order of host adaptors<br>    to something other than the default order or “reverse probe” order.<br>    Also enables Symbios and Tekram cards to be distinguished so<br>    CONFIG_SCSI_NCR53C8XX_SYMBIOS_COMPAT may be set in a system with a<br>    mixture of Symbios and Tekram cards so the Symbios cards can make use of<br>    the full range of Symbios features, differential, led pin, without<br>    causing problems for the Tekram card(s).</p>
<ol start="10">
<li>Boot setup commands</li>
</ol>
<p>10.1 Syntax</p>
<p>Setup commands can be passed to the driver either at boot time or as a<br>string variable using ‘insmod’.</p>
<p>A boot setup command for the ncr53c8xx (sym53c8xx) driver begins with the<br>driver name “ncr53c8xx=”(sym53c8xx). The kernel syntax parser then expects<br>an optional list of integers separated with comma followed by an optional<br>list of comma-separated strings. Example of boot setup command under lilo<br>prompt:</p>
<p>lilo: linux root=/dev/hda2 ncr53c8xx=tags:4,sync:10,debug:0x200</p>
<ul>
<li>enable tagged commands, up to 4 tagged commands queued.</li>
<li>set synchronous negotiation speed to 10 Mega-transfers / second.</li>
<li>set DEBUG_NEGO flag.</li>
</ul>
<p>Since comma seems not to be allowed when defining a string variable using<br>‘insmod’, the driver also accepts <space> as option separator.<br>The following command will install driver module with the same options as<br>above.</p>
<pre><code>insmod ncr53c8xx.o ncr53c8xx=&quot;tags:4 sync:10 debug:0x200&quot;
</code></pre>
<p>For the moment, the integer list of arguments is discarded by the driver.<br>It will be used in the future in order to allow a per controller setup.</p>
<p>Each string argument must be specified as “keyword:value”. Only lower-case<br>characters and digits are allowed.</p>
<p>In a system that contains multiple 53C8xx adapters insmod will install the<br>specified driver on each adapter. To exclude a chip use the ‘excl’ keyword.</p>
<p>The sequence of commands, </p>
<pre><code>insmod sym53c8xx sym53c8xx=excl:0x1400
insmod ncr53c8xx
</code></pre>
<p>installs the sym53c8xx driver on all adapters except the one at IO port<br>address 0x1400 and then installs the ncr53c8xx driver to the adapter at IO<br>port address 0x1400.</p>
<p>10.2 Available arguments</p>
<p>10.2.1  Master parity checking<br>        mpar:y     enabled<br>        mpar:n     disabled</p>
<p>10.2.2  Scsi parity checking<br>        spar:y     enabled<br>        spar:n     disabled</p>
<p>10.2.3  Scsi disconnections<br>        disc:y     enabled<br>        disc:n     disabled</p>
<p>10.2.4  Special features<br>   Only apply to 810A, 825A, 860, 875 and 895 controllers.<br>   Have no effect with other ones.<br>        specf:y    (or 1) enabled<br>        specf:n    (or 0) disabled<br>        specf:3           enabled except Memory Write And Invalidate<br>   The default driver setup is ‘specf:3’. As a consequence, option ‘specf:y’<br>   must be specified in the boot setup command to enable Memory Write And<br>   Invalidate.</p>
<p>10.2.5  Ultra SCSI support<br>   Only apply to 860, 875, 895, 895a, 896, 1010 and 1010_66 controllers.<br>   Have no effect with other ones.<br>        ultra:n    All ultra speeds enabled<br>        ultra:2    Ultra2 enabled<br>        ultra:1    Ultra enabled<br>        ultra:0    Ultra speeds disabled</p>
<p>10.2.6  Default number of tagged commands<br>        tags:0     (or tags:1 ) tagged command queuing disabled<br>        tags:#tags (#tags  &gt; 1) tagged command queuing enabled<br>  #tags will be truncated to the max queued commands configuration parameter.<br>  This option also allows to specify a command queue depth for each device<br>  that support tagged command queueing.<br>  Example:<br>      ncr53c8xx=tags:10/t2t3q16-t5q24/t1u2q32<br>               will set devices queue depth as follow:<br>      - controller #0 target #2 and target #3                  -&gt; 16 commands,<br>      - controller #0 target #5                                -&gt; 24 commands,<br>      - controller #1 target #1 logical unit #2                -&gt; 32 commands,<br>      - all other logical units (all targets, all controllers) -&gt; 10 commands.</p>
<p>10.2.7  Default synchronous period factor<br>        sync:255     disabled (asynchronous transfer mode)<br>        sync:#factor<br>  #factor = 10     Ultra-2 SCSI 40 Mega-transfers / second<br>  #factor = 11     Ultra-2 SCSI 33 Mega-transfers / second<br>  #factor &lt; 25     Ultra   SCSI 20 Mega-transfers / second<br>  #factor &lt; 50     Fast    SCSI-2</p>
<p>  In all cases, the driver will use the minimum transfer period supported by<br>  controllers according to NCR53C8XX chip type.</p>
<p>10.2.8  Negotiate synchronous with all devices<br>        (force sync nego)<br>        fsn:y      enabled<br>        fsn:n      disabled</p>
<p>10.2.9  Verbosity level<br>        verb:0     minimal<br>        verb:1     normal<br>        verb:2     too much</p>
<p>10.2.10 Debug mode<br>        debug:0     clear debug flags<br>        debug:#x   set debug flags<br>  #x is an integer value combining the following power-of-2 values:<br>  DEBUG_ALLOC       0x1<br>  DEBUG_PHASE       0x2<br>  DEBUG_POLL        0x4<br>  DEBUG_QUEUE       0x8<br>  DEBUG_RESULT     0x10<br>  DEBUG_SCATTER    0x20<br>  DEBUG_SCRIPT     0x40<br>  DEBUG_TINY       0x80<br>  DEBUG_TIMING    0x100<br>  DEBUG_NEGO      0x200<br>  DEBUG_TAGS      0x400<br>  DEBUG_FREEZE    0x800<br>  DEBUG_RESTART  0x1000</p>
<p>  You can play safely with DEBUG_NEGO. However, some of these flags may<br>  generate bunches of syslog messages. </p>
<p>10.2.11 Burst max<br>        burst:0    burst disabled<br>        burst:255  get burst length from initial IO register settings.<br>        burst:#x   burst enabled (1&lt;&lt;#x burst transfers max)<br>  #x is an integer value which is log base 2 of the burst transfers max.<br>  The NCR53C875 and NCR53C825A support up to 128 burst transfers (#x = 7).<br>  Other chips only support up to 16 (#x = 4).<br>  This is a maximum value. The driver set the burst length according to chip<br>  and revision ids. By default the driver uses the maximum value supported<br>  by the chip.</p>
<p>10.2.12 LED support<br>        led:1      enable  LED support<br>        led:0      disable LED support<br>  Donnot enable LED support if your scsi board does not use SDMS BIOS.<br>  (See ‘Configuration parameters’)</p>
<p>10.2.13 Max wide<br>        wide:1      wide scsi enabled<br>        wide:0      wide scsi disabled<br>  Some scsi boards use a 875 (ultra wide) and only supply narrow connectors.<br>  If you have connected a wide device with a 50 pins to 68 pins cable<br>  converter, any accepted wide negotiation will break further data transfers.<br>  In such a case, using “wide:0” in the bootup command will be helpful. </p>
<p>10.2.14 Differential mode<br>        diff:0    never set up diff mode<br>        diff:1    set up diff mode if BIOS set it<br>        diff:2    always set up diff mode<br>        diff:3    set diff mode if GPIO3 is not set</p>
<p>10.2.15 IRQ mode<br>        irqm:0     always open drain<br>        irqm:1     same as initial settings (assumed BIOS settings)<br>        irqm:2     always totem pole<br>        irqm:0x10  driver will not use IRQF_SHARED flag when requesting irq<br>        irqm:0x20  driver will not use IRQF_DISABLED flag when requesting irq</p>
<pre><code>(Bits 0x10 and 0x20 can be combined with hardware irq mode option)
</code></pre>
<p>10.2.16 Reverse probe<br>        revprob:n   probe chip ids from the PCI configuration in this order:<br>                    810, 815, 820, 860, 875, 885, 895, 896<br>        revprob:y   probe chip ids in the reverse order.</p>
<p>10.2.17 Fix up PCI configuration space<br>        pcifix:<option bits></p>
<pre><code>Available option bits:
    0x0:   No attempt to fix PCI configuration space registers values.
    0x1:   Set PCI cache-line size register if not set.
    0x2:   Set write and invalidate bit in PCI command register.
    0x4:   Increase if necessary PCI latency timer according to burst max.

Use &#39;pcifix:7&#39; in order to allow the driver to fix up all PCI features.
</code></pre>
<p>10.2.18 Serial NVRAM<br>        nvram:n     do not look for serial NVRAM<br>        nvram:y     test controllers for onboard serial NVRAM<br>        (alternate binary form)<br>        mvram=<bits options><br>        0x01   look for NVRAM  (equivalent to nvram=y)<br>        0x02   ignore NVRAM “Synchronous negotiation” parameters for all devices<br>        0x04   ignore NVRAM “Wide negotiation”  parameter for all devices<br>        0x08   ignore NVRAM “Scan at boot time” parameter for all devices<br>        0x80   also attach controllers set to OFF in the NVRAM (sym53c8xx only)</p>
<p>10.2.19 Check SCSI BUS<br>        buschk:<option bits></p>
<pre><code>Available option bits:
    0x0:   No check.
    0x1:   Check and do not attach the controller on error.  
    0x2:   Check and just warn on error.
    0x4:   Disable SCSI bus integrity checking.
</code></pre>
<p>10.2.20 Exclude a host from being attached<br>        excl=<io_address></p>
<pre><code>Prevent host at a given io address from being attached.
For example &#39;ncr53c8xx=excl:0xb400,excl:0xc000&#39; indicate to the 
ncr53c8xx driver not to attach hosts at address 0xb400 and 0xc000.
</code></pre>
<p>10.2.21 Suggest a default SCSI id for hosts<br>        hostid:255    no id suggested.<br>        hostid:#x   (0 &lt; x &lt; 7) x suggested for hosts SCSI id.</p>
<pre><code>If a host SCSI id is available from the NVRAM, the driver will ignore 
any value suggested as boot option. Otherwise, if a suggested value 
different from 255 has been supplied, it will use it. Otherwise, it will 
try to deduce the value previously set in the hardware and use value 
7 if the hardware value is zero.
</code></pre>
<p>10.2.22 Enable use of IMMEDIATE ARBITRATION<br>        (only supported by the sym53c8xx driver. See 10.7 for more details)<br>        iarb:0    do not use this feature.<br>        iarb:#x   use this feature according to bit fields as follow:</p>
<pre><code>bit 0 (1) : enable IARB each time the initiator has been reselected 
            when it arbitrated for the SCSI BUS.
(#x &gt;&gt; 4) : maximum number of successive settings of IARB if the initiator 
            win arbitration and it has other commands to send to a device.
</code></pre>
<p>Boot fail safe<br>    safe:y    load the following assumed fail safe initial setup</p>
<p>  master parity            disabled        mpar:n<br>  scsi parity            enabled            spar:y<br>  disconnections        not allowed        disc:n<br>  special features        disabled        specf:n<br>  ultra scsi            disabled        ultra:n<br>  force sync negotiation    disabled        fsn:n<br>  reverse probe            disabled        revprob:n<br>  PCI fix up                    disabled                pcifix:0<br>  serial NVRAM                  enabled                 nvram:y<br>  verbosity level        2            verb:2<br>  tagged command queuing    disabled        tags:0<br>  synchronous negotiation    disabled        sync:255<br>  debug flags            none            debug:0<br>  burst length            from BIOS settings    burst:255<br>  LED support            disabled        led:0<br>  wide support            disabled        wide:0<br>  settle time            10 seconds        settle:10<br>  differential support        from BIOS settings    diff:1<br>  irq mode            from BIOS settings    irqm:1<br>  SCSI BUS check        do not attach on error    buschk:1<br>  immediate arbitration        disabled        iarb:0</p>
<p>10.3 Advised boot setup commands</p>
<p>If the driver has been configured with default options, the equivalent<br>boot setup is:</p>
<p>   ncr53c8xx=mpar:y,spar:y,disc:y,specf:3,fsn:n,ultra:2,fsn:n,revprob:n,verb:1<br>             tags:0,sync:50,debug:0,burst:7,led:0,wide:1,settle:2,diff:0,irqm:0</p>
<p>For an installation diskette or a safe but not fast system,<br>boot setup can be:</p>
<pre><code>ncr53c8xx=safe:y,mpar:y,disc:y
ncr53c8xx=safe:y,disc:y
ncr53c8xx=safe:y,mpar:y
ncr53c8xx=safe:y
</code></pre>
<p>My personal system works flawlessly with the following equivalent setup:</p>
<p>   ncr53c8xx=mpar:y,spar:y,disc:y,specf:1,fsn:n,ultra:2,fsn:n,revprob:n,verb:1<br>             tags:32,sync:12,debug:0,burst:7,led:1,wide:1,settle:2,diff:0,irqm:0</p>
<p>The driver prints its actual setup when verbosity level is 2. You can try<br>“ncr53c8xx=verb:2” to get the “static” setup of the driver, or add “verb:2”<br>to your boot setup command in order to check the actual setup the driver is<br>using.</p>
<p>10.4 PCI configuration fix-up boot option</p>
<p>pcifix:<option bits></p>
<p>Available option bits:<br>    0x1:     Set PCI cache-line size register if not set.<br>    0x2:     Set write and invalidate bit in PCI command register.</p>
<p>Use ‘pcifix:3’ in order to allow the driver to fix both PCI features.</p>
<p>These options only apply to new SYMBIOS chips 810A, 825A, 860, 875<br>and 895 and are only supported for Pentium and 486 class processors.<br>Recent SYMBIOS 53C8XX scsi processors are able to use PCI read multiple<br>and PCI write and invalidate commands. These features require the<br>cache line size register to be properly set in the PCI configuration<br>space of the chips. On the other hand, chips will use PCI write and<br>invalidate commands only if the corresponding bit is set to 1 in the<br>PCI command register.</p>
<p>Not all PCI bioses set the PCI cache line register and the PCI write and<br>invalidate bit in the PCI configuration space of 53C8XX chips.<br>Optimized PCI accesses may be broken for some PCI/memory controllers or<br>make problems with some PCI boards.</p>
<p>This fix-up worked flawlessly on my previous system.<br>(MB Triton HX / 53C875 / 53C810A)<br>I use these options at my own risks as you will do if you decide to<br>use them too.</p>
<p>10.5 Serial NVRAM support boot option</p>
<p>nvram:n     do not look for serial NVRAM<br>nvram:y     test controllers for onboard serial NVRAM</p>
<p>This option can also been entered as an hexadecimal value that allows<br>to control what information the driver will get from the NVRAM and what<br>information it will ignore.<br>For details see ‘17. Serial NVRAM support’.</p>
<p>When this option is enabled, the driver tries to detect all boards using<br>a Serial NVRAM. This memory is used to hold user set up parameters.</p>
<p>The parameters the driver is able to get from the NVRAM depend on the<br>data format used, as follow:</p>
<pre><code>                             Tekram format      Symbios format
</code></pre>
<p>General and host parameters<br>    Boot order                         N                   Y<br>    Host SCSI ID                       Y                   Y<br>    SCSI parity checking               Y                   Y<br>    Verbose boot messages              N                   Y<br>SCSI devices parameters<br>    Synchronous transfer speed         Y                   Y<br>    Wide 16 / Narrow                   Y                   Y<br>    Tagged Command Queuing enabled     Y                   Y<br>    Disconnections enabled             Y                   Y<br>    Scan at boot time                  N                   Y</p>
<p>In order to speed up the system boot, for each device configured without<br>the “scan at boot time” option, the driver forces an error on the<br>first TEST UNIT READY command received for this device.</p>
<p>Some SDMS BIOS revisions seem to be unable to boot cleanly with very fast<br>hard disks. In such a situation you cannot configure the NVRAM with<br>optimized parameters value.</p>
<p>The ‘nvram’ boot option can be entered in hexadecimal form in order<br>to ignore some options configured in the NVRAM, as follow:</p>
<p>mvram=<bits options><br>      0x01   look for NVRAM  (equivalent to nvram=y)<br>      0x02   ignore NVRAM “Synchronous negotiation” parameters for all devices<br>      0x04   ignore NVRAM “Wide negotiation”  parameter for all devices<br>      0x08   ignore NVRAM “Scan at boot time” parameter for all devices<br>      0x80   also attach controllers set to OFF in the NVRAM (sym53c8xx only)</p>
<p>Option 0x80 is only supported by the sym53c8xx driver and is disabled by<br>default. Result is that, by default (option not set), the sym53c8xx driver<br>will not attach controllers set to OFF in the NVRAM.</p>
<p>The ncr53c8xx always tries to attach all the controllers. Option 0x80 has<br>not been added to the ncr53c8xx driver, since it has been reported to<br>confuse users who use this driver since a long time. If you desire a<br>controller not to be attached by the ncr53c8xx driver at Linux boot, you<br>must use the ‘excl’ driver boot option.</p>
<p>10.6 SCSI BUS checking boot option.</p>
<p>When this option is set to a non-zero value, the driver checks SCSI lines<br>logic state, 100 micro-seconds after having asserted the SCSI RESET line.<br>The driver just reads SCSI lines and checks all lines read FALSE except RESET.<br>Since SCSI devices shall release the BUS at most 800 nano-seconds after SCSI<br>RESET has been asserted, any signal to TRUE may indicate a SCSI BUS problem.<br>Unfortunately, the following common SCSI BUS problems are not detected:</p>
<ul>
<li>Only 1 terminator installed.</li>
<li>Misplaced terminators.</li>
<li>Bad quality terminators.<br>On the other hand, either bad cabling, broken devices, not conformant<br>devices, … may cause a SCSI signal to be wrong when te driver reads it.</li>
</ul>
<p>10.7 IMMEDIATE ARBITRATION boot option</p>
<p>This option is only supported by the SYM53C8XX driver (not by the NCR53C8XX).</p>
<p>SYMBIOS 53C8XX chips are able to arbitrate for the SCSI BUS as soon as they<br>have detected an expected disconnection (BUS FREE PHASE). For this process<br>to be started, bit 1 of SCNTL1 IO register must be set when the chip is<br>connected to the SCSI BUS.</p>
<p>When this feature has been enabled for the current connection, the chip has<br>every chance to win arbitration if only devices with lower priority are<br>competing for the SCSI BUS. By the way, when the chip is using SCSI id 7,<br>then it will for sure win the next SCSI BUS arbitration.</p>
<p>Since, there is no way to know what devices are trying to arbitrate for the<br>BUS, using this feature can be extremely unfair. So, you are not advised<br>to enable it, or at most enable this feature for the case the chip lost<br>the previous arbitration (boot option ‘iarb:1’).</p>
<p>This feature has the following advantages:</p>
<p>a) Allow the initiator with ID 7 to win arbitration when it wants so.<br>b) Overlap at least 4 micro-seconds of arbitration time with the execution<br>   of SCRIPTS that deal with the end of the current connection and that<br>   starts the next job.</p>
<p>Hmmm… But (a) may just prevent other devices from reselecting the initiator,<br>and delay data transfers or status/completions, and (b) may just waste<br>SCSI BUS bandwidth if the SCRIPTS execution lasts more than 4 micro-seconds.</p>
<p>The use of IARB needs the SCSI_NCR_IARB_SUPPORT option to have been defined<br>at compile time and the ‘iarb’ boot option to have been set to a non zero<br>value at boot time. It is not that useful for real work, but can be used<br>to stress SCSI devices or for some applications that can gain advantage of<br>it. By the way, if you experience badnesses like ‘unexpected disconnections’,<br>‘bad reselections’, etc… when using IARB on heavy IO load, you should not<br>be surprised, because force-feeding anything and blocking its arse at the<br>same time cannot work for a long time. :-))</p>
<ol start="11">
<li>Some constants and flags of the ncr53c8xx.h header file</li>
</ol>
<p>Some of these are defined from the configuration parameters.  To<br>change other “defines”, you must edit the header file.  Do that only<br>if you know what you are doing.</p>
<p>SCSI_NCR_SETUP_SPECIAL_FEATURES    (default: defined)<br>    If defined, the driver will enable some special features according<br>    to chip and revision id.<br>        For 810A, 860, 825A, 875 and 895 scsi chips, this option enables<br>    support of features that reduce load of PCI bus and memory accesses<br>    during  scsi transfer processing: burst op-code fetch, read multiple,<br>        read line, prefetch, cache line, write and invalidate,<br>        burst 128 (875 only), large dma fifo (875 only), offset 16 (875 only).<br>    Can be changed by the following boot setup command:<br>        ncr53c8xx=specf:n</p>
<p>SCSI_NCR_IOMAPPED        (default: not defined)<br>    If defined, normal I/O is forced.</p>
<p>SCSI_NCR_SHARE_IRQ        (default: defined)<br>    If defined, request shared IRQ.</p>
<p>SCSI_NCR_MAX_TAGS        (default: 8)<br>    Maximum number of simultaneous tagged commands to a device.<br>    Can be changed by “settags <target> <maxtags>“</p>
<p>SCSI_NCR_SETUP_DEFAULT_SYNC     (default: 50)<br>    Transfer period factor the driver will use at boot time for synchronous<br>    negotiation. 0 means asynchronous.<br>    Can be changed by “setsync <target> <period factor>“</p>
<p>SCSI_NCR_SETUP_DEFAULT_TAGS     (default: 8)<br>    Default number of simultaneous tagged commands to a device.<br>    &lt; 1 means tagged command queuing disabled at start-up.</p>
<p>SCSI_NCR_ALWAYS_SIMPLE_TAG    (default: defined)<br>    Use SIMPLE TAG for read and write commands.<br>    Can be changed by “setorder &lt;ordered|simple|default&gt;”</p>
<p>SCSI_NCR_SETUP_DISCONNECTION    (default: defined)<br>    If defined, targets are allowed to disconnect.</p>
<p>SCSI_NCR_SETUP_FORCE_SYNC_NEGO    (default: not defined)<br>    If defined, synchronous negotiation is tried for all SCSI-2 devices.<br>    Can be changed by “setsync <target> <period>“</p>
<p>SCSI_NCR_SETUP_MASTER_PARITY    (default: defined)<br>    If defined, master parity checking is enabled.</p>
<p>SCSI_NCR_SETUP_MASTER_PARITY    (default: defined)<br>    If defined, SCSI parity checking is enabled.</p>
<p>SCSI_NCR_PROFILE_SUPPORT    (default: not defined)<br>    If defined, profiling information is gathered.</p>
<p>SCSI_NCR_MAX_SCATTER        (default: 128)<br>    Scatter list size of the driver ccb.</p>
<p>SCSI_NCR_MAX_TARGET        (default: 16)<br>    Max number of targets per host.</p>
<p>SCSI_NCR_MAX_HOST        (default: 2)<br>    Max number of host controllers.</p>
<p>SCSI_NCR_SETTLE_TIME        (default: 2)<br>    Number of seconds the driver will wait after reset.</p>
<p>SCSI_NCR_TIMEOUT_ALERT        (default: 3)<br>    If a pending command will time out after this amount of seconds,<br>    an ordered tag is used for the next command.<br>    Avoids timeouts for unordered tagged commands.</p>
<p>SCSI_NCR_CAN_QUEUE        (default: 7*SCSI_NCR_MAX_TAGS)<br>    Max number of commands that can be queued to a host.</p>
<p>SCSI_NCR_CMD_PER_LUN        (default: SCSI_NCR_MAX_TAGS)<br>    Max number of commands queued to a host for a device.</p>
<p>SCSI_NCR_SG_TABLESIZE        (default: SCSI_NCR_MAX_SCATTER-1)<br>    Max size of the Linux scatter/gather list.</p>
<p>SCSI_NCR_MAX_LUN    (default: 8)<br>    Max number of LUNs per target.</p>
<ol start="12">
<li>Installation</li>
</ol>
<p>This driver is part of the linux kernel distribution.<br>Driver files are located in the sub-directory “drivers/scsi” of the<br>kernel source tree.</p>
<p>Driver files:</p>
<pre><code>README.ncr53c8xx    : this file
ChangeLog.ncr53c8xx    : change log
ncr53c8xx.h        : definitions
ncr53c8xx.c        : the driver code
</code></pre>
<p>New driver versions are made available separately in order to allow testing<br>changes and new features prior to including them into the linux kernel<br>distribution. The following URL provides information on latest available<br>patches: </p>
<pre><code>  ftp://ftp.tux.org/pub/people/gerard-roudier/README
</code></pre>
<ol start="13">
<li>Architecture dependent features.</li>
</ol>
<Not yet written>


<ol start="14">
<li>Known problems</li>
</ol>
<p>14.1 Tagged commands with Iomega Jaz device</p>
<p>I have not tried this device, however it has been reported to me the<br>following: This device is capable of Tagged command queuing. However<br>while spinning up, it rejects Tagged commands. This behaviour is<br>conforms to 6.8.2 of SCSI-2 specifications. The current behaviour of<br>the driver in that situation is not satisfying. So do not enable<br>Tagged command queuing for devices that are able to spin down.  The<br>other problem that may appear is timeouts. The only way to avoid<br>timeouts seems to edit linux/drivers/scsi/sd.c and to increase the<br>current timeout values.</p>
<p>14.2 Device names change when another controller is added.</p>
<p>When you add a new NCR53C8XX chip based controller to a system that already<br>has one or more controllers of this family, it may happen that the order<br>the driver registers them to the kernel causes problems due to device<br>name changes.<br>When at least one controller uses NvRAM, SDMS BIOS version 4 allows you to<br>define the order the BIOS will scan the scsi boards. The driver attaches<br>controllers according to BIOS information if NvRAM detect option is set.</p>
<p>If your controllers do not have NvRAM, you can:</p>
<ul>
<li>Ask the driver to probe chip ids in reverse order from the boot command<br>line: ncr53c8xx=revprob:y</li>
<li>Make appropriate changes in the fstab.</li>
<li>Use the ‘scsidev’ tool from Eric Youngdale.</li>
</ul>
<p>14.3 Using only 8 bit devices with a WIDE SCSI controller.</p>
<p>When only 8 bit NARROW devices are connected to a 16 bit WIDE SCSI controller,<br>you must ensure that lines of the wide part of the SCSI BUS are pulled-up.<br>This can be achieved by ENABLING the WIDE TERMINATOR portion of the SCSI<br>controller card.<br>The TYAN 1365 documentation revision 1.2 is not correct about such settings.<br>(page 10, figure 3.3).</p>
<p>14.4 Possible data corruption during a Memory Write and Invalidate</p>
<p>This problem is described in SYMBIOS DEL 397, Part Number 69-039241, ITEM 4.</p>
<p>In some complex situations, 53C875 chips revision &lt;= 3 may start a PCI<br>Write and Invalidate Command at a not cache-line-aligned 4 DWORDS boundary.<br>This is only possible when Cache Line Size is 8 DWORDS or greater.<br>Pentium systems use a 8 DWORDS cache line size and so are concerned by<br>this chip bug, unlike i486 systems that use a 4 DWORDS cache line size.</p>
<p>When this situation occurs, the chip may complete the Write and Invalidate<br>command after having only filled part of the last cache line involved in<br>the transfer, leaving to data corruption the remainder of this cache line.</p>
<p>Not using Write And Invalidate obviously gets rid of this chip bug, and so<br>it is now the default setting of the driver.<br>However, for people like me who want to enable this feature, I have added<br>part of a work-around suggested by SYMBIOS. This work-around resets the<br>addressing logic when the DATA IN phase is entered and so prevents the bug<br>from being triggered for the first SCSI MOVE of the phase. This work-around<br>should be enough according to the following:</p>
<p>The only driver internal data structure that is greater than 8 DWORDS  and<br>that is moved by the SCRIPTS processor is the ‘CCB header’ that contains<br>the context of the SCSI transfer. This data structure is aligned on 8 DWORDS<br>boundary (Pentium Cache Line Size), and so is immune to this chip bug, at<br>least on Pentium systems.<br>But the conditions of this bug can be met when a SCSI read command is<br>performed using a buffer that is 4 DWORDS but not cache-line aligned.<br>This cannot happen under Linux when scatter/gather lists are used since<br>they only refer to system buffers that are well aligned. So, a work around<br>may only be needed under Linux when a scatter/gather list is not used and<br>when the SCSI DATA IN phase is reentered after a phase mismatch.</p>
<p>14.5 IRQ sharing problems</p>
<p>When an IRQ is shared by devices that are handled by different drivers, it<br>may happen that one driver complains about the request of the IRQ having<br>failed. Inder Linux-2.0, this may be due to one driver having requested the<br>IRQ using the IRQF_DISABLED flag but some other having requested the same IRQ<br>without this flag. Under both Linux-2.0 and linux-2.2, this may be caused by<br>one driver not having requested the IRQ with the IRQF_SHARED flag.</p>
<p>By default, the ncr53c8xx and sym53c8xx drivers request IRQs with both the<br>IRQF_DISABLED and the IRQF_SHARED flag under Linux-2.0 and with only the IRQF_SHARED<br>flag under Linux-2.2.</p>
<p>Under Linux-2.0, you can disable use of IRQF_DISABLED flag from the boot<br>command line by using the following option:</p>
<pre><code> ncr53c8xx=irqm:0x20   (for the generic ncr53c8xx driver)
 sym53c8xx=irqm:0x20   (for the sym53c8xx driver)
</code></pre>
<p>If this does not fix the problem, then you may want to check how all other<br>drivers are requesting the IRQ and report the problem. Note that if at least<br>a single driver does not request the IRQ with the IRQF_SHARED flag (share IRQ),<br>then the request of the IRQ obviously will not succeed for all the drivers.</p>
<ol start="15">
<li>SCSI problem troubleshooting</li>
</ol>
<p>15.1 Problem tracking</p>
<p>Most SCSI problems are due to a non conformant SCSI bus or to buggy<br>devices.  If unfortunately you have SCSI problems, you can check the<br>following things:</p>
<ul>
<li>SCSI bus cables</li>
<li>terminations at both end of the SCSI chain</li>
<li>linux syslog messages (some of them may help you)</li>
</ul>
<p>If you do not find the source of problems, you can configure the<br>driver with no features enabled.</p>
<ul>
<li>only asynchronous data transfers</li>
<li>tagged commands disabled</li>
<li>disconnections not allowed</li>
</ul>
<p>Now, if your SCSI bus is ok, your system have every chance to work<br>with this safe configuration but performances will not be optimal.</p>
<p>If it still fails, then you can send your problem description to<br>appropriate mailing lists or news-groups.  Send me a copy in order to<br>be sure I will receive it.  Obviously, a bug in the driver code is<br>possible.</p>
<pre><code> My email address: Gerard Roudier &lt;groudier@free.fr&gt;
</code></pre>
<p>Allowing disconnections is important if you use several devices on<br>your SCSI bus but often causes problems with buggy devices.<br>Synchronous data transfers increases throughput of fast devices like<br>hard disks.  Good SCSI hard disks with a large cache gain advantage of<br>tagged commands queuing.</p>
<p>Try to enable one feature at a time with control commands.  For example:</p>
<ul>
<li><p>echo “setsync all 25” &gt;/proc/scsi/ncr53c8xx/0<br>Will enable fast synchronous data transfer negotiation for all targets.</p>
</li>
<li><p>echo “setflag 3” &gt;/proc/scsi/ncr53c8xx/0<br>Will reset flags (no_disc) for target 3, and so will allow it to disconnect<br>the SCSI Bus.</p>
</li>
<li><p>echo “settags 3 8” &gt;/proc/scsi/ncr53c8xx/0<br>Will enable tagged command queuing for target 3 if that device supports it.</p>
</li>
</ul>
<p>Once you have found the device and the feature that cause problems, just<br>disable that feature for that device.</p>
<p>15.2 Understanding hardware error reports</p>
<p>When the driver detects an unexpected error condition, it may display a<br>message of the following pattern.</p>
<p>sym53c876-0:1: ERROR (0:48) (1-21-65) (f/95) @ (script 7c0:19000000).<br>sym53c876-0: script cmd = 19000000<br>sym53c876-0: regdump: da 10 80 95 47 0f 01 07 75 01 81 21 80 01 09 00.</p>
<p>Some fields in such a message may help you understand the cause of the<br>problem, as follows:</p>
<p>sym53c876-0:1: ERROR (0:48) (1-21-65) (f/95) @ (script 7c0:19000000).<br>…………A………B.C….D.E..F….G.H…….I…..J…K…….</p>
<p>Field A : target number.<br>  SCSI ID of the device the controller was talking with at the moment the<br>  error occurs.</p>
<p>Field B : DSTAT io register (DMA STATUS)<br>  Bit 0x40 : MDPE Master Data Parity Error<br>             Data parity error detected on the PCI BUS.<br>  Bit 0x20 : BF   Bus Fault<br>             PCI bus fault condition detected<br>  Bit 0x01 : IID  Illegal Instruction Detected<br>             Set by the chip when it detects an Illegal Instruction format<br>             on some condition that makes an instruction illegal.<br>  Bit 0x80 : DFE Dma Fifo Empty<br>             Pure status bit that does not indicate an error.<br>  If the reported DSTAT value contains a combination of MDPE (0x40),<br>  BF (0x20), then the cause may be likely due to a PCI BUS problem.</p>
<p>Field C : SIST io register (SCSI Interrupt Status)<br>  Bit 0x08 : SGE  SCSI GROSS ERROR<br>             Indicates that the chip detected a severe error condition<br>             on the SCSI BUS that prevents the SCSI protocol from functioning<br>             properly.<br>  Bit 0x04 : UDC  Unexpected Disconnection<br>             Indicates that the device released the SCSI BUS when the chip<br>             was not expecting this to happen. A device may behave so to<br>             indicate the SCSI initiator that an error condition not reportable              using the SCSI protocol has occurred.<br>  Bit 0x02 : RST  SCSI BUS Reset<br>             Generally SCSI targets do not reset the SCSI BUS, although any<br>             device on the BUS can reset it at any time.<br>  Bit 0x01 : PAR  Parity<br>             SCSI parity error detected.<br>  On a faulty SCSI BUS, any error condition among SGE (0x08), UDC (0x04) and<br>  PAR (0x01) may be detected by the chip. If your SCSI system sometimes<br>  encounters such error conditions, especially SCSI GROSS ERROR, then a SCSI<br>  BUS problem is likely the cause of these errors.</p>
<p>For fields D,E,F,G and H, you may look into the sym53c8xx_defs.h file<br>that contains some minimal comments on IO register bits.<br>Field D : SOCL  Scsi Output Control Latch<br>          This register reflects the state of the SCSI control lines the<br>          chip want to drive or compare against.<br>Field E : SBCL  Scsi Bus Control Lines<br>          Actual value of control lines on the SCSI BUS.<br>Field F : SBDL  Scsi Bus Data Lines<br>          Actual value of data lines on the SCSI BUS.<br>Field G : SXFER  SCSI Transfer<br>          Contains the setting of the Synchronous Period for output and<br>          the current Synchronous offset (offset 0 means asynchronous).<br>Field H : SCNTL3 Scsi Control Register 3<br>          Contains the setting of timing values for both asynchronous and<br>          synchronous data transfers. </p>
<p>Understanding Fields I, J, K and dumps requires to have good knowledge of<br>SCSI standards, chip cores functionnals and internal driver data structures.<br>You are not required to decode and understand them, unless you want to help<br>maintain the driver code.</p>
<ol start="16">
<li>Synchronous transfer negotiation tables</li>
</ol>
<p>Tables below have been created by calling the routine the driver uses<br>for synchronisation negotiation timing calculation and chip setting.<br>The first table corresponds to Ultra chips 53875 and 53C860 with 80 MHz<br>clock and 5 clock divisors.<br>The second one has been calculated by setting the scsi clock to 40 Mhz<br>and using 4 clock divisors and so applies to all NCR53C8XX chips in fast<br>SCSI-2 mode.</p>
<p>Periods are in nano-seconds and speeds are in Mega-transfers per second.<br>1 Mega-transfers/second means 1 MB/s with 8 bits SCSI and 2 MB/s with<br>Wide16 SCSI.</p>
<p>16.1 Synchronous timings for 53C895, 53C875 and 53C860 SCSI controllers</p>
<hr>
<p> Negotiated                     NCR settings<br> Factor   Period   Speed        Period   Speed</p>
<hr>
<p> 10       25       40.000       25       40.000   (53C895 only)<br> 11       30.2     33.112       31.25    32.000   (53C895 only)<br> 12       50       20.000       50       20.000<br> 13       52       19.230       62       16.000<br> 14       56       17.857       62       16.000<br> 15       60       16.666       62       16.000<br> 16       64       15.625       75       13.333<br> 17       68       14.705       75       13.333<br> 18       72       13.888       75       13.333<br> 19       76       13.157       87       11.428<br> 20       80       12.500       87       11.428<br> 21       84       11.904       87       11.428<br> 22       88       11.363       93       10.666<br> 23       92       10.869       93       10.666<br> 24       96       10.416      100       10.000<br> 25      100       10.000      100       10.000<br> 26      104        9.615      112        8.888<br> 27      108        9.259      112        8.888<br> 28      112        8.928      112        8.888<br> 29      116        8.620      125        8.000<br> 30      120        8.333      125        8.000<br> 31      124        8.064      125        8.000<br> 32      128        7.812      131        7.619<br> 33      132        7.575      150        6.666<br> 34      136        7.352      150        6.666<br> 35      140        7.142      150        6.666<br> 36      144        6.944      150        6.666<br> 37      148        6.756      150        6.666<br> 38      152        6.578      175        5.714<br> 39      156        6.410      175        5.714<br> 40      160        6.250      175        5.714<br> 41      164        6.097      175        5.714<br> 42      168        5.952      175        5.714<br> 43      172        5.813      175        5.714<br> 44      176        5.681      187        5.333<br> 45      180        5.555      187        5.333<br> 46      184        5.434      187        5.333<br> 47      188        5.319      200        5.000<br> 48      192        5.208      200        5.000<br> 49      196        5.102      200        5.000</p>
<p>16.2 Synchronous timings for fast SCSI-2 53C8XX controllers</p>
<hr>
<p> Negotiated                     NCR settings<br> Factor   Period   Speed        Period   Speed</p>
<hr>
<p> 25      100       10.000      100       10.000<br> 26      104        9.615      125        8.000<br> 27      108        9.259      125        8.000<br> 28      112        8.928      125        8.000<br> 29      116        8.620      125        8.000<br> 30      120        8.333      125        8.000<br> 31      124        8.064      125        8.000<br> 32      128        7.812      131        7.619<br> 33      132        7.575      150        6.666<br> 34      136        7.352      150        6.666<br> 35      140        7.142      150        6.666<br> 36      144        6.944      150        6.666<br> 37      148        6.756      150        6.666<br> 38      152        6.578      175        5.714<br> 39      156        6.410      175        5.714<br> 40      160        6.250      175        5.714<br> 41      164        6.097      175        5.714<br> 42      168        5.952      175        5.714<br> 43      172        5.813      175        5.714<br> 44      176        5.681      187        5.333<br> 45      180        5.555      187        5.333<br> 46      184        5.434      187        5.333<br> 47      188        5.319      200        5.000<br> 48      192        5.208      200        5.000<br> 49      196        5.102      200        5.000</p>
<ol start="17">
<li>Serial NVRAM (added by Richard Waltham: <a href="mailto:&#100;&#111;&#x72;&#109;&#111;&#x75;&#x73;&#x65;&#64;&#x66;&#x61;&#114;&#x73;&#x72;&#x6f;&#x62;&#x74;&#x2e;&#100;&#101;&#109;&#x6f;&#x6e;&#x2e;&#x63;&#111;&#x2e;&#x75;&#x6b;">&#100;&#111;&#x72;&#109;&#111;&#x75;&#x73;&#x65;&#64;&#x66;&#x61;&#114;&#x73;&#x72;&#x6f;&#x62;&#x74;&#x2e;&#100;&#101;&#109;&#x6f;&#x6e;&#x2e;&#x63;&#111;&#x2e;&#x75;&#x6b;</a>)</li>
</ol>
<p>17.1 Features</p>
<p>Enabling serial NVRAM support enables detection of the serial NVRAM included<br>on Symbios and some Symbios compatible host adaptors, and Tekram boards. The<br>serial NVRAM is used by Symbios and Tekram to hold set up parameters for the<br>host adaptor and it’s attached drives.</p>
<p>The Symbios NVRAM also holds data on the boot order of host adaptors in a<br>system with more than one host adaptor. This enables the order of scanning<br>the cards for drives to be changed from the default used during host adaptor<br>detection.</p>
<p>This can be done to a limited extent at the moment using “reverse probe” but<br>this only changes the order of detection of different types of cards. The<br>NVRAM boot order settings can do this as well as change the order the same<br>types of cards are scanned in, something “reverse probe” cannot do.</p>
<p>Tekram boards using Symbios chips, DC390W/F/U, which have NVRAM are detected<br>and this is used to distinguish between Symbios compatible and Tekram host<br>adaptors. This is used to disable the Symbios compatible “diff” setting<br>incorrectly set on Tekram boards if the CONFIG_SCSI_53C8XX_SYMBIOS_COMPAT<br>configuration parameter is set enabling both Symbios and Tekram boards to be<br>used together with the Symbios cards using all their features, including<br>“diff” support. (“led pin” support for Symbios compatible cards can remain<br>enabled when using Tekram cards. It does nothing useful for Tekram host<br>adaptors but does not cause problems either.)</p>
<p>17.2 Symbios NVRAM layout</p>
<h2 id="typical-data-at-NVRAM-address-0x100-53c810a-NVRAM"><a href="#typical-data-at-NVRAM-address-0x100-53c810a-NVRAM" class="headerlink" title="typical data at NVRAM address 0x100 (53c810a NVRAM)"></a>typical data at NVRAM address 0x100 (53c810a NVRAM)</h2><p>00 00<br>64 01<br>8e 0b</p>
<p>00 30 00 00 00 00 07 00 00 00 00 00 00 00 07 04 10 04 00 00 </p>
<p>04 00 0f 00 00 10 00 50 00 00 01 00 00 62<br>04 00 03 00 00 10 00 58 00 00 01 00 00 63<br>04 00 01 00 00 10 00 48 00 00 01 00 00 61<br>00 00 00 00 00 00 00 00 00 00 00 00 00 00 </p>
<p>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00 </p>
<p>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00 </p>
<p>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00 </p>
<p>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00 </p>
<p>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00<br>00 00 00 00 00 00 00 00 </p>
<p>fe fe<br>00 00<br>00 00</p>
<hr>
<p>NVRAM layout details</p>
<p>NVRAM Address 0x000-0x0ff not used<br>              0x100-0x26f initialised data<br>              0x270-0x7ff not used</p>
<p>general layout</p>
<pre><code>    header  -   6 bytes,
    data    - 356 bytes (checksum is byte sum of this data)
    trailer -   6 bytes
              ---
    total     368 bytes
</code></pre>
<p>data area layout</p>
<pre><code>    controller set up  -  20 bytes
    boot configuration -  56 bytes (4x14 bytes)
    device set up      - 128 bytes (16x8 bytes)
    unused (spare?)    - 152 bytes (19x8 bytes)
                         ---
    total                356 bytes
</code></pre>
<hr>
<p>header</p>
<p>00 00   - ?? start marker<br>64 01   - byte count (lsb/msb excludes header/trailer)<br>8e 0b   - checksum (lsb/msb excludes header/trailer)</p>
<hr>
<p>controller set up</p>
<p>00 30 00 00 00 00 07 00 00 00 00 00 00 00 07 04 10 04 00 00<br>                   |     |           |     |<br>                   |     |           |      – host ID<br>                   |     |           |<br>                   |     |            –Removable Media Support<br>                   |     |               0x00 = none<br>                   |     |               0x01 = Bootable Device<br>                   |     |               0x02 = All with Media<br>                   |     |<br>                   |      –flag bits 2<br>                   |        0x00000001= scan order hi-&gt;low<br>                   |            (default 0x00 - scan low-&gt;hi)<br>                    –flag bits 1<br>                       0x00000001 scam enable<br>                       0x00000010 parity enable<br>                       0x00000100 verbose boot msgs</p>
<p>remaining bytes unknown - they do not appear to change in my<br>current set up for any of the controllers.</p>
<p>default set up is identical for 53c810a and 53c875 NVRAM<br>(Removable Media added Symbios BIOS version 4.09)</p>
<hr>
<p>boot configuration</p>
<p>boot order set by order of the devices in this table</p>
<p>04 00 0f 00 00 10 00 50 00 00 01 00 00 62 – 1st controller<br>04 00 03 00 00 10 00 58 00 00 01 00 00 63    2nd controller<br>04 00 01 00 00 10 00 48 00 00 01 00 00 61    3rd controller<br>00 00 00 00 00 00 00 00 00 00 00 00 00 00    4th controller<br>       |  |  |  |     |        |     |  |<br>       |  |  |  |     |        |      —- PCI io port adr<br>       |  |  |  |     |         –0x01 init/scan at boot time<br>       |  |  |  |      –PCI device/function number (0xdddddfff)<br>       |  |   —– ?? PCI vendor ID (lsb/msb)<br>        —-PCI device ID (lsb/msb)</p>
<p>?? use of this data is a guess but seems reasonable</p>
<p>remaining bytes unknown - they do not appear to change in my<br>current set up</p>
<h2 id="default-set-up-is-identical-for-53c810a-and-53c875-NVRAM"><a href="#default-set-up-is-identical-for-53c810a-and-53c875-NVRAM" class="headerlink" title="default set up is identical for 53c810a and 53c875 NVRAM"></a>default set up is identical for 53c810a and 53c875 NVRAM</h2><p>device set up (up to 16 devices - includes controller)</p>
<p>0f 00 08 08 64 00 0a 00 - id 0<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00 </p>
<p>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00<br>0f 00 08 08 64 00 0a 00 - id 15<br> |     |  |  |     |  |<br> |     |  |  |      —-timeout (lsb/msb)<br> |     |  |   –synch period (0x?? 40 Mtrans/sec- fast 40) (probably 0x28)<br> |     |  |                  (0x30 20 Mtrans/sec- fast 20)<br> |     |  |                  (0x64 10 Mtrans/sec- fast )<br> |     |  |                  (0xc8  5 Mtrans/sec)<br> |     |  |                  (0x00  asynchronous)<br> |     |   – ?? max sync offset (0x08 in NVRAM on 53c810a)<br> |     |                         (0x10 in NVRAM on 53c875)<br> |      –device bus width (0x08 narrow)<br> |                         (0x10 16 bit wide)<br>  –flag bits<br>    0x00000001 - disconnect enabled<br>    0x00000010 - scan at boot time<br>    0x00000100 - scan luns<br>    0x00001000 - queue tags enabled</p>
<p>remaining bytes unknown - they do not appear to change in my<br>current set up</p>
<p>?? use of this data is a guess but seems reasonable<br>(but it could be max bus width)</p>
<p>default set up for 53c810a NVRAM<br>default set up for 53c875 NVRAM - bus width     - 0x10<br>                                - sync offset ? - 0x10<br>                                - sync period   - 0x30</p>
<hr>
<p>?? spare device space (32 bit bus ??)</p>
<p>00 00 00 00 00 00 00 00  (19x8bytes)<br>.<br>.<br>00 00 00 00 00 00 00 00</p>
<h2 id="default-set-up-is-identical-for-53c810a-and-53c875-NVRAM-1"><a href="#default-set-up-is-identical-for-53c810a-and-53c875-NVRAM-1" class="headerlink" title="default set up is identical for 53c810a and 53c875 NVRAM"></a>default set up is identical for 53c810a and 53c875 NVRAM</h2><p>trailer</p>
<p>fe fe   - ? end marker ?<br>00 00<br>00 00</p>
<h2 id="default-set-up-is-identical-for-53c810a-and-53c875-NVRAM-2"><a href="#default-set-up-is-identical-for-53c810a-and-53c875-NVRAM-2" class="headerlink" title="default set up is identical for 53c810a and 53c875 NVRAM"></a>default set up is identical for 53c810a and 53c875 NVRAM</h2><p>17.3 Tekram NVRAM layout</p>
<p>nvram 64x16 (1024 bit)</p>
<p>Drive settings</p>
<p>Drive ID 0-15 (addr 0x0yyyy0 = device setup, yyyy = ID)<br>              (addr 0x0yyyy1 = 0x0000)</p>
<pre><code>x x x x  x x x x  x x x x  x x x x
           | | |      | |  | | | |
           | | |      | |  | | |  ----- parity check   0 - off
           | | |      | |  | | |                       1 - on
           | | |      | |  | | |
           | | |      | |  | |  ------- sync neg       0 - off
           | | |      | |  | |                         1 - on
           | | |      | |  | |
           | | |      | |  |  --------- disconnect     0 - off
           | | |      | |  |                           1 - on
           | | |      | |  |
           | | |      | |   ----------- start cmd      0 - off
           | | |      | |                              1 - on
           | | |      | |
           | | |      |  -------------- tagged cmds    0 - off
           | | |      |                                1 - on
           | | |      | 
           | | |       ---------------- wide neg       0 - off
           | | |                                       1 - on
           | | |
            --------------------------- sync rate      0 - 10.0 Mtrans/sec
                                                       1 -  8.0
                                                       2 -  6.6
                                                       3 -  5.7
                                                       4 -  5.0
                                                       5 -  4.0
                                                       6 -  3.0
                                                       7 -  2.0
                                                       7 -  2.0
                                                       8 - 20.0
                                                       9 - 16.7
                                                       a - 13.9
                                                       b - 11.9
</code></pre>
<p>Global settings</p>
<p>Host flags 0 (addr 0x100000, 32) </p>
<pre><code>x x x x  x x x x  x x x x  x x x x
| | | |  | | | |           | | | |
| | | |  | | | |            ----------- host ID    0x00 - 0x0f
| | | |  | | | |
| | | |  | | |  ----------------------- support for    0 - off
| | | |  | | |                          &gt; 2 drives     1 - on
| | | |  | | | 
| | | |  | |  ------------------------- support drives 0 - off
| | | |  | |                            &gt; 1Gbytes      1 - on
| | | |  | |
| | | |  |  --------------------------- bus reset on   0 - off
| | | |  |                                power on     1 - on
| | | |  |
| | | |   ----------------------------- active neg     0 - off
| | | |                                                1 - on
| | | |
| | |  -------------------------------- imm seek       0 - off
| | |                                                  1 - on
| | |
| |  ---------------------------------- scan luns      0 - off
| |                                                    1 - on
| |
 -------------------------------------- removable      0 - disable
                                        as BIOS dev    1 - boot device
                                                       2 - all
</code></pre>
<p>Host flags 1 (addr 0x100001, 33)</p>
<pre><code>x x x x  x x x x  x x x x  x x x x
           | | |             | | | 
           | | |              --------- boot delay     0 -   3 sec
           | | |                                       1 -   5
           | | |                                       2 -  10
           | | |                                       3 -  20
           | | |                                       4 -  30
           | | |                                       5 -  60
           | | |                                       6 - 120
           | | |
            --------------------------- max tag cmds   0 -  2
                                                       1 -  4
                                                       2 -  8
                                                       3 - 16
                                                       4 - 32
</code></pre>
<p>Host flags 2 (addr 0x100010, 34)</p>
<pre><code>x x x x  x x x x  x x x x  x x x x
                                 |
                                  ----- F2/F6 enable   0 - off ???
                                                       1 - on  ???
</code></pre>
<p>checksum (addr 0x111111)</p>
<p>checksum = 0x1234 - (sum addr 0-63)</p>
<hr>
<p>default nvram data:</p>
<p>0x0037 0x0000 0x0037 0x0000 0x0037 0x0000 0x0037 0x0000<br>0x0037 0x0000 0x0037 0x0000 0x0037 0x0000 0x0037 0x0000<br>0x0037 0x0000 0x0037 0x0000 0x0037 0x0000 0x0037 0x0000<br>0x0037 0x0000 0x0037 0x0000 0x0037 0x0000 0x0037 0x0000 </p>
<p>0x0f07 0x0400 0x0001 0x0000 0x0000 0x0000 0x0000 0x0000<br>0x0000 0x0000 0x0000 0x0000 0x0000 0x0000 0x0000 0x0000<br>0x0000 0x0000 0x0000 0x0000 0x0000 0x0000 0x0000 0x0000<br>0x0000 0x0000 0x0000 0x0000 0x0000 0x0000 0x0000 0xfbbc</p>
<ol start="18">
<li>Support for Big Endian</li>
</ol>
<p>The PCI local bus has been primarily designed for x86 architecture.<br>As a consequence, PCI devices generally expect DWORDS using little endian<br>byte ordering.</p>
<p>18.1 Big Endian CPU</p>
<p>In order to support NCR chips on a Big Endian architecture the driver has to<br>perform byte reordering each time it is needed. This feature has been<br>added to the driver by Cort <a href="mailto:&#99;&#111;&#x72;&#116;&#64;&#x63;&#x73;&#46;&#110;&#109;&#x74;&#x2e;&#x65;&#x64;&#x75;">&#99;&#111;&#x72;&#116;&#64;&#x63;&#x73;&#46;&#110;&#109;&#x74;&#x2e;&#x65;&#x64;&#x75;</a> and is available in driver<br>version 2.5 and later ones. For the moment Big Endian support has only<br>been tested on Linux/PPC (PowerPC).</p>
<p>18.2 NCR chip in Big Endian mode of operations</p>
<p>It can be read in SYMBIOS documentation that some chips support a special<br>Big Endian mode, on paper: 53C815, 53C825A, 53C875, 53C875N, 53C895.<br>This mode of operations is not software-selectable, but needs pin named<br>BigLit to be pulled-up. Using this mode, most of byte reorderings should<br>be avoided when the driver is running on a Big Endian CPU.<br>Driver version 2.5 is also, in theory, ready for this feature.</p>
<p>===============================================================================<br>End of NCR53C8XX driver README file</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_ncr53c8xx/" title="Kernel-2.6.32-573.12.1.el6_ncr53c8xx" target="_blank" rel="external">http://www.oostech.com/2021/03/13/Kernel-2.6.32-573.12.1.el6_ncr53c8xx/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_proc/" title="Kernel-2.6.32-573.12.1.el6_proc"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_memory-barriers/" title="Kernel-2.6.32-573.12.1.el6_memory-barriers"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>