<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-4.18.0-80.el8_proc | oosTech.com</title>
  <meta name="description" content="T H E  &#x2F;proc   F I L E S Y S T E M   &#x2F;proc&#x2F;sys         Terrehon Bowden &amp;#x74;&amp;#101;&amp;#114;&amp;#x72;&amp;#x65;&amp;#x68;&amp;#x6f;&amp;#x6e;&amp;#x40;&amp;#x70;&amp;#x61;&amp;#x63;&amp;#x62;&amp;#101;&amp;#108;&amp;#x6c;&amp;#x2e;&amp;#x6e;&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-4.18.0-80.el8_proc">
<meta property="og:url" content="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_proc/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="T H E  &#x2F;proc   F I L E S Y S T E M   &#x2F;proc&#x2F;sys         Terrehon Bowden &amp;#x74;&amp;#101;&amp;#114;&amp;#x72;&amp;#x65;&amp;#x68;&amp;#x6f;&amp;#x6e;&amp;#x40;&amp;#x70;&amp;#x61;&amp;#x63;&amp;#x62;&amp;#101;&amp;#108;&amp;#x6c;&amp;#x2e;&amp;#x6e;&amp;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:modified_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_proc/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Table-of-Contents"><span class="toc-number">1.</span> <span class="toc-text">Table of Contents</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Preface"><span class="toc-number">2.</span> <span class="toc-text">Preface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0-1-Introduction-Credits"><span class="toc-number">3.</span> <span class="toc-text">0.1 Introduction&#x2F;Credits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0-2-Legal-Stuff"><span class="toc-number">4.</span> <span class="toc-text">0.2 Legal Stuff</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CHAPTER-1-COLLECTING-SYSTEM-INFORMATION"><span class="toc-number">5.</span> <span class="toc-text">CHAPTER 1: COLLECTING SYSTEM INFORMATION</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#In-This-Chapter"><span class="toc-number">6.</span> <span class="toc-text">In This Chapter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Process-Specific-Subdirectories"><span class="toc-number">7.</span> <span class="toc-text">1.1 Process-Specific Subdirectories</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Kernel-data"><span class="toc-number">8.</span> <span class="toc-text">1.2 Kernel data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-IDE-devices-in-proc-ide"><span class="toc-number">9.</span> <span class="toc-text">1.3 IDE devices in &#x2F;proc&#x2F;ide</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cat-proc-ide-ide0-hda-settings"><span class="toc-number"></span> <span class="toc-text">cat &#x2F;proc&#x2F;ide&#x2F;ide0&#x2F;hda&#x2F;settings</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-Networking-info-in-proc-net"><span class="toc-number">1.</span> <span class="toc-text">1.4 Networking info in &#x2F;proc&#x2F;net</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-SCSI-info"><span class="toc-number">2.</span> <span class="toc-text">1.5 SCSI info</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-Parallel-port-info-in-proc-parport"><span class="toc-number">3.</span> <span class="toc-text">1.6 Parallel port info in &#x2F;proc&#x2F;parport</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-TTY-info-in-proc-tty"><span class="toc-number">4.</span> <span class="toc-text">1.7 TTY info in &#x2F;proc&#x2F;tty</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-Miscellaneous-kernel-statistics-in-proc-stat"><span class="toc-number">5.</span> <span class="toc-text">1.8 Miscellaneous kernel statistics in &#x2F;proc&#x2F;stat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-Ext4-file-system-parameters"><span class="toc-number">6.</span> <span class="toc-text">1.9 Ext4 file system parameters</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-0-proc-consoles"><span class="toc-number">7.</span> <span class="toc-text">2.0 &#x2F;proc&#x2F;consoles</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">8.</span> <span class="toc-text">Summary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CHAPTER-2-MODIFYING-SYSTEM-PARAMETERS"><span class="toc-number">9.</span> <span class="toc-text">CHAPTER 2: MODIFYING SYSTEM PARAMETERS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#In-This-Chapter-1"><span class="toc-number">10.</span> <span class="toc-text">In This Chapter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary-1"><span class="toc-number">11.</span> <span class="toc-text">Summary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CHAPTER-3-PER-PROCESS-PARAMETERS"><span class="toc-number">12.</span> <span class="toc-text">CHAPTER 3: PER-PROCESS PARAMETERS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-proc-oom-adj-amp-proc-oom-score-adj-Adjust-the-oom-killer-score"><span class="toc-number">13.</span> <span class="toc-text">3.1 &#x2F;proc&#x2F;&#x2F;oom_adj &amp; &#x2F;proc&#x2F;&#x2F;oom_score_adj- Adjust the oom-killer score</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-proc-oom-score-Display-current-oom-killer-score"><span class="toc-number">14.</span> <span class="toc-text">3.2 &#x2F;proc&#x2F;&#x2F;oom_score - Display current oom-killer score</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-proc-io-Display-the-IO-accounting-fields"><span class="toc-number">15.</span> <span class="toc-text">3.3  &#x2F;proc&#x2F;&#x2F;io - Display the IO accounting fields</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Example"><span class="toc-number">16.</span> <span class="toc-text">Example</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Description"><span class="toc-number">17.</span> <span class="toc-text">Description</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rchar"><span class="toc-number">18.</span> <span class="toc-text">rchar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wchar"><span class="toc-number">19.</span> <span class="toc-text">wchar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#syscr"><span class="toc-number">20.</span> <span class="toc-text">syscr</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#syscw"><span class="toc-number">21.</span> <span class="toc-text">syscw</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#read-bytes"><span class="toc-number">22.</span> <span class="toc-text">read_bytes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#write-bytes"><span class="toc-number">23.</span> <span class="toc-text">write_bytes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cancelled-write-bytes"><span class="toc-number">24.</span> <span class="toc-text">cancelled_write_bytes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Note"><span class="toc-number">25.</span> <span class="toc-text">Note</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-proc-coredump-filter-Core-dump-filtering-settings"><span class="toc-number">26.</span> <span class="toc-text">3.4 &#x2F;proc&#x2F;&#x2F;coredump_filter - Core dump filtering settings</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-proc-mountinfo-Information-about-mounts"><span class="toc-number">27.</span> <span class="toc-text">3.5    &#x2F;proc&#x2F;&#x2F;mountinfo - Information about mounts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-proc-comm-amp-proc-task-comm"><span class="toc-number">28.</span> <span class="toc-text">3.6    &#x2F;proc&#x2F;&#x2F;comm  &amp; &#x2F;proc&#x2F;&#x2F;task&#x2F;&#x2F;comm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-proc-task-children-Information-about-task-children"><span class="toc-number">29.</span> <span class="toc-text">3.7    &#x2F;proc&#x2F;&#x2F;task&#x2F;&#x2F;children - Information about task children</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-proc-fdinfo-Information-about-opened-file"><span class="toc-number">30.</span> <span class="toc-text">3.8    &#x2F;proc&#x2F;&#x2F;fdinfo&#x2F; - Information about opened file</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-proc-map-files-Information-about-memory-mapped-files"><span class="toc-number">31.</span> <span class="toc-text">3.9    &#x2F;proc&#x2F;&#x2F;map_files - Information about memory mapped files</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-10-proc-timerslack-ns-Task-timerslack-value"><span class="toc-number">32.</span> <span class="toc-text">3.10    &#x2F;proc&#x2F;&#x2F;timerslack_ns - Task timerslack value</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-11-proc-patch-state-Livepatch-patch-operation-state"><span class="toc-number">33.</span> <span class="toc-text">3.11    &#x2F;proc&#x2F;&#x2F;patch_state - Livepatch patch operation state</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configuring-procfs"><span class="toc-number">34.</span> <span class="toc-text">Configuring procfs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Mount-options"><span class="toc-number">35.</span> <span class="toc-text">4.1    Mount options</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-4.18.0-80.el8_proc" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-4.18.0-80.el8_proc
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_proc/" class="article-date">
	 published: <time datetime="2021-02-18T16:00:00.000Z" itemprop="datePublished">2021-02-19</time>
	</a>
</span>

        
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_proc/" class="article-date">
	   updated: <time datetime="2021-02-18T16:00:00.000Z" itemprop="dateUpdated">2021-02-19</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/02/19/Kernel-4.18.0-80.el8_proc/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <hr>
<pre><code>                   T H E  /proc   F I L E S Y S T E M
</code></pre>
<hr>
<p>/proc/sys         Terrehon Bowden <a href="mailto:&#x74;&#101;&#114;&#x72;&#x65;&#x68;&#x6f;&#x6e;&#x40;&#x70;&#x61;&#x63;&#x62;&#101;&#108;&#x6c;&#x2e;&#x6e;&#101;&#116;">&#x74;&#101;&#114;&#x72;&#x65;&#x68;&#x6f;&#x6e;&#x40;&#x70;&#x61;&#x63;&#x62;&#101;&#108;&#x6c;&#x2e;&#x6e;&#101;&#116;</a>        October 7 1999<br>                  Bodo Bauer <a href="mailto:&#98;&#98;&#x40;&#x72;&#105;&#x63;&#111;&#x63;&#104;&#101;&#x74;&#46;&#110;&#101;&#x74;">&#98;&#98;&#x40;&#x72;&#105;&#x63;&#111;&#x63;&#104;&#101;&#x74;&#46;&#110;&#101;&#x74;</a></p>
<p>2.4.x update      Jorge Nerin <a href="mailto:&#x63;&#111;&#109;&#x61;&#x6e;&#x64;&#x61;&#110;&#x74;&#x65;&#64;&#x7a;&#x61;&#114;&#97;&#108;&#x69;&#110;&#117;&#x78;&#46;&#x63;&#x6f;&#x6d;">&#x63;&#111;&#109;&#x61;&#x6e;&#x64;&#x61;&#110;&#x74;&#x65;&#64;&#x7a;&#x61;&#114;&#97;&#108;&#x69;&#110;&#117;&#x78;&#46;&#x63;&#x6f;&#x6d;</a>      November 14 2000<br>move /proc/sys      Shen Feng <a href="mailto:&#115;&#104;&#x65;&#x6e;&#x40;&#x63;&#110;&#x2e;&#102;&#117;&#106;&#105;&#x74;&#x73;&#x75;&#46;&#99;&#111;&#109;">&#115;&#104;&#x65;&#x6e;&#x40;&#x63;&#110;&#x2e;&#102;&#117;&#106;&#105;&#x74;&#x73;&#x75;&#46;&#99;&#111;&#109;</a>          April 1 2009</p>
<hr>
<p>Version 1.3                                              Kernel version 2.2.12<br>                          Kernel version 2.4.0-test11-pre4</p>
<hr>
<p>fixes/update part 1.1  Stefani Seibold <a href="mailto:&#x73;&#x74;&#x65;&#x66;&#97;&#x6e;&#x69;&#64;&#x73;&#101;&#105;&#x62;&#111;&#x6c;&#x64;&#x2e;&#110;&#x65;&#x74;">&#x73;&#x74;&#x65;&#x66;&#97;&#x6e;&#x69;&#64;&#x73;&#101;&#105;&#x62;&#111;&#x6c;&#x64;&#x2e;&#110;&#x65;&#x74;</a>       June 9 2009</p>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><p>  0     Preface<br>  0.1    Introduction/Credits<br>  0.2    Legal Stuff</p>
<p>  1    Collecting System Information<br>  1.1    Process-Specific Subdirectories<br>  1.2    Kernel data<br>  1.3    IDE devices in /proc/ide<br>  1.4    Networking info in /proc/net<br>  1.5    SCSI info<br>  1.6    Parallel port info in /proc/parport<br>  1.7    TTY info in /proc/tty<br>  1.8    Miscellaneous kernel statistics in /proc/stat<br>  1.9    Ext4 file system parameters</p>
<p>  2    Modifying System Parameters</p>
<p>  3    Per-Process Parameters<br>  3.1    /proc/<pid>/oom_adj &amp; /proc/<pid>/oom_score_adj - Adjust the oom-killer<br>                                score<br>  3.2    /proc/<pid>/oom_score - Display current oom-killer score<br>  3.3    /proc/<pid>/io - Display the IO accounting fields<br>  3.4    /proc/<pid>/coredump_filter - Core dump filtering settings<br>  3.5    /proc/<pid>/mountinfo - Information about mounts<br>  3.6    /proc/<pid>/comm  &amp; /proc/<pid>/task/<tid>/comm<br>  3.7   /proc/<pid>/task/<tid>/children - Information about task children<br>  3.8   /proc/<pid>/fdinfo/<fd> - Information about opened file<br>  3.9   /proc/<pid>/map_files - Information about memory mapped files<br>  3.10  /proc/<pid>/timerslack_ns - Task timerslack value<br>  3.11    /proc/<pid>/patch_state - Livepatch patch operation state</p>
<p>  4    Configuring procfs<br>  4.1    Mount options</p>
<hr>
<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><h2 id="0-1-Introduction-Credits"><a href="#0-1-Introduction-Credits" class="headerlink" title="0.1 Introduction/Credits"></a>0.1 Introduction/Credits</h2><p>This documentation is  part of a soon (or  so we hope) to be  released book on<br>the SuSE  Linux distribution. As  there is  no complete documentation  for the<br>/proc file system and we’ve used  many freely available sources to write these<br>chapters, it  seems only fair  to give the work  back to the  Linux community.<br>This work is  based on the 2.2.*  kernel version and the  upcoming 2.4.*. I’m<br>afraid it’s still far from complete, but we  hope it will be useful. As far as<br>we know, it is the first ‘all-in-one’ document about the /proc file system. It<br>is focused  on the Intel  x86 hardware,  so if you  are looking for  PPC, ARM,<br>SPARC, AXP, etc., features, you probably  won’t find what you are looking for.<br>It also only covers IPv4 networking, not IPv6 nor other protocols - sorry. But<br>additions and patches  are welcome and will  be added to this  document if you<br>mail them to Bodo.</p>
<p>We’d like  to  thank Alan Cox, Rik van Riel, and Alexey Kuznetsov and a lot of<br>other people for help compiling this documentation. We’d also like to extend a<br>special thank  you to Andi Kleen for documentation, which we relied on heavily<br>to create  this  document,  as well as the additional information he provided.<br>Thanks to  everybody  else  who contributed source or docs to the Linux kernel<br>and helped create a great piece of software… :)</p>
<p>If you  have  any comments, corrections or additions, please don’t hesitate to<br>contact Bodo  Bauer  at  <a href="mailto:&#98;&#98;&#64;&#114;&#105;&#x63;&#111;&#99;&#104;&#101;&#x74;&#46;&#x6e;&#x65;&#116;">&#98;&#98;&#64;&#114;&#105;&#x63;&#111;&#99;&#104;&#101;&#x74;&#46;&#x6e;&#x65;&#116;</a>.  We’ll  be happy to add them to this<br>document.</p>
<p>The   latest   version    of   this   document   is    available   online   at<br><a target="_blank" rel="noopener" href="http://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html">http://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html</a></p>
<p>If  the above  direction does  not works  for you,  you could  try the  kernel<br>mailing  list  at  <a href="mailto:&#x6c;&#105;&#110;&#x75;&#120;&#45;&#107;&#101;&#x72;&#110;&#101;&#x6c;&#64;&#x76;&#x67;&#x65;&#x72;&#x2e;&#x6b;&#101;&#x72;&#110;&#x65;&#108;&#x2e;&#x6f;&#114;&#103;">&#x6c;&#105;&#110;&#x75;&#120;&#45;&#107;&#101;&#x72;&#110;&#101;&#x6c;&#64;&#x76;&#x67;&#x65;&#x72;&#x2e;&#x6b;&#101;&#x72;&#110;&#x65;&#108;&#x2e;&#x6f;&#114;&#103;</a>  and/or try  to  reach  me  at<br><a href="mailto:&#99;&#111;&#109;&#x61;&#110;&#x64;&#x61;&#x6e;&#x74;&#x65;&#x40;&#122;&#97;&#114;&#x61;&#x6c;&#105;&#110;&#x75;&#120;&#46;&#x63;&#x6f;&#x6d;">&#99;&#111;&#109;&#x61;&#110;&#x64;&#x61;&#x6e;&#x74;&#x65;&#x40;&#122;&#97;&#114;&#x61;&#x6c;&#105;&#110;&#x75;&#120;&#46;&#x63;&#x6f;&#x6d;</a>.</p>
<h2 id="0-2-Legal-Stuff"><a href="#0-2-Legal-Stuff" class="headerlink" title="0.2 Legal Stuff"></a>0.2 Legal Stuff</h2><p>We don’t  guarantee  the  correctness  of this document, and if you come to us<br>complaining about  how  you  screwed  up  your  system  because  of  incorrect<br>documentation, we won’t feel responsible…</p>
<hr>
<h2 id="CHAPTER-1-COLLECTING-SYSTEM-INFORMATION"><a href="#CHAPTER-1-COLLECTING-SYSTEM-INFORMATION" class="headerlink" title="CHAPTER 1: COLLECTING SYSTEM INFORMATION"></a>CHAPTER 1: COLLECTING SYSTEM INFORMATION</h2><hr>
<h2 id="In-This-Chapter"><a href="#In-This-Chapter" class="headerlink" title="In This Chapter"></a>In This Chapter</h2><ul>
<li>Investigating  the  properties  of  the  pseudo  file  system  /proc and its<br>ability to provide information on the running Linux system</li>
<li>Examining /proc’s structure</li>
<li>Uncovering  various  information  about the kernel and the processes running<br>on the system</li>
</ul>
<hr>
<p>The proc  file  system acts as an interface to internal data structures in the<br>kernel. It  can  be  used to obtain information about the system and to change<br>certain kernel parameters at runtime (sysctl).</p>
<p>First, we’ll  take  a  look  at the read-only parts of /proc. In Chapter 2, we<br>show you how you can use /proc/sys to change settings.</p>
<h2 id="1-1-Process-Specific-Subdirectories"><a href="#1-1-Process-Specific-Subdirectories" class="headerlink" title="1.1 Process-Specific Subdirectories"></a>1.1 Process-Specific Subdirectories</h2><p>The directory  /proc  contains  (among other things) one subdirectory for each<br>process running on the system, which is named after the process ID (PID).</p>
<p>The link  self  points  to  the  process reading the file system. Each process<br>subdirectory has the entries listed in Table 1-1.</p>
<p>Table 1-1: Process specific entries in /proc<br>……………………………………………………………………<br> File        Content<br> clear_refs    Clears page referenced bits shown in smaps output<br> cmdline    Command line arguments<br> cpu        Current and last cpu in which it was executed    (2.4)(smp)<br> cwd        Link to the current working directory<br> environ    Values of environment variables<br> exe        Link to the executable of this process<br> fd        Directory, which contains all file descriptors<br> maps        Memory maps to executables and library files    (2.4)<br> mem        Memory held by this process<br> root        Link to the root directory of this process<br> stat        Process status<br> statm        Process memory status information<br> status        Process status in human readable form<br> wchan        Present with CONFIG_KALLSYMS=y: it shows the kernel function<br>        symbol the task is blocked in - or “0” if not blocked.<br> pagemap    Page table<br> stack        Report full stack trace, enable via CONFIG_STACKTRACE<br> smaps        an extension based on maps, showing the memory consumption of<br>        each mapping and flags associated with it<br> numa_maps    an extension based on maps, showing the memory locality and<br>        binding policy as well as mem usage (in pages) of each mapping.<br>……………………………………………………………………</p>
<p>For example, to get the status information of a process, all you have to do is<br>read the file /proc/PID/status:</p>
<blockquote>
<p>cat /proc/self/status<br>  Name:   cat<br>  State:  R (running)<br>  Tgid:   5452<br>  Pid:    5452<br>  PPid:   743<br>  TracerPid:      0                        (2.4)<br>  Uid:    501     501     501     501<br>  Gid:    100     100     100     100<br>  FDSize: 256<br>  Groups: 100 14 16<br>  VmPeak:     5004 kB<br>  VmSize:     5004 kB<br>  VmLck:         0 kB<br>  VmHWM:       476 kB<br>  VmRSS:       476 kB<br>  RssAnon:             352 kB<br>  RssFile:             120 kB<br>  RssShmem:              4 kB<br>  VmData:      156 kB<br>  VmStk:        88 kB<br>  VmExe:        68 kB<br>  VmLib:      1412 kB<br>  VmPTE:        20 kb<br>  VmSwap:        0 kB<br>  HugetlbPages:          0 kB<br>  CoreDumping:    0<br>  Threads:        1<br>  SigQ:   0/28578<br>  SigPnd: 0000000000000000<br>  ShdPnd: 0000000000000000<br>  SigBlk: 0000000000000000<br>  SigIgn: 0000000000000000<br>  SigCgt: 0000000000000000<br>  CapInh: 00000000fffffeff<br>  CapPrm: 0000000000000000<br>  CapEff: 0000000000000000<br>  CapBnd: ffffffffffffffff<br>  NoNewPrivs:     0<br>  Seccomp:        0<br>  voluntary_ctxt_switches:        0<br>  nonvoluntary_ctxt_switches:     1</p>
</blockquote>
<p>This shows you nearly the same information you would get if you viewed it with<br>the ps  command.  In  fact,  ps  uses  the  proc  file  system  to  obtain its<br>information.  But you get a more detailed  view of the  process by reading the<br>file /proc/PID/status. It fields are described in table 1-2.</p>
<p>The  statm  file  contains  more  detailed  information about the process<br>memory usage. Its seven fields are explained in Table 1-3.  The stat file<br>contains details information about the process itself.  Its fields are<br>explained in Table 1-4.</p>
<p>(for SMP CONFIG users)<br>For making accounting scalable, RSS related information are handled in an<br>asynchronous manner and the value may not be very precise. To see a precise<br>snapshot of a moment, you can see /proc/<pid>/smaps file and scan page table.<br>It’s slow but very precise.</p>
<p>Table 1-2: Contents of the status files (as of 4.8)<br>……………………………………………………………………<br> Field                       Content<br> Name                        filename of the executable<br> Umask                       file mode creation mask<br> State                       state (R is running, S is sleeping, D is sleeping<br>                             in an uninterruptible wait, Z is zombie,<br>                 T is traced or stopped)<br> Tgid                        thread group ID<br> Ngid                        NUMA group ID (0 if none)<br> Pid                         process id<br> PPid                        process id of the parent process<br> TracerPid                   PID of process tracing this process (0 if not)<br> Uid                         Real, effective, saved set, and  file system UIDs<br> Gid                         Real, effective, saved set, and  file system GIDs<br> FDSize                      number of file descriptor slots currently allocated<br> Groups                      supplementary group list<br> NStgid                      descendant namespace thread group ID hierarchy<br> NSpid                       descendant namespace process ID hierarchy<br> NSpgid                      descendant namespace process group ID hierarchy<br> NSsid                       descendant namespace session ID hierarchy<br> VmPeak                      peak virtual memory size<br> VmSize                      total program size<br> VmLck                       locked memory size<br> VmPin                       pinned memory size<br> VmHWM                       peak resident set size (“high water mark”)<br> VmRSS                       size of memory portions. It contains the three<br>                             following parts (VmRSS = RssAnon + RssFile + RssShmem)<br> RssAnon                     size of resident anonymous memory<br> RssFile                     size of resident file mappings<br> RssShmem                    size of resident shmem memory (includes SysV shm,<br>                             mapping of tmpfs and shared anonymous mappings)<br> VmData                      size of private data segments<br> VmStk                       size of stack segments<br> VmExe                       size of text segment<br> VmLib                       size of shared library code<br> VmPTE                       size of page table entries<br> VmSwap                      amount of swap used by anonymous private data<br>                             (shmem swap usage is not included)<br> HugetlbPages                size of hugetlb memory portions<br> CoreDumping                 process’s memory is currently being dumped<br>                             (killing the process may lead to a corrupted core)<br> Threads                     number of threads<br> SigQ                        number of signals queued/max. number for queue<br> SigPnd                      bitmap of pending signals for the thread<br> ShdPnd                      bitmap of shared pending signals for the process<br> SigBlk                      bitmap of blocked signals<br> SigIgn                      bitmap of ignored signals<br> SigCgt                      bitmap of caught signals<br> CapInh                      bitmap of inheritable capabilities<br> CapPrm                      bitmap of permitted capabilities<br> CapEff                      bitmap of effective capabilities<br> CapBnd                      bitmap of capabilities bounding set<br> NoNewPrivs                  no_new_privs, like prctl(PR_GET_NO_NEW_PRIV, …)<br> Seccomp                     seccomp mode, like prctl(PR_GET_SECCOMP, …)<br> Cpus_allowed                mask of CPUs on which this process may run<br> Cpus_allowed_list           Same as previous, but in “list format”<br> Mems_allowed                mask of memory nodes allowed to this process<br> Mems_allowed_list           Same as previous, but in “list format”<br> voluntary_ctxt_switches     number of voluntary context switches<br> nonvoluntary_ctxt_switches  number of non voluntary context switches<br>……………………………………………………………………</p>
<p>Table 1-3: Contents of the statm files (as of 2.6.8-rc3)<br>……………………………………………………………………<br> Field    Content<br> size     total program size (pages)        (same as VmSize in status)<br> resident size of memory portions (pages)    (same as VmRSS in status)<br> shared   number of pages that are shared    (i.e. backed by a file, same<br>                        as RssFile+RssShmem in status)<br> trs      number of pages that are ‘code’    (not including libs; broken,<br>                            includes data segment)<br> lrs      number of pages of library        (always 0 on 2.6)<br> drs      number of pages of data/stack        (including libs; broken,<br>                            includes library text)<br> dt       number of dirty pages            (always 0 on 2.6)<br>……………………………………………………………………</p>
<p>Table 1-4: Contents of the stat files (as of 2.6.30-rc7)<br>……………………………………………………………………<br> Field          Content<br>  pid           process id<br>  tcomm         filename of the executable<br>  state         state (R is running, S is sleeping, D is sleeping in an<br>                uninterruptible wait, Z is zombie, T is traced or stopped)<br>  ppid          process id of the parent process<br>  pgrp          pgrp of the process<br>  sid           session id<br>  tty_nr        tty the process uses<br>  tty_pgrp      pgrp of the tty<br>  flags         task flags<br>  min_flt       number of minor faults<br>  cmin_flt      number of minor faults with child’s<br>  maj_flt       number of major faults<br>  cmaj_flt      number of major faults with child’s<br>  utime         user mode jiffies<br>  stime         kernel mode jiffies<br>  cutime        user mode jiffies with child’s<br>  cstime        kernel mode jiffies with child’s<br>  priority      priority level<br>  nice          nice level<br>  num_threads   number of threads<br>  it_real_value    (obsolete, always 0)<br>  start_time    time the process started after system boot<br>  vsize         virtual memory size<br>  rss           resident set memory size<br>  rsslim        current limit in bytes on the rss<br>  start_code    address above which program text can run<br>  end_code      address below which program text can run<br>  start_stack   address of the start of the main process stack<br>  esp           current value of ESP<br>  eip           current value of EIP<br>  pending       bitmap of pending signals<br>  blocked       bitmap of blocked signals<br>  sigign        bitmap of ignored signals<br>  sigcatch      bitmap of caught signals<br>  0        (place holder, used to be the wchan address, use /proc/PID/wchan instead)<br>  0             (place holder)<br>  0             (place holder)<br>  exit_signal   signal to send to parent thread on exit<br>  task_cpu      which CPU the task is scheduled on<br>  rt_priority   realtime priority<br>  policy        scheduling policy (man sched_setscheduler)<br>  blkio_ticks   time spent waiting for block IO<br>  gtime         guest time of the task in jiffies<br>  cgtime        guest time of the task children in jiffies<br>  start_data    address above which program data+bss is placed<br>  end_data      address below which program data+bss is placed<br>  start_brk     address above which program heap can be expanded with brk()<br>  arg_start     address above which program command line is placed<br>  arg_end       address below which program command line is placed<br>  env_start     address above which program environment is placed<br>  env_end       address below which program environment is placed<br>  exit_code     the thread’s exit_code in the form reported by the waitpid system call<br>……………………………………………………………………</p>
<p>The /proc/PID/maps file containing the currently mapped memory regions and<br>their access permissions.</p>
<p>The format is:</p>
<p>address           perms offset  dev   inode      pathname</p>
<p>08048000-08049000 r-xp 00000000 03:00 8312       /opt/test<br>08049000-0804a000 rw-p 00001000 03:00 8312       /opt/test<br>0804a000-0806b000 rw-p 00000000 00:00 0          [heap]<br>a7cb1000-a7cb2000 —p 00000000 00:00 0<br>a7cb2000-a7eb2000 rw-p 00000000 00:00 0<br>a7eb2000-a7eb3000 —p 00000000 00:00 0<br>a7eb3000-a7ed5000 rw-p 00000000 00:00 0<br>a7ed5000-a8008000 r-xp 00000000 03:00 4222       /lib/libc.so.6<br>a8008000-a800a000 r–p 00133000 03:00 4222       /lib/libc.so.6<br>a800a000-a800b000 rw-p 00135000 03:00 4222       /lib/libc.so.6<br>a800b000-a800e000 rw-p 00000000 00:00 0<br>a800e000-a8022000 r-xp 00000000 03:00 14462      /lib/libpthread.so.0<br>a8022000-a8023000 r–p 00013000 03:00 14462      /lib/libpthread.so.0<br>a8023000-a8024000 rw-p 00014000 03:00 14462      /lib/libpthread.so.0<br>a8024000-a8027000 rw-p 00000000 00:00 0<br>a8027000-a8043000 r-xp 00000000 03:00 8317       /lib/ld-linux.so.2<br>a8043000-a8044000 r–p 0001b000 03:00 8317       /lib/ld-linux.so.2<br>a8044000-a8045000 rw-p 0001c000 03:00 8317       /lib/ld-linux.so.2<br>aff35000-aff4a000 rw-p 00000000 00:00 0          [stack]<br>ffffe000-fffff000 r-xp 00000000 00:00 0          [vdso]</p>
<p>where “address” is the address space in the process that it occupies, “perms”<br>is a set of permissions:</p>
<p> r = read<br> w = write<br> x = execute<br> s = shared<br> p = private (copy on write)</p>
<p>“offset” is the offset into the mapping, “dev” is the device (major:minor), and<br>“inode” is the inode  on that device.  0 indicates that  no inode is associated<br>with the memory region, as the case would be with BSS (uninitialized data).<br>The “pathname” shows the name associated file for this mapping.  If the mapping<br>is not associated with a file:</p>
<p> [heap]                   = the heap of the program<br> [stack]                  = the stack of the main process<br> [vdso]                   = the “virtual dynamic shared object”,<br>                            the kernel system call handler</p>
<p> or if empty, the mapping is anonymous.</p>
<p>The /proc/PID/smaps is an extension based on maps, showing the memory<br>consumption for each of the process’s mappings. For each of mappings there<br>is a series of lines such as the following:</p>
<p>08048000-080bc000 r-xp 00000000 03:02 13130      /bin/bash<br>Size:               1084 kB<br>Rss:                 892 kB<br>Pss:                 374 kB<br>Shared_Clean:        892 kB<br>Shared_Dirty:          0 kB<br>Private_Clean:         0 kB<br>Private_Dirty:         0 kB<br>Referenced:          892 kB<br>Anonymous:             0 kB<br>LazyFree:              0 kB<br>AnonHugePages:         0 kB<br>ShmemPmdMapped:        0 kB<br>Shared_Hugetlb:        0 kB<br>Private_Hugetlb:       0 kB<br>Swap:                  0 kB<br>SwapPss:               0 kB<br>KernelPageSize:        4 kB<br>MMUPageSize:           4 kB<br>Locked:                0 kB<br>VmFlags: rd ex mr mw me dw</p>
<p>the first of these lines shows the same information as is displayed for the<br>mapping in /proc/PID/maps.  The remaining lines show the size of the mapping<br>(size), the amount of the mapping that is currently resident in RAM (RSS), the<br>process’ proportional share of this mapping (PSS), the number of clean and<br>dirty private pages in the mapping.</p>
<p>The “proportional set size” (PSS) of a process is the count of pages it has<br>in memory, where each page is divided by the number of processes sharing it.<br>So if a process has 1000 pages all to itself, and 1000 shared with one other<br>process, its PSS will be 1500.<br>Note that even a page which is part of a MAP_SHARED mapping, but has only<br>a single pte mapped, i.e.  is currently used by only one process, is accounted<br>as private and not as shared.<br>“Referenced” indicates the amount of memory currently marked as referenced or<br>accessed.<br>“Anonymous” shows the amount of memory that does not belong to any file.  Even<br>a mapping associated with a file may contain anonymous pages: when MAP_PRIVATE<br>and a page is modified, the file page is replaced by a private anonymous copy.<br>“LazyFree” shows the amount of memory which is marked by madvise(MADV_FREE).<br>The memory isn’t freed immediately with madvise(). It’s freed in memory<br>pressure if the memory is clean. Please note that the printed value might<br>be lower than the real value due to optimizations used in the current<br>implementation. If this is not desirable please file a bug report.<br>“AnonHugePages” shows the ammount of memory backed by transparent hugepage.<br>“ShmemPmdMapped” shows the ammount of shared (shmem/tmpfs) memory backed by<br>huge pages.<br>“Shared_Hugetlb” and “Private_Hugetlb” show the ammounts of memory backed by<br>hugetlbfs page which is <em>not</em> counted in “RSS” or “PSS” field for historical<br>reasons. And these are not included in {Shared,Private}_{Clean,Dirty} field.<br>“Swap” shows how much would-be-anonymous memory is also used, but out on swap.<br>For shmem mappings, “Swap” includes also the size of the mapped (and not<br>replaced by copy-on-write) part of the underlying shmem object out on swap.<br>“SwapPss” shows proportional swap share of this mapping. Unlike “Swap”, this<br>does not take into account swapped out page of underlying shmem objects.<br>“Locked” indicates whether the mapping is locked in memory or not.</p>
<p>“VmFlags” field deserves a separate description. This member represents the kernel<br>flags associated with the particular virtual memory area in two letter encoded<br>manner. The codes are the following:<br>    rd  - readable<br>    wr  - writeable<br>    ex  - executable<br>    sh  - shared<br>    mr  - may read<br>    mw  - may write<br>    me  - may execute<br>    ms  - may share<br>    gd  - stack segment growns down<br>    pf  - pure PFN range<br>    dw  - disabled write to the mapped file<br>    lo  - pages are locked in memory<br>    io  - memory mapped I/O area<br>    sr  - sequential read advise provided<br>    rr  - random read advise provided<br>    dc  - do not copy area on fork<br>    de  - do not expand area on remapping<br>    ac  - area is accountable<br>    nr  - swap space is not reserved for the area<br>    ht  - area uses huge tlb pages<br>    ar  - architecture specific flag<br>    dd  - do not include area into core dump<br>    sd  - soft-dirty flag<br>    mm  - mixed map area<br>    hg  - huge page advise flag<br>    nh  - no-huge page advise flag<br>    mg  - mergable advise flag</p>
<p>Note that there is no guarantee that every flag and associated mnemonic will<br>be present in all further kernel releases. Things get changed, the flags may<br>be vanished or the reverse – new added.</p>
<p>This file is only present if the CONFIG_MMU kernel configuration option is<br>enabled.</p>
<p>Note: reading /proc/PID/maps or /proc/PID/smaps is inherently racy (consistent<br>output can be achieved only in the single read call).<br>This typically manifests when doing partial reads of these files while the<br>memory map is being modified.  Despite the races, we do provide the following<br>guarantees:</p>
<ol>
<li>The mapped addresses never go backwards, which implies no two<br>regions will ever overlap.</li>
<li>If there is something at a given vaddr during the entirety of the<br>life of the smaps/maps walk, there will be some output for it.</li>
</ol>
<p>The /proc/PID/clear_refs is used to reset the PG_Referenced and ACCESSED/YOUNG<br>bits on both physical and virtual pages associated with a process, and the<br>soft-dirty bit on pte (see Documentation/admin-guide/mm/soft-dirty.rst<br>for details).<br>To clear the bits for all the pages associated with the process<br>    &gt; echo 1 &gt; /proc/PID/clear_refs</p>
<p>To clear the bits for the anonymous pages associated with the process<br>    &gt; echo 2 &gt; /proc/PID/clear_refs</p>
<p>To clear the bits for the file mapped pages associated with the process<br>    &gt; echo 3 &gt; /proc/PID/clear_refs</p>
<p>To clear the soft-dirty bit<br>    &gt; echo 4 &gt; /proc/PID/clear_refs</p>
<p>To reset the peak resident set size (“high water mark”) to the process’s<br>current value:<br>    &gt; echo 5 &gt; /proc/PID/clear_refs</p>
<p>Any other value written to /proc/PID/clear_refs will have no effect.</p>
<p>The /proc/pid/pagemap gives the PFN, which can be used to find the pageflags<br>using /proc/kpageflags and number of times a page is mapped using<br>/proc/kpagecount. For detailed explanation, see<br>Documentation/admin-guide/mm/pagemap.rst.</p>
<p>The /proc/pid/numa_maps is an extension based on maps, showing the memory<br>locality and binding policy, as well as the memory usage (in pages) of<br>each mapping. The output follows a general format where mapping details get<br>summarized separated by blank spaces, one mapping per each file line:</p>
<p>address   policy    mapping details</p>
<p>00400000 default file=/usr/local/bin/app mapped=1 active=0 N3=1 kernelpagesize_kB=4<br>00600000 default file=/usr/local/bin/app anon=1 dirty=1 N3=1 kernelpagesize_kB=4<br>3206000000 default file=/lib64/ld-2.12.so mapped=26 mapmax=6 N0=24 N3=2 kernelpagesize_kB=4<br>320621f000 default file=/lib64/ld-2.12.so anon=1 dirty=1 N3=1 kernelpagesize_kB=4<br>3206220000 default file=/lib64/ld-2.12.so anon=1 dirty=1 N3=1 kernelpagesize_kB=4<br>3206221000 default anon=1 dirty=1 N3=1 kernelpagesize_kB=4<br>3206800000 default file=/lib64/libc-2.12.so mapped=59 mapmax=21 active=55 N0=41 N3=18 kernelpagesize_kB=4<br>320698b000 default file=/lib64/libc-2.12.so<br>3206b8a000 default file=/lib64/libc-2.12.so anon=2 dirty=2 N3=2 kernelpagesize_kB=4<br>3206b8e000 default file=/lib64/libc-2.12.so anon=1 dirty=1 N3=1 kernelpagesize_kB=4<br>3206b8f000 default anon=3 dirty=3 active=1 N3=3 kernelpagesize_kB=4<br>7f4dc10a2000 default anon=3 dirty=3 N3=3 kernelpagesize_kB=4<br>7f4dc10b4000 default anon=2 dirty=2 active=1 N3=2 kernelpagesize_kB=4<br>7f4dc1200000 default file=/anon_hugepage\040(deleted) huge anon=1 dirty=1 N3=1 kernelpagesize_kB=2048<br>7fff335f0000 default stack anon=3 dirty=3 N3=3 kernelpagesize_kB=4<br>7fff3369d000 default mapped=1 mapmax=35 active=0 N3=1 kernelpagesize_kB=4</p>
<p>Where:<br>“address” is the starting address for the mapping;<br>“policy” reports the NUMA memory policy set for the mapping (see Documentation/admin-guide/mm/numa_memory_policy.rst);<br>“mapping details” summarizes mapping data such as mapping type, page usage counters,<br>node locality page counters (N0 == node0, N1 == node1, …) and the kernel page<br>size, in KB, that is backing the mapping up.</p>
<h2 id="1-2-Kernel-data"><a href="#1-2-Kernel-data" class="headerlink" title="1.2 Kernel data"></a>1.2 Kernel data</h2><p>Similar to  the  process entries, the kernel data files give information about<br>the running kernel. The files used to obtain this information are contained in<br>/proc and  are  listed  in Table 1-5. Not all of these will be present in your<br>system. It  depends  on the kernel configuration and the loaded modules, which<br>files are there, and which are missing.</p>
<p>Table 1-5: Kernel info in /proc<br>……………………………………………………………………<br> File        Content<br> apm         Advanced power management info<br> buddyinfo   Kernel memory allocator information (see text)    (2.5)<br> bus         Directory containing bus specific information<br> cmdline     Kernel command line<br> cpuinfo     Info about the CPU<br> devices     Available devices (block and character)<br> dma         Used DMS channels<br> filesystems Supported filesystems<br> driver         Various drivers grouped here, currently rtc (2.4)<br> execdomains Execdomains, related to security            (2.4)<br> fb         Frame Buffer devices                (2.4)<br> fs         File system parameters, currently nfs/exports    (2.4)<br> ide         Directory containing info about the IDE subsystem<br> interrupts  Interrupt usage<br> iomem         Memory map                        (2.4)<br> ioports     I/O port usage<br> irq         Masks for irq to cpu affinity            (2.4)(smp?)<br> isapnp         ISA PnP (Plug&amp;Play) Info                (2.4)<br> kcore       Kernel core image (can be ELF or A.OUT(deprecated in 2.4))<br> kmsg        Kernel messages<br> ksyms       Kernel symbol table<br> loadavg     Load average of last 1, 5 &amp; 15 minutes<br> locks       Kernel locks<br> meminfo     Memory info<br> misc        Miscellaneous<br> modules     List of loaded modules<br> mounts      Mounted filesystems<br> net         Networking info (see text)<br> pagetypeinfo Additional page allocator information (see text)  (2.5)<br> partitions  Table of partitions known to the system<br> pci         Deprecated info of PCI bus (new way -&gt; /proc/bus/pci/,<br>             decoupled by lspci                    (2.4)<br> rtc         Real time clock<br> scsi        SCSI info (see text)<br> slabinfo    Slab pool info<br> softirqs    softirq usage<br> stat        Overall statistics<br> swaps       Swap space utilization<br> sys         See chapter 2<br> sysvipc     Info of SysVIPC Resources (msg, sem, shm)        (2.4)<br> tty         Info of tty drivers<br> uptime      Wall clock since boot, combined idle time of all cpus<br> version     Kernel version<br> video         bttv info of video resources            (2.4)<br> vmallocinfo Show vmalloced areas<br>……………………………………………………………………</p>
<p>You can,  for  example,  check  which interrupts are currently in use and what<br>they are used for by looking in the file /proc/interrupts:</p>
<blockquote>
<p>cat /proc/interrupts<br>             CPU0<br>    0:    8728810          XT-PIC  timer<br>    1:        895          XT-PIC  keyboard<br>    2:          0          XT-PIC  cascade<br>    3:     531695          XT-PIC  aha152x<br>    4:    2014133          XT-PIC  serial<br>    5:      44401          XT-PIC  pcnet_cs<br>    8:          2          XT-PIC  rtc<br>   11:          8          XT-PIC  i82365<br>   12:     182918          XT-PIC  PS/2 Mouse<br>   13:          1          XT-PIC  fpu<br>   14:    1232265          XT-PIC  ide0<br>   15:          7          XT-PIC  ide1<br>  NMI:          0 </p>
</blockquote>
<p>In 2.4.* a couple of lines where added to this file LOC &amp; ERR (this time is the<br>output of a SMP machine):</p>
<blockquote>
<p>cat /proc/interrupts </p>
</blockquote>
<pre><code>         CPU0       CPU1       
0:    1243498    1214548    IO-APIC-edge  timer
1:       8949       8958    IO-APIC-edge  keyboard
2:          0          0          XT-PIC  cascade
5:      11286      10161    IO-APIC-edge  soundblaster
8:          1          0    IO-APIC-edge  rtc
9:      27422      27407    IO-APIC-edge  3c503
</code></pre>
<p>   12:     113645     113873    IO-APIC-edge  PS/2 Mouse<br>   13:          0          0          XT-PIC  fpu<br>   14:      22491      24012    IO-APIC-edge  ide0<br>   15:       2183       2415    IO-APIC-edge  ide1<br>   17:      30564      30414   IO-APIC-level  eth0<br>   18:        177        164   IO-APIC-level  bttv<br>  NMI:    2457961    2457959<br>  LOC:    2457882    2457881<br>  ERR:       2155</p>
<p>NMI is incremented in this case because every timer interrupt generates a NMI<br>(Non Maskable Interrupt) which is used by the NMI Watchdog to detect lockups.</p>
<p>LOC is the local interrupt counter of the internal APIC of every CPU.</p>
<p>ERR is incremented in the case of errors in the IO-APIC bus (the bus that<br>connects the CPUs in a SMP system. This means that an error has been detected,<br>the IO-APIC automatically retry the transmission, so it should not be a big<br>problem, but you should read the SMP-FAQ.</p>
<p>In 2.6.2* /proc/interrupts was expanded again.  This time the goal was for<br>/proc/interrupts to display every IRQ vector in use by the system, not<br>just those considered ‘most important’.  The new vectors are:</p>
<p>  THR – interrupt raised when a machine check threshold counter<br>  (typically counting ECC corrected errors of memory or cache) exceeds<br>  a configurable threshold.  Only available on some systems.</p>
<p>  TRM – a thermal event interrupt occurs when a temperature threshold<br>  has been exceeded for the CPU.  This interrupt may also be generated<br>  when the temperature drops back to normal.</p>
<p>  SPU – a spurious interrupt is some interrupt that was raised then lowered<br>  by some IO device before it could be fully processed by the APIC.  Hence<br>  the APIC sees the interrupt but does not know what device it came from.<br>  For this case the APIC will generate the interrupt with a IRQ vector<br>  of 0xff. This might also be generated by chipset bugs.</p>
<p>  RES, CAL, TLB – rescheduling, call and TLB flush interrupts are<br>  sent from one CPU to another per the needs of the OS.  Typically,<br>  their statistics are used by kernel developers and interested users to<br>  determine the occurrence of interrupts of the given type.</p>
<p>The above IRQ vectors are displayed only when relevant.  For example,<br>the threshold vector does not exist on x86_64 platforms.  Others are<br>suppressed when the system is a uniprocessor.  As of this writing, only<br>i386 and x86_64 platforms support the new IRQ vector displays.</p>
<p>Of some interest is the introduction of the /proc/irq directory to 2.4.<br>It could be used to set IRQ to CPU affinity, this means that you can “hook” an<br>IRQ to only one CPU, or to exclude a CPU of handling IRQs. The contents of the<br>irq subdir is one subdir for each IRQ, and two files; default_smp_affinity and<br>prof_cpu_mask.</p>
<p>For example </p>
<blockquote>
<p>ls /proc/irq/<br>  0  10  12  14  16  18  2  4  6  8  prof_cpu_mask<br>  1  11  13  15  17  19  3  5  7  9  default_smp_affinity<br>ls /proc/irq/0/<br>  smp_affinity</p>
</blockquote>
<p>smp_affinity is a bitmask, in which you can specify which CPUs can handle the<br>IRQ, you can set it by doing:</p>
<blockquote>
<p>echo 1 &gt; /proc/irq/10/smp_affinity</p>
</blockquote>
<p>This means that only the first CPU will handle the IRQ, but you can also echo<br>5 which means that only the first and third CPU can handle the IRQ.</p>
<p>The contents of each smp_affinity file is the same by default:</p>
<blockquote>
<p>cat /proc/irq/0/smp_affinity<br>  ffffffff</p>
</blockquote>
<p>There is an alternate interface, smp_affinity_list which allows specifying<br>a cpu range instead of a bitmask:</p>
<blockquote>
<p>cat /proc/irq/0/smp_affinity_list<br>  1024-1031</p>
</blockquote>
<p>The default_smp_affinity mask applies to all non-active IRQs, which are the<br>IRQs which have not yet been allocated/activated, and hence which lack a<br>/proc/irq/[0-9]* directory.</p>
<p>The node file on an SMP system shows the node to which the device using the IRQ<br>reports itself as being attached. This hardware locality information does not<br>include information about any possible driver locality preference.</p>
<p>prof_cpu_mask specifies which CPUs are to be profiled by the system wide<br>profiler. Default value is ffffffff (all cpus if there are only 32 of them).</p>
<p>The way IRQs are routed is handled by the IO-APIC, and it’s Round Robin<br>between all the CPUs which are allowed to handle it. As usual the kernel has<br>more info than you and does a better job than you, so the defaults are the<br>best choice for almost everyone.  [Note this applies only to those IO-APIC’s<br>that support “Round Robin” interrupt distribution.]</p>
<p>There are  three  more  important subdirectories in /proc: net, scsi, and sys.<br>The general  rule  is  that  the  contents,  or  even  the  existence of these<br>directories, depend  on your kernel configuration. If SCSI is not enabled, the<br>directory scsi  may  not  exist. The same is true with the net, which is there<br>only when networking support is present in the running kernel.</p>
<p>The slabinfo  file  gives  information  about  memory usage at the slab level.<br>Linux uses  slab  pools for memory management above page level in version 2.2.<br>Commonly used  objects  have  their  own  slab  pool (such as network buffers,<br>directory cache, and so on).</p>
<p>……………………………………………………………………</p>
<blockquote>
<p>cat /proc/buddyinfo</p>
</blockquote>
<p>Node 0, zone      DMA      0      4      5      4      4      3 …<br>Node 0, zone   Normal      1      0      0      1    101      8 …<br>Node 0, zone  HighMem      2      0      0      1      1      0 …</p>
<p>External fragmentation is a problem under some workloads, and buddyinfo is a<br>useful tool for helping diagnose these problems.  Buddyinfo will give you a<br>clue as to how big an area you can safely allocate, or why a previous<br>allocation failed.</p>
<p>Each column represents the number of pages of a certain order which are<br>available.  In this case, there are 0 chunks of 2^0<em>PAGE_SIZE available in<br>ZONE_DMA, 4 chunks of 2^1</em>PAGE_SIZE in ZONE_DMA, 101 chunks of 2^4*PAGE_SIZE<br>available in ZONE_NORMAL, etc… </p>
<p>More information relevant to external fragmentation can be found in<br>pagetypeinfo.</p>
<blockquote>
<p>cat /proc/pagetypeinfo<br>Page block order: 9<br>Pages per block:  512</p>
</blockquote>
<p>Free pages count per migrate type at order       0      1      2      3      4      5      6      7      8      9     10<br>Node    0, zone      DMA, type    Unmovable      0      0      0      1      1      1      1      1      1      1      0<br>Node    0, zone      DMA, type  Reclaimable      0      0      0      0      0      0      0      0      0      0      0<br>Node    0, zone      DMA, type      Movable      1      1      2      1      2      1      1      0      1      0      2<br>Node    0, zone      DMA, type      Reserve      0      0      0      0      0      0      0      0      0      1      0<br>Node    0, zone      DMA, type      Isolate      0      0      0      0      0      0      0      0      0      0      0<br>Node    0, zone    DMA32, type    Unmovable    103     54     77      1      1      1     11      8      7      1      9<br>Node    0, zone    DMA32, type  Reclaimable      0      0      2      1      0      0      0      0      1      0      0<br>Node    0, zone    DMA32, type      Movable    169    152    113     91     77     54     39     13      6      1    452<br>Node    0, zone    DMA32, type      Reserve      1      2      2      2      2      0      1      1      1      1      0<br>Node    0, zone    DMA32, type      Isolate      0      0      0      0      0      0      0      0      0      0      0</p>
<p>Number of blocks type     Unmovable  Reclaimable      Movable      Reserve      Isolate<br>Node 0, zone      DMA            2            0            5            1            0<br>Node 0, zone    DMA32           41            6          967            2            0</p>
<p>Fragmentation avoidance in the kernel works by grouping pages of different<br>migrate types into the same contiguous regions of memory called page blocks.<br>A page block is typically the size of the default hugepage size e.g. 2MB on<br>X86-64. By keeping pages grouped based on their ability to move, the kernel<br>can reclaim pages within a page block to satisfy a high-order allocation.</p>
<p>The pagetypinfo begins with information on the size of a page block. It<br>then gives the same type of information as buddyinfo except broken down<br>by migrate-type and finishes with details on how many page blocks of each<br>type exist.</p>
<p>If min_free_kbytes has been tuned correctly (recommendations made by hugeadm<br>from libhugetlbfs <a target="_blank" rel="noopener" href="https://github.com/libhugetlbfs/libhugetlbfs/">https://github.com/libhugetlbfs/libhugetlbfs/</a>), one can<br>make an estimate of the likely number of huge pages that can be allocated<br>at a given point in time. All the “Movable” blocks should be allocatable<br>unless memory has been mlock()’d. Some of the Reclaimable blocks should<br>also be allocatable although a lot of filesystem metadata may have to be<br>reclaimed to achieve this.</p>
<p>……………………………………………………………………</p>
<p>meminfo:</p>
<p>Provides information about distribution and utilization of memory.  This<br>varies by architecture and compile options.  The following is from a<br>16GB PIII, which has highmem enabled.  You may not have all of these fields.</p>
<blockquote>
<p>cat /proc/meminfo</p>
</blockquote>
<p>MemTotal:     16344972 kB<br>MemFree:      13634064 kB<br>MemAvailable: 14836172 kB<br>Buffers:          3656 kB<br>Cached:        1195708 kB<br>SwapCached:          0 kB<br>Active:         891636 kB<br>Inactive:      1077224 kB<br>HighTotal:    15597528 kB<br>HighFree:     13629632 kB<br>LowTotal:       747444 kB<br>LowFree:          4432 kB<br>SwapTotal:           0 kB<br>SwapFree:            0 kB<br>Dirty:             968 kB<br>Writeback:           0 kB<br>AnonPages:      861800 kB<br>Mapped:         280372 kB<br>Shmem:             644 kB<br>Slab:           284364 kB<br>SReclaimable:   159856 kB<br>SUnreclaim:     124508 kB<br>PageTables:      24448 kB<br>NFS_Unstable:        0 kB<br>Bounce:              0 kB<br>WritebackTmp:        0 kB<br>CommitLimit:   7669796 kB<br>Committed_AS:   100056 kB<br>VmallocTotal:   112216 kB<br>VmallocUsed:       428 kB<br>VmallocChunk:   111088 kB<br>AnonHugePages:   49152 kB<br>ShmemHugePages:      0 kB<br>ShmemPmdMapped:      0 kB</p>
<pre><code>MemTotal: Total usable ram (i.e. physical ram minus a few reserved
          bits and the kernel binary code)
 MemFree: The sum of LowFree+HighFree
</code></pre>
<p>MemAvailable: An estimate of how much memory is available for starting new<br>              applications, without swapping. Calculated from MemFree,<br>              SReclaimable, the size of the file LRU lists, and the low<br>              watermarks in each zone.<br>              The estimate takes into account that the system needs some<br>              page cache to function well, and that not all reclaimable<br>              slab will be reclaimable, due to items being in use. The<br>              impact of those factors will vary from system to system.<br>     Buffers: Relatively temporary storage for raw disk blocks<br>              shouldn’t get tremendously large (20MB or so)<br>      Cached: in-memory cache for files read from the disk (the<br>              pagecache).  Doesn’t include SwapCached<br>  SwapCached: Memory that once was swapped out, is swapped back in but<br>              still also is in the swapfile (if memory is needed it<br>              doesn’t need to be swapped out AGAIN because it is already<br>              in the swapfile. This saves I/O)<br>      Active: Memory that has been used more recently and usually not<br>              reclaimed unless absolutely necessary.<br>    Inactive: Memory which has been less recently used.  It is more<br>              eligible to be reclaimed for other purposes<br>   HighTotal:<br>    HighFree: Highmem is all memory above ~860MB of physical memory<br>              Highmem areas are for use by userspace programs, or<br>              for the pagecache.  The kernel must use tricks to access<br>              this memory, making it slower to access than lowmem.<br>    LowTotal:<br>     LowFree: Lowmem is memory which can be used for everything that<br>              highmem can be used for, but it is also available for the<br>              kernel’s use for its own data structures.  Among many<br>              other things, it is where everything from the Slab is<br>              allocated.  Bad things happen when you’re out of lowmem.<br>   SwapTotal: total amount of swap space available<br>    SwapFree: Memory which has been evicted from RAM, and is temporarily<br>              on the disk<br>       Dirty: Memory which is waiting to get written back to the disk<br>   Writeback: Memory which is actively being written back to the disk<br>   AnonPages: Non-file backed pages mapped into userspace page tables<br>AnonHugePages: Non-file backed huge pages mapped into userspace page tables<br>      Mapped: files which have been mmaped, such as libraries<br>       Shmem: Total memory used by shared memory (shmem) and tmpfs<br>ShmemHugePages: Memory used by shared memory (shmem) and tmpfs allocated<br>              with huge pages<br>ShmemPmdMapped: Shared memory mapped into userspace with huge pages<br>        Slab: in-kernel data structures cache<br>SReclaimable: Part of Slab, that might be reclaimed, such as caches<br>  SUnreclaim: Part of Slab, that cannot be reclaimed on memory pressure<br>  PageTables: amount of memory dedicated to the lowest level of page<br>              tables.<br>NFS_Unstable: NFS pages sent to the server, but not yet committed to stable<br>          storage<br>      Bounce: Memory used for block device “bounce buffers”<br>WritebackTmp: Memory used by FUSE for temporary writeback buffers<br> CommitLimit: Based on the overcommit ratio (‘vm.overcommit_ratio’),<br>              this is the total amount of  memory currently available to<br>              be allocated on the system. This limit is only adhered to<br>              if strict overcommit accounting is enabled (mode 2 in<br>              ‘vm.overcommit_memory’).<br>              The CommitLimit is calculated with the following formula:<br>              CommitLimit = ([total RAM pages] - [total huge TLB pages]) *<br>                             overcommit_ratio / 100 + [total swap pages]<br>              For example, on a system with 1G of physical RAM and 7G<br>              of swap with a <code>vm.overcommit_ratio</code> of 30 it would<br>              yield a CommitLimit of 7.3G.<br>              For more details, see the memory overcommit documentation<br>              in vm/overcommit-accounting.<br>Committed_AS: The amount of memory presently allocated on the system.<br>              The committed memory is a sum of all of the memory which<br>              has been allocated by processes, even if it has not been<br>              “used” by them as of yet. A process which malloc()’s 1G<br>              of memory, but only touches 300M of it will show up as<br>          using 1G. This 1G is memory which has been “committed” to<br>              by the VM and can be used at any time by the allocating<br>              application. With strict overcommit enabled on the system<br>              (mode 2 in ‘vm.overcommit_memory’),allocations which would<br>              exceed the CommitLimit (detailed above) will not be permitted.<br>              This is useful if one needs to guarantee that processes will<br>              not fail due to lack of memory once that memory has been<br>              successfully allocated.<br>VmallocTotal: total size of vmalloc memory area<br> VmallocUsed: amount of vmalloc area which is used<br>VmallocChunk: largest contiguous block of vmalloc area which is free</p>
<p>……………………………………………………………………</p>
<p>vmallocinfo:</p>
<p>Provides information about vmalloced/vmaped areas. One line per area,<br>containing the virtual address range of the area, size in bytes,<br>caller information of the creator, and optional information depending<br>on the kind of area :</p>
<p> pages=nr    number of pages<br> phys=addr   if a physical address was specified<br> ioremap     I/O mapping (ioremap() and friends)<br> vmalloc     vmalloc() area<br> vmap        vmap()ed pages<br> user        VM_USERMAP area<br> vpages      buffer for pages pointers was vmalloced (huge area)<br> N<node>=nr  (Only on NUMA kernels)<br>             Number of pages allocated on memory node <node></p>
<blockquote>
<p>cat /proc/vmallocinfo<br>0xffffc20000000000-0xffffc20000201000 2101248 alloc_large_system_hash+0x204 …<br>  /0x2c0 pages=512 vmalloc N0=128 N1=128 N2=128 N3=128<br>0xffffc20000201000-0xffffc20000302000 1052672 alloc_large_system_hash+0x204 …<br>  /0x2c0 pages=256 vmalloc N0=64 N1=64 N2=64 N3=64<br>0xffffc20000302000-0xffffc20000304000    8192 acpi_tb_verify_table+0x21/0x4f…<br>  phys=7fee8000 ioremap<br>0xffffc20000304000-0xffffc20000307000   12288 acpi_tb_verify_table+0x21/0x4f…<br>  phys=7fee7000 ioremap<br>0xffffc2000031d000-0xffffc2000031f000    8192 init_vdso_vars+0x112/0x210<br>0xffffc2000031f000-0xffffc2000032b000   49152 cramfs_uncompress_init+0x2e …<br>  /0x80 pages=11 vmalloc N0=3 N1=3 N2=2 N3=3<br>0xffffc2000033a000-0xffffc2000033d000   12288 sys_swapon+0x640/0xac0      …<br>  pages=2 vmalloc N1=2<br>0xffffc20000347000-0xffffc2000034c000   20480 xt_alloc_table_info+0xfe …<br>  /0x130 [x_tables] pages=4 vmalloc N0=4<br>0xffffffffa0000000-0xffffffffa000f000   61440 sys_init_module+0xc27/0x1d00 …<br>   pages=14 vmalloc N2=14<br>0xffffffffa000f000-0xffffffffa0014000   20480 sys_init_module+0xc27/0x1d00 …<br>   pages=4 vmalloc N1=4<br>0xffffffffa0014000-0xffffffffa0017000   12288 sys_init_module+0xc27/0x1d00 …<br>   pages=2 vmalloc N1=2<br>0xffffffffa0017000-0xffffffffa0022000   45056 sys_init_module+0xc27/0x1d00 …<br>   pages=10 vmalloc N0=10</p>
</blockquote>
<p>……………………………………………………………………</p>
<p>softirqs:</p>
<p>Provides counts of softirq handlers serviced since boot time, for each cpu.</p>
<blockquote>
<p>cat /proc/softirqs<br>                CPU0       CPU1       CPU2       CPU3<br>      HI:          0          0          0          0<br>   TIMER:      27166      27120      27097      27034<br>  NET_TX:          0          0          0         17<br>  NET_RX:         42          0          0         39<br>   BLOCK:          0          0        107       1121<br> TASKLET:          0          0          0        290<br>   SCHED:      27035      26983      26971      26746<br> HRTIMER:          0          0          0          0<br>     RCU:       1678       1769       2178       2250</p>
</blockquote>
<h2 id="1-3-IDE-devices-in-proc-ide"><a href="#1-3-IDE-devices-in-proc-ide" class="headerlink" title="1.3 IDE devices in /proc/ide"></a>1.3 IDE devices in /proc/ide</h2><p>The subdirectory /proc/ide contains information about all IDE devices of which<br>the kernel  is  aware.  There is one subdirectory for each IDE controller, the<br>file drivers  and a link for each IDE device, pointing to the device directory<br>in the controller specific subtree.</p>
<p>The file  drivers  contains general information about the drivers used for the<br>IDE devices:</p>
<blockquote>
<p>cat /proc/ide/drivers<br>  ide-cdrom version 4.53<br>  ide-disk version 1.08</p>
</blockquote>
<p>More detailed  information  can  be  found  in  the  controller  specific<br>subdirectories. These  are  named  ide0,  ide1  and  so  on.  Each  of  these<br>directories contains the files shown in table 1-6.</p>
<p>Table 1-6: IDE controller info in  /proc/ide/ide?<br>……………………………………………………………………<br> File    Content<br> channel IDE channel (0 or 1)<br> config  Configuration (only for PCI/IDE bridge)<br> mate    Mate name<br> model   Type/Chipset of IDE controller<br>……………………………………………………………………</p>
<p>Each device  connected  to  a  controller  has  a separate subdirectory in the<br>controllers directory.  The  files  listed in table 1-7 are contained in these<br>directories.</p>
<p>Table 1-7: IDE device information<br>……………………………………………………………………<br> File             Content<br> cache            The cache<br> capacity         Capacity of the medium (in 512Byte blocks)<br> driver           driver and version<br> geometry         physical and logical geometry<br> identify         device identify block<br> media            media type<br> model            device identifier<br> settings         device setup<br> smart_thresholds IDE disk management thresholds<br> smart_values     IDE disk management values<br>……………………………………………………………………</p>
<p>The most  interesting  file is settings. This file contains a nice overview of<br>the drive parameters:</p>
<h1 id="cat-proc-ide-ide0-hda-settings"><a href="#cat-proc-ide-ide0-hda-settings" class="headerlink" title="cat /proc/ide/ide0/hda/settings"></a>cat /proc/ide/ide0/hda/settings</h1><p>  name                    value           min             max             mode </p>
<hr>
<p>  bios_cyl                526             0               65535           rw<br>  bios_head               255             0               255             rw<br>  bios_sect               63              0               63              rw<br>  breada_readahead        4               0               127             rw<br>  bswap                   0               0               1               r<br>  file_readahead          72              0               2097151         rw<br>  io_32bit                0               0               3               rw<br>  keepsettings            0               0               1               rw<br>  max_kb_per_request      122             1               127             rw<br>  multcount               0               0               8               rw<br>  nice1                   1               0               1               rw<br>  nowerr                  0               0               1               rw<br>  pio_mode                write-only      0               255             w<br>  slow                    0               0               1               rw<br>  unmaskirq               0               0               1               rw<br>  using_dma               0               0               1               rw </p>
<h2 id="1-4-Networking-info-in-proc-net"><a href="#1-4-Networking-info-in-proc-net" class="headerlink" title="1.4 Networking info in /proc/net"></a>1.4 Networking info in /proc/net</h2><p>The subdirectory  /proc/net  follows  the  usual  pattern. Table 1-8 shows the<br>additional values  you  get  for  IP  version 6 if you configure the kernel to<br>support this. Table 1-9 lists the files and their meaning.</p>
<p>Table 1-8: IPv6 info in /proc/net<br>……………………………………………………………………<br> File       Content<br> udp6       UDP sockets (IPv6)<br> tcp6       TCP sockets (IPv6)<br> raw6       Raw device statistics (IPv6)<br> igmp6      IP multicast addresses, which this host joined (IPv6)<br> if_inet6   List of IPv6 interface addresses<br> ipv6_route Kernel routing table for IPv6<br> rt6_stats  Global IPv6 routing tables statistics<br> sockstat6  Socket statistics (IPv6)<br> snmp6      Snmp data (IPv6)<br>……………………………………………………………………</p>
<p>Table 1-9: Network info in /proc/net<br>……………………………………………………………………<br> File          Content<br> arp           Kernel  ARP table<br> dev           network devices with statistics<br> dev_mcast     the Layer2 multicast groups a device is listening too<br>               (interface index, label, number of references, number of bound<br>               addresses).<br> dev_stat      network device status<br> ip_fwchains   Firewall chain linkage<br> ip_fwnames    Firewall chain names<br> ip_masq       Directory containing the masquerading tables<br> ip_masquerade Major masquerading table<br> netstat       Network statistics<br> raw           raw device statistics<br> route         Kernel routing table<br> rpc           Directory containing rpc info<br> rt_cache      Routing cache<br> snmp          SNMP data<br> sockstat      Socket statistics<br> tcp           TCP  sockets<br> udp           UDP sockets<br> unix          UNIX domain sockets<br> wireless      Wireless interface data (Wavelan etc)<br> igmp          IP multicast addresses, which this host joined<br> psched        Global packet scheduler parameters.<br> netlink       List of PF_NETLINK sockets<br> ip_mr_vifs    List of multicast virtual interfaces<br> ip_mr_cache   List of multicast routing cache<br>……………………………………………………………………</p>
<p>You can  use  this  information  to see which network devices are available in<br>your system and how much traffic was routed over those devices:</p>
<blockquote>
<p>cat /proc/net/dev<br>  Inter-|Receive                                                   |[…<br>   face |bytes    packets errs drop fifo frame compressed multicast|[…<br>      lo:  908188   5596     0    0    0     0          0         0 […<br>    ppp0:15475140  20721   410    0    0   410          0         0 […<br>    eth0:  614530   7085     0    0    0     0          0         1 [… </p>
</blockquote>
<p>  …] Transmit<br>  …] bytes    packets errs drop fifo colls carrier compressed<br>  …]  908188     5596    0    0    0     0       0          0<br>  …] 1375103    17405    0    0    0     0       0          0<br>  …] 1703981     5535    0    0    0     3       0          0 </p>
<p>In addition, each Channel Bond interface has its own directory.  For<br>example, the bond0 device will have a directory called /proc/net/bond0/.<br>It will contain information that is specific to that bond, such as the<br>current slaves of the bond, the link status of the slaves, and how<br>many times the slaves link has failed.</p>
<h2 id="1-5-SCSI-info"><a href="#1-5-SCSI-info" class="headerlink" title="1.5 SCSI info"></a>1.5 SCSI info</h2><p>If you  have  a  SCSI  host adapter in your system, you’ll find a subdirectory<br>named after  the driver for this adapter in /proc/scsi. You’ll also see a list<br>of all recognized SCSI devices in /proc/scsi:</p>
<blockquote>
<p>cat /proc/scsi/scsi<br>  Attached devices:<br>  Host: scsi0 Channel: 00 Id: 00 Lun: 00<br>    Vendor: IBM      Model: DGHS09U          Rev: 03E0<br>    Type:   Direct-Access                    ANSI SCSI revision: 03<br>  Host: scsi0 Channel: 00 Id: 06 Lun: 00<br>    Vendor: PIONEER  Model: CD-ROM DR-U06S   Rev: 1.04<br>    Type:   CD-ROM                           ANSI SCSI revision: 02 </p>
</blockquote>
<p>The directory  named  after  the driver has one file for each adapter found in<br>the system.  These  files  contain information about the controller, including<br>the used  IRQ  and  the  IO  address range. The amount of information shown is<br>dependent on  the adapter you use. The example shows the output for an Adaptec<br>AHA-2940 SCSI adapter:</p>
<blockquote>
<p>cat /proc/scsi/aic7xxx/0 </p>
</blockquote>
<p>  Adaptec AIC7xxx driver version: 5.1.19/3.2.4<br>  Compile Options:<br>    TCQ Enabled By Default : Disabled<br>    AIC7XXX_PROC_STATS     : Disabled<br>    AIC7XXX_RESET_DELAY    : 5<br>  Adapter Configuration:<br>             SCSI Adapter: Adaptec AHA-294X Ultra SCSI host adapter<br>                             Ultra Wide Controller<br>      PCI MMAPed I/O Base: 0xeb001000<br>   Adapter SEEPROM Config: SEEPROM found and used.<br>        Adaptec SCSI BIOS: Enabled<br>                      IRQ: 10<br>                     SCBs: Active 0, Max Active 2,<br>                           Allocated 15, HW 16, Page 255<br>               Interrupts: 160328<br>        BIOS Control Word: 0x18b6<br>     Adapter Control Word: 0x005b<br>     Extended Translation: Enabled<br>  Disconnect Enable Flags: 0xffff<br>       Ultra Enable Flags: 0x0001<br>   Tag Queue Enable Flags: 0x0000<br>  Ordered Queue Tag Flags: 0x0000<br>  Default Tag Queue Depth: 8<br>      Tagged Queue By Device array for aic7xxx host instance 0:<br>        {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255}<br>      Actual queue depth per device for aic7xxx host instance 0:<br>        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}<br>  Statistics:<br>  (scsi0:0:0:0)<br>    Device using Wide/Sync transfers at 40.0 MByte/sec, offset 8<br>    Transinfo settings: current(12/8/1/0), goal(12/8/1/0), user(12/15/1/0)<br>    Total transfers 160151 (74577 reads and 85574 writes)<br>  (scsi0:0:6:0)<br>    Device using Narrow/Sync transfers at 5.0 MByte/sec, offset 15<br>    Transinfo settings: current(50/15/0/0), goal(50/15/0/0), user(50/15/0/0)<br>    Total transfers 0 (0 reads and 0 writes) </p>
<h2 id="1-6-Parallel-port-info-in-proc-parport"><a href="#1-6-Parallel-port-info-in-proc-parport" class="headerlink" title="1.6 Parallel port info in /proc/parport"></a>1.6 Parallel port info in /proc/parport</h2><p>The directory  /proc/parport  contains information about the parallel ports of<br>your system.  It  has  one  subdirectory  for  each port, named after the port<br>number (0,1,2,…).</p>
<p>These directories contain the four files shown in Table 1-10.</p>
<p>Table 1-10: Files in /proc/parport<br>……………………………………………………………………<br> File      Content<br> autoprobe Any IEEE-1284 device ID information that has been acquired.<br> devices   list of the device drivers using that port. A + will appear by the<br>           name of the device currently using the port (it might not appear<br>           against any).<br> hardware  Parallel port’s base address, IRQ line and DMA channel.<br> irq       IRQ that parport is using for that port. This is in a separate<br>           file to allow you to alter it by writing a new value in (IRQ<br>           number or none).<br>……………………………………………………………………</p>
<h2 id="1-7-TTY-info-in-proc-tty"><a href="#1-7-TTY-info-in-proc-tty" class="headerlink" title="1.7 TTY info in /proc/tty"></a>1.7 TTY info in /proc/tty</h2><p>Information about  the  available  and actually used tty’s can be found in the<br>directory /proc/tty.You’ll  find  entries  for drivers and line disciplines in<br>this directory, as shown in Table 1-11.</p>
<p>Table 1-11: Files in /proc/tty<br>……………………………………………………………………<br> File          Content<br> drivers       list of drivers and their usage<br> ldiscs        registered line disciplines<br> driver/serial usage statistic and status of single tty lines<br>……………………………………………………………………</p>
<p>To see  which  tty’s  are  currently in use, you can simply look into the file<br>/proc/tty/drivers:</p>
<blockquote>
<p>cat /proc/tty/drivers<br>  pty_slave            /dev/pts      136   0-255 pty:slave<br>  pty_master           /dev/ptm      128   0-255 pty:master<br>  pty_slave            /dev/ttyp       3   0-255 pty:slave<br>  pty_master           /dev/pty        2   0-255 pty:master<br>  serial               /dev/cua        5   64-67 serial:callout<br>  serial               /dev/ttyS       4   64-67 serial<br>  /dev/tty0            /dev/tty0       4       0 system:vtmaster<br>  /dev/ptmx            /dev/ptmx       5       2 system<br>  /dev/console         /dev/console    5       1 system:console<br>  /dev/tty             /dev/tty        5       0 system:/dev/tty<br>  unknown              /dev/tty        4    1-63 console </p>
</blockquote>
<h2 id="1-8-Miscellaneous-kernel-statistics-in-proc-stat"><a href="#1-8-Miscellaneous-kernel-statistics-in-proc-stat" class="headerlink" title="1.8 Miscellaneous kernel statistics in /proc/stat"></a>1.8 Miscellaneous kernel statistics in /proc/stat</h2><p>Various pieces   of  information about  kernel activity  are  available in the<br>/proc/stat file.  All  of  the numbers reported  in  this file are  aggregates<br>since the system first booted.  For a quick look, simply cat the file:</p>
<blockquote>
<p>cat /proc/stat<br>  cpu  2255 34 2290 22625563 6290 127 456 0 0 0<br>  cpu0 1132 34 1441 11311718 3675 127 438 0 0 0<br>  cpu1 1123 0 849 11313845 2614 0 18 0 0 0<br>  intr 114930548 113199788 3 0 5 263 0 4 [… lots more numbers …]<br>  ctxt 1990473<br>  btime 1062191376<br>  processes 2915<br>  procs_running 1<br>  procs_blocked 0<br>  softirq 183433 0 21755 12 39 1137 231 21459 2263</p>
</blockquote>
<p>The very first  “cpu” line aggregates the  numbers in all  of the other “cpuN”<br>lines.  These numbers identify the amount of time the CPU has spent performing<br>different kinds of work.  Time units are in USER_HZ (typically hundredths of a<br>second).  The meanings of the columns are as follows, from left to right:</p>
<ul>
<li>user: normal processes executing in user mode</li>
<li>nice: niced processes executing in user mode</li>
<li>system: processes executing in kernel mode</li>
<li>idle: twiddling thumbs</li>
<li>iowait: In a word, iowait stands for waiting for I/O to complete. But there<br>are several problems:<ol>
<li>Cpu will not wait for I/O to complete, iowait is the time that a task is<br>waiting for I/O to complete. When cpu goes into idle state for<br>outstanding task io, another task will be scheduled on this CPU.</li>
<li>In a multi-core CPU, the task waiting for I/O to complete is not running<br>on any CPU, so the iowait of each CPU is difficult to calculate.</li>
<li>The value of iowait field in /proc/stat will decrease in certain<br>conditions.<br>So, the iowait is not reliable by reading from /proc/stat.</li>
</ol>
</li>
<li>irq: servicing interrupts</li>
<li>softirq: servicing softirqs</li>
<li>steal: involuntary wait</li>
<li>guest: running a normal guest</li>
<li>guest_nice: running a niced guest</li>
</ul>
<p>The “intr” line gives counts of interrupts  serviced since boot time, for each<br>of the  possible system interrupts.   The first  column  is the  total of  all<br>interrupts serviced  including  unnumbered  architecture specific  interrupts;<br>each  subsequent column is the  total for that particular numbered interrupt.<br>Unnumbered interrupts are not shown, only summed into the total.</p>
<p>The “ctxt” line gives the total number of context switches across all CPUs.</p>
<p>The “btime” line gives  the time at which the  system booted, in seconds since<br>the Unix epoch.</p>
<p>The “processes” line gives the number  of processes and threads created, which<br>includes (but  is not limited  to) those  created by  calls to the  fork() and<br>clone() system calls.</p>
<p>The “procs_running” line gives the total number of threads that are<br>running or ready to run (i.e., the total number of runnable threads).</p>
<p>The   “procs_blocked” line gives  the  number of  processes currently blocked,<br>waiting for I/O to complete.</p>
<p>The “softirq” line gives counts of softirqs serviced since boot time, for each<br>of the possible system softirqs. The first column is the total of all<br>softirqs serviced; each subsequent column is the total for that particular<br>softirq.</p>
<h2 id="1-9-Ext4-file-system-parameters"><a href="#1-9-Ext4-file-system-parameters" class="headerlink" title="1.9 Ext4 file system parameters"></a>1.9 Ext4 file system parameters</h2><p>Information about mounted ext4 file systems can be found in<br>/proc/fs/ext4.  Each mounted filesystem will have a directory in<br>/proc/fs/ext4 based on its device name (i.e., /proc/fs/ext4/hdc or<br>/proc/fs/ext4/dm-0).   The files in each per-device directory are shown<br>in Table 1-12, below.</p>
<p>Table 1-12: Files in /proc/fs/ext4/<devname><br>……………………………………………………………………<br> File            Content<br> mb_groups       details of multiblock allocator buddy cache of free blocks<br>……………………………………………………………………</p>
<h2 id="2-0-proc-consoles"><a href="#2-0-proc-consoles" class="headerlink" title="2.0 /proc/consoles"></a>2.0 /proc/consoles</h2><p>Shows registered system console lines.</p>
<p>To see which character device lines are currently used for the system console<br>/dev/console, you may simply look into the file /proc/consoles:</p>
<blockquote>
<p>cat /proc/consoles<br>  tty0                 -WU (ECp)       4:7<br>  ttyS0                -W- (Ep)        4:64</p>
</blockquote>
<p>The columns are:</p>
<p>  device               name of the device<br>  operations           R = can do read operations<br>                       W = can do write operations<br>                       U = can do unblank<br>  flags                E = it is enabled<br>                       C = it is preferred console<br>                       B = it is primary boot console<br>                       p = it is used for printk buffer<br>                       b = it is not a TTY but a Braille device<br>                       a = it is safe to use when cpu is offline<br>  major:minor          major and minor number of the device separated by a colon</p>
<hr>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>The /proc file system serves information about the running system. It not only<br>allows access to process data but also allows you to request the kernel status<br>by reading files in the hierarchy.</p>
<p>The directory  structure  of /proc reflects the types of information and makes<br>it easy, if not obvious, where to look for specific data.</p>
<hr>
<hr>
<h2 id="CHAPTER-2-MODIFYING-SYSTEM-PARAMETERS"><a href="#CHAPTER-2-MODIFYING-SYSTEM-PARAMETERS" class="headerlink" title="CHAPTER 2: MODIFYING SYSTEM PARAMETERS"></a>CHAPTER 2: MODIFYING SYSTEM PARAMETERS</h2><hr>
<h2 id="In-This-Chapter-1"><a href="#In-This-Chapter-1" class="headerlink" title="In This Chapter"></a>In This Chapter</h2><ul>
<li>Modifying kernel parameters by writing into files found in /proc/sys</li>
<li>Exploring the files which modify certain parameters</li>
<li>Review of the /proc/sys file tree</li>
</ul>
<hr>
<p>A very  interesting part of /proc is the directory /proc/sys. This is not only<br>a source  of  information,  it also allows you to change parameters within the<br>kernel. Be  very  careful  when attempting this. You can optimize your system,<br>but you  can  also  cause  it  to  crash.  Never  alter kernel parameters on a<br>production system.  Set  up  a  development machine and test to make sure that<br>everything works  the  way  you want it to. You may have no alternative but to<br>reboot the machine once an error has been made.</p>
<p>To change  a  value,  simply  echo  the new value into the file. An example is<br>given below  in the section on the file system data. You need to be root to do<br>this. You  can  create  your  own  boot script to perform this every time your<br>system boots.</p>
<p>The files  in /proc/sys can be used to fine tune and monitor miscellaneous and<br>general things  in  the operation of the Linux kernel. Since some of the files<br>can inadvertently  disrupt  your  system,  it  is  advisable  to  read  both<br>documentation and  source  before actually making adjustments. In any case, be<br>very careful  when  writing  to  any  of these files. The entries in /proc may<br>change slightly between the 2.1.* and the 2.2 kernel, so if there is any doubt<br>review the kernel documentation in the directory /usr/src/linux/Documentation.<br>This chapter  is  heavily  based  on the documentation included in the pre 2.2<br>kernels, and became part of it in version 2.2.1 of the Linux kernel.</p>
<p>Please see: Documentation/sysctl/ directory for descriptions of these<br>entries.</p>
<hr>
<h2 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h2><p>Certain aspects  of  kernel  behavior  can be modified at runtime, without the<br>need to  recompile  the kernel, or even to reboot the system. The files in the<br>/proc/sys tree  can  not only be read, but also modified. You can use the echo<br>command to write value into these files, thereby changing the default settings<br>of the kernel.</p>
<hr>
<hr>
<h2 id="CHAPTER-3-PER-PROCESS-PARAMETERS"><a href="#CHAPTER-3-PER-PROCESS-PARAMETERS" class="headerlink" title="CHAPTER 3: PER-PROCESS PARAMETERS"></a>CHAPTER 3: PER-PROCESS PARAMETERS</h2><h2 id="3-1-proc-oom-adj-amp-proc-oom-score-adj-Adjust-the-oom-killer-score"><a href="#3-1-proc-oom-adj-amp-proc-oom-score-adj-Adjust-the-oom-killer-score" class="headerlink" title="3.1 /proc//oom_adj &amp; /proc//oom_score_adj- Adjust the oom-killer score"></a>3.1 /proc/<pid>/oom_adj &amp; /proc/<pid>/oom_score_adj- Adjust the oom-killer score</h2><p>These file can be used to adjust the badness heuristic used to select which<br>process gets killed in out of memory conditions.</p>
<p>The badness heuristic assigns a value to each candidate task ranging from 0<br>(never kill) to 1000 (always kill) to determine which process is targeted.  The<br>units are roughly a proportion along that range of allowed memory the process<br>may allocate from based on an estimation of its current memory and swap use.<br>For example, if a task is using all allowed memory, its badness score will be<br>1000.  If it is using half of its allowed memory, its score will be 500.</p>
<p>There is an additional factor included in the badness score: the current memory<br>and swap usage is discounted by 3% for root processes.</p>
<p>The amount of “allowed” memory depends on the context in which the oom killer<br>was called.  If it is due to the memory assigned to the allocating task’s cpuset<br>being exhausted, the allowed memory represents the set of mems assigned to that<br>cpuset.  If it is due to a mempolicy’s node(s) being exhausted, the allowed<br>memory represents the set of mempolicy nodes.  If it is due to a memory<br>limit (or swap limit) being reached, the allowed memory is that configured<br>limit.  Finally, if it is due to the entire system being out of memory, the<br>allowed memory represents all allocatable resources.</p>
<p>The value of /proc/<pid>/oom_score_adj is added to the badness score before it<br>is used to determine which task to kill.  Acceptable values range from -1000<br>(OOM_SCORE_ADJ_MIN) to +1000 (OOM_SCORE_ADJ_MAX).  This allows userspace to<br>polarize the preference for oom killing either by always preferring a certain<br>task or completely disabling it.  The lowest possible value, -1000, is<br>equivalent to disabling oom killing entirely for that task since it will always<br>report a badness score of 0.</p>
<p>Consequently, it is very simple for userspace to define the amount of memory to<br>consider for each task.  Setting a /proc/<pid>/oom_score_adj value of +500, for<br>example, is roughly equivalent to allowing the remainder of tasks sharing the<br>same system, cpuset, mempolicy, or memory controller resources to use at least<br>50% more memory.  A value of -500, on the other hand, would be roughly<br>equivalent to discounting 50% of the task’s allowed memory from being considered<br>as scoring against the task.</p>
<p>For backwards compatibility with previous kernels, /proc/<pid>/oom_adj may also<br>be used to tune the badness score.  Its acceptable values range from -16<br>(OOM_ADJUST_MIN) to +15 (OOM_ADJUST_MAX) and a special value of -17<br>(OOM_DISABLE) to disable oom killing entirely for that task.  Its value is<br>scaled linearly with /proc/<pid>/oom_score_adj.</p>
<p>The value of /proc/<pid>/oom_score_adj may be reduced no lower than the last<br>value set by a CAP_SYS_RESOURCE process. To reduce the value any lower<br>requires CAP_SYS_RESOURCE.</p>
<p>Caveat: when a parent task is selected, the oom killer will sacrifice any first<br>generation children with separate address spaces instead, if possible.  This<br>avoids servers and important system daemons from being killed and loses the<br>minimal amount of work.</p>
<h2 id="3-2-proc-oom-score-Display-current-oom-killer-score"><a href="#3-2-proc-oom-score-Display-current-oom-killer-score" class="headerlink" title="3.2 /proc//oom_score - Display current oom-killer score"></a>3.2 /proc/<pid>/oom_score - Display current oom-killer score</h2><p>This file can be used to check the current score used by the oom-killer is for<br>any given <pid>. Use it together with /proc/<pid>/oom_score_adj to tune which<br>process should be killed in an out-of-memory situation.</p>
<h2 id="3-3-proc-io-Display-the-IO-accounting-fields"><a href="#3-3-proc-io-Display-the-IO-accounting-fields" class="headerlink" title="3.3  /proc//io - Display the IO accounting fields"></a>3.3  /proc/<pid>/io - Display the IO accounting fields</h2><p>This file contains IO statistics for each running process</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>test:/tmp # dd if=/dev/zero of=/tmp/test.dat &amp;<br>[1] 3828</p>
<p>test:/tmp # cat /proc/3828/io<br>rchar: 323934931<br>wchar: 323929600<br>syscr: 632687<br>syscw: 632675<br>read_bytes: 0<br>write_bytes: 323932160<br>cancelled_write_bytes: 0</p>
<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><h2 id="rchar"><a href="#rchar" class="headerlink" title="rchar"></a>rchar</h2><p>I/O counter: chars read<br>The number of bytes which this task has caused to be read from storage. This<br>is simply the sum of bytes which this process passed to read() and pread().<br>It includes things like tty IO and it is unaffected by whether or not actual<br>physical disk IO was required (the read might have been satisfied from<br>pagecache)</p>
<h2 id="wchar"><a href="#wchar" class="headerlink" title="wchar"></a>wchar</h2><p>I/O counter: chars written<br>The number of bytes which this task has caused, or shall cause to be written<br>to disk. Similar caveats apply here as with rchar.</p>
<h2 id="syscr"><a href="#syscr" class="headerlink" title="syscr"></a>syscr</h2><p>I/O counter: read syscalls<br>Attempt to count the number of read I/O operations, i.e. syscalls like read()<br>and pread().</p>
<h2 id="syscw"><a href="#syscw" class="headerlink" title="syscw"></a>syscw</h2><p>I/O counter: write syscalls<br>Attempt to count the number of write I/O operations, i.e. syscalls like<br>write() and pwrite().</p>
<h2 id="read-bytes"><a href="#read-bytes" class="headerlink" title="read_bytes"></a>read_bytes</h2><p>I/O counter: bytes read<br>Attempt to count the number of bytes which this process really did cause to<br>be fetched from the storage layer. Done at the submit_bio() level, so it is<br>accurate for block-backed filesystems. <please add status regarding NFS and
CIFS at a later time></p>
<h2 id="write-bytes"><a href="#write-bytes" class="headerlink" title="write_bytes"></a>write_bytes</h2><p>I/O counter: bytes written<br>Attempt to count the number of bytes which this process caused to be sent to<br>the storage layer. This is done at page-dirtying time.</p>
<h2 id="cancelled-write-bytes"><a href="#cancelled-write-bytes" class="headerlink" title="cancelled_write_bytes"></a>cancelled_write_bytes</h2><p>The big inaccuracy here is truncate. If a process writes 1MB to a file and<br>then deletes the file, it will in fact perform no writeout. But it will have<br>been accounted as having caused 1MB of write.<br>In other words: The number of bytes which this process caused to not happen,<br>by truncating pagecache. A task can cause “negative” IO too. If this task<br>truncates some dirty pagecache, some IO which another task has been accounted<br>for (in its write_bytes) will not be happening. We <em>could</em> just subtract that<br>from the truncating task’s write_bytes, but there is information loss in doing<br>that.</p>
<h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><p>At its current implementation state, this is a bit racy on 32-bit machines: if<br>process A reads process B’s /proc/pid/io while process B is updating one of<br>those 64-bit counters, process A could see an intermediate result.</p>
<p>More information about this can be found within the taskstats documentation in<br>Documentation/accounting.</p>
<h2 id="3-4-proc-coredump-filter-Core-dump-filtering-settings"><a href="#3-4-proc-coredump-filter-Core-dump-filtering-settings" class="headerlink" title="3.4 /proc//coredump_filter - Core dump filtering settings"></a>3.4 /proc/<pid>/coredump_filter - Core dump filtering settings</h2><p>When a process is dumped, all anonymous memory is written to a core file as<br>long as the size of the core file isn’t limited. But sometimes we don’t want<br>to dump some memory segments, for example, huge shared memory or DAX.<br>Conversely, sometimes we want to save file-backed memory segments into a core<br>file, not only the individual files.</p>
<p>/proc/<pid>/coredump_filter allows you to customize which memory segments<br>will be dumped when the <pid> process is dumped. coredump_filter is a bitmask<br>of memory types. If a bit of the bitmask is set, memory segments of the<br>corresponding memory type are dumped, otherwise they are not dumped.</p>
<p>The following 9 memory types are supported:</p>
<ul>
<li><p>(bit 0) anonymous private memory</p>
</li>
<li><p>(bit 1) anonymous shared memory</p>
</li>
<li><p>(bit 2) file-backed private memory</p>
</li>
<li><p>(bit 3) file-backed shared memory</p>
</li>
<li><p>(bit 4) ELF header pages in file-backed private memory areas (it is</p>
<pre><code>    effective only if the bit 2 is cleared)
</code></pre>
</li>
<li><p>(bit 5) hugetlb private memory</p>
</li>
<li><p>(bit 6) hugetlb shared memory</p>
</li>
<li><p>(bit 7) DAX private memory</p>
</li>
<li><p>(bit 8) DAX shared memory</p>
<p>Note that MMIO pages such as frame buffer are never dumped and vDSO pages<br>are always dumped regardless of the bitmask status.</p>
<p>Note that bits 0-4 don’t affect hugetlb or DAX memory. hugetlb memory is<br>only affected by bit 5-6, and DAX is only affected by bits 7-8.</p>
</li>
</ul>
<p>The default value of coredump_filter is 0x33; this means all anonymous memory<br>segments, ELF header pages and hugetlb private memory are dumped.</p>
<p>If you don’t want to dump all shared memory segments attached to pid 1234,<br>write 0x31 to the process’s proc file.</p>
<p>  $ echo 0x31 &gt; /proc/1234/coredump_filter</p>
<p>When a new process is created, the process inherits the bitmask status from its<br>parent. It is useful to set up coredump_filter before the program runs.<br>For example:</p>
<p>  $ echo 0x7 &gt; /proc/self/coredump_filter<br>  $ ./some_program</p>
<h2 id="3-5-proc-mountinfo-Information-about-mounts"><a href="#3-5-proc-mountinfo-Information-about-mounts" class="headerlink" title="3.5    /proc//mountinfo - Information about mounts"></a>3.5    /proc/<pid>/mountinfo - Information about mounts</h2><p>This file contains lines of the form:</p>
<p>36 35 98:0 /mnt1 /mnt2 rw,noatime master:1 - ext3 /dev/root rw,errors=continue<br>(1)(2)(3)   (4)   (5)      (6)      (7)   (8) (9)   (10)         (11)</p>
<p>(1) mount ID:  unique identifier of the mount (may be reused after umount)<br>(2) parent ID:  ID of parent (or of self for the top of the mount tree)<br>(3) major:minor:  value of st_dev for files on filesystem<br>(4) root:  root of the mount within the filesystem<br>(5) mount point:  mount point relative to the process’s root<br>(6) mount options:  per mount options<br>(7) optional fields:  zero or more fields of the form “tag[:value]”<br>(8) separator:  marks the end of the optional fields<br>(9) filesystem type:  name of filesystem of the form “type[.subtype]”<br>(10) mount source:  filesystem specific information or “none”<br>(11) super options:  per super block options</p>
<p>Parsers should ignore all unrecognised optional fields.  Currently the<br>possible optional fields are:</p>
<p>shared:X  mount is shared in peer group X<br>master:X  mount is slave to peer group X<br>propagate_from:X  mount is slave and receives propagation from peer group X (*)<br>unbindable  mount is unbindable</p>
<p>(*) X is the closest dominant peer group under the process’s root.  If<br>X is the immediate master of the mount, or if there’s no dominant peer<br>group under the same root, then only the “master:X” field is present<br>and not the “propagate_from:X” field.</p>
<p>For more information on mount propagation see:</p>
<p>  Documentation/filesystems/sharedsubtree.txt</p>
<h2 id="3-6-proc-comm-amp-proc-task-comm"><a href="#3-6-proc-comm-amp-proc-task-comm" class="headerlink" title="3.6    /proc//comm  &amp; /proc//task//comm"></a>3.6    /proc/<pid>/comm  &amp; /proc/<pid>/task/<tid>/comm</h2><p>These files provide a method to access a tasks comm value. It also allows for<br>a task to set its own or one of its thread siblings comm value. The comm value<br>is limited in size compared to the cmdline value, so writing anything longer<br>then the kernel’s TASK_COMM_LEN (currently 16 chars) will result in a truncated<br>comm value.</p>
<h2 id="3-7-proc-task-children-Information-about-task-children"><a href="#3-7-proc-task-children-Information-about-task-children" class="headerlink" title="3.7    /proc//task//children - Information about task children"></a>3.7    /proc/<pid>/task/<tid>/children - Information about task children</h2><p>This file provides a fast way to retrieve first level children pids<br>of a task pointed by <pid>/<tid> pair. The format is a space separated<br>stream of pids.</p>
<p>Note the “first level” here – if a child has own children they will<br>not be listed here, one needs to read /proc/<children-pid>/task/<tid>/children<br>to obtain the descendants.</p>
<p>Since this interface is intended to be fast and cheap it doesn’t<br>guarantee to provide precise results and some children might be<br>skipped, especially if they’ve exited right after we printed their<br>pids, so one need to either stop or freeze processes being inspected<br>if precise results are needed.</p>
<h2 id="3-8-proc-fdinfo-Information-about-opened-file"><a href="#3-8-proc-fdinfo-Information-about-opened-file" class="headerlink" title="3.8    /proc//fdinfo/ - Information about opened file"></a>3.8    /proc/<pid>/fdinfo/<fd> - Information about opened file</h2><p>This file provides information associated with an opened file. The regular<br>files have at least three fields – ‘pos’, ‘flags’ and mnt_id. The ‘pos’<br>represents the current offset of the opened file in decimal form [see lseek(2)<br>for details], ‘flags’ denotes the octal O_xxx mask the file has been<br>created with [see open(2) for details] and ‘mnt_id’ represents mount ID of<br>the file system containing the opened file [see 3.5 /proc/<pid>/mountinfo<br>for details].</p>
<p>A typical output is</p>
<pre><code>pos:    0
flags:    0100002
mnt_id:    19
</code></pre>
<p>All locks associated with a file descriptor are shown in its fdinfo too.</p>
<p>lock:       1: FLOCK  ADVISORY  WRITE 359 00:13:11691 0 EOF</p>
<p>The files such as eventfd, fsnotify, signalfd, epoll among the regular pos/flags<br>pair provide additional information particular to the objects they represent.</p>
<pre><code>Eventfd files
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">pos:	0</span><br><span class="line">flags:	04002</span><br><span class="line">mnt_id:	9</span><br><span class="line">eventfd-count:	5a</span><br><span class="line"></span><br><span class="line">where &#39;eventfd-count&#39; is hex value of a counter.</span><br><span class="line"></span><br><span class="line">Signalfd files</span><br><span class="line">~~~~~~~~~~~~~~</span><br><span class="line">pos:	0</span><br><span class="line">flags:	04002</span><br><span class="line">mnt_id:	9</span><br><span class="line">sigmask:	0000000000000200</span><br><span class="line"></span><br><span class="line">where &#39;sigmask&#39; is hex value of the signal mask associated</span><br><span class="line">with a file.</span><br><span class="line"></span><br><span class="line">Epoll files</span><br><span class="line">~~~~~~~~~~~</span><br><span class="line">pos:	0</span><br><span class="line">flags:	02</span><br><span class="line">mnt_id:	9</span><br><span class="line">tfd:        5 events:       1d data: ffffffffffffffff pos:0 ino:61af sdev:7</span><br><span class="line"></span><br><span class="line">where &#39;tfd&#39; is a target file descriptor number in decimal form,</span><br><span class="line">&#39;events&#39; is events mask being watched and the &#39;data&#39; is data</span><br><span class="line">associated with a target [see epoll(7) for more details].</span><br><span class="line"></span><br><span class="line">The &#39;pos&#39; is current offset of the target file in decimal form</span><br><span class="line">[see lseek(2)], &#39;ino&#39; and &#39;sdev&#39; are inode and device numbers</span><br><span class="line">where target file resides, all in hex format.</span><br><span class="line"></span><br><span class="line">Fsnotify files</span><br><span class="line">~~~~~~~~~~~~~~</span><br><span class="line">For inotify files the format is the following</span><br><span class="line"></span><br><span class="line">pos:	0</span><br><span class="line">flags:	02000000</span><br><span class="line">inotify wd:3 ino:9e7e sdev:800013 mask:800afce ignored_mask:0 fhandle-bytes:8 fhandle-type:1 f_handle:7e9e0000640d1b6d</span><br><span class="line"></span><br><span class="line">where &#39;wd&#39; is a watch descriptor in decimal form, ie a target file</span><br><span class="line">descriptor number, &#39;ino&#39; and &#39;sdev&#39; are inode and device where the</span><br><span class="line">target file resides and the &#39;mask&#39; is the mask of events, all in hex</span><br><span class="line">form [see inotify(7) for more details].</span><br><span class="line"></span><br><span class="line">If the kernel was built with exportfs support, the path to the target</span><br><span class="line">file is encoded as a file handle.  The file handle is provided by three</span><br><span class="line">fields &#39;fhandle-bytes&#39;, &#39;fhandle-type&#39; and &#39;f_handle&#39;, all in hex</span><br><span class="line">format.</span><br><span class="line"></span><br><span class="line">If the kernel is built without exportfs support the file handle won&#39;t be</span><br><span class="line">printed out.</span><br><span class="line"></span><br><span class="line">If there is no inotify mark attached yet the &#39;inotify&#39; line will be omitted.</span><br><span class="line"></span><br><span class="line">For fanotify files the format is</span><br><span class="line"></span><br><span class="line">pos:	0</span><br><span class="line">flags:	02</span><br><span class="line">mnt_id:	9</span><br><span class="line">fanotify flags:10 event-flags:0</span><br><span class="line">fanotify mnt_id:12 mflags:40 mask:38 ignored_mask:40000003</span><br><span class="line">fanotify ino:4f969 sdev:800013 mflags:0 mask:3b ignored_mask:40000000 fhandle-bytes:8 fhandle-type:1 f_handle:69f90400c275b5b4</span><br><span class="line"></span><br><span class="line">where fanotify &#39;flags&#39; and &#39;event-flags&#39; are values used in fanotify_init</span><br><span class="line">call, &#39;mnt_id&#39; is the mount point identifier, &#39;mflags&#39; is the value of</span><br><span class="line">flags associated with mark which are tracked separately from events</span><br><span class="line">mask. &#39;ino&#39;, &#39;sdev&#39; are target inode and device, &#39;mask&#39; is the events</span><br><span class="line">mask and &#39;ignored_mask&#39; is the mask of events which are to be ignored.</span><br><span class="line">All in hex format. Incorporation of &#39;mflags&#39;, &#39;mask&#39; and &#39;ignored_mask&#39;</span><br><span class="line">does provide information about flags and mask used in fanotify_mark</span><br><span class="line">call [see fsnotify manpage for details].</span><br><span class="line"></span><br><span class="line">While the first three lines are mandatory and always printed, the rest is</span><br><span class="line">optional and may be omitted if no marks created yet.</span><br><span class="line"></span><br><span class="line">Timerfd files</span><br></pre></td></tr></table></figure>

pos:    0
flags:    02
mnt_id:    9
clockid: 0
ticks: 0
settime flags: 01
it_value: (0, 49406829)
it_interval: (1, 0)

where &#39;clockid&#39; is the clock type and &#39;ticks&#39; is the number of the timer expirations
that have occurred [see timerfd_create(2) for details]. &#39;settime flags&#39; are
flags in octal form been used to setup the timer [see timerfd_settime(2) for
details]. &#39;it_value&#39; is remaining time until the timer exiration.
&#39;it_interval&#39; is the interval for the timer. Note the timer might be set up
with TIMER_ABSTIME option which will be shown in &#39;settime flags&#39;, but &#39;it_value&#39;
still exhibits timer&#39;s remaining time.
</code></pre>
<h2 id="3-9-proc-map-files-Information-about-memory-mapped-files"><a href="#3-9-proc-map-files-Information-about-memory-mapped-files" class="headerlink" title="3.9    /proc//map_files - Information about memory mapped files"></a>3.9    /proc/<pid>/map_files - Information about memory mapped files</h2><p>This directory contains symbolic links which represent memory mapped files<br>the process is maintaining.  Example output:</p>
<pre><code> | lr-------- 1 root root 64 Jan 27 11:24 333c600000-333c620000 -&gt; /usr/lib64/ld-2.18.so
 | lr-------- 1 root root 64 Jan 27 11:24 333c81f000-333c820000 -&gt; /usr/lib64/ld-2.18.so
 | lr-------- 1 root root 64 Jan 27 11:24 333c820000-333c821000 -&gt; /usr/lib64/ld-2.18.so
 | ...
 | lr-------- 1 root root 64 Jan 27 11:24 35d0421000-35d0422000 -&gt; /usr/lib64/libselinux.so.1
 | lr-------- 1 root root 64 Jan 27 11:24 400000-41a000 -&gt; /usr/bin/ls
</code></pre>
<p>The name of a link represents the virtual memory bounds of a mapping, i.e.<br>vm_area_struct::vm_start-vm_area_struct::vm_end.</p>
<p>The main purpose of the map_files is to retrieve a set of memory mapped<br>files in a fast way instead of parsing /proc/<pid>/maps or<br>/proc/<pid>/smaps, both of which contain many more records.  At the same<br>time one can open(2) mappings from the listings of two processes and<br>comparing their inode numbers to figure out which anonymous memory areas<br>are actually shared.</p>
<h2 id="3-10-proc-timerslack-ns-Task-timerslack-value"><a href="#3-10-proc-timerslack-ns-Task-timerslack-value" class="headerlink" title="3.10    /proc//timerslack_ns - Task timerslack value"></a>3.10    /proc/<pid>/timerslack_ns - Task timerslack value</h2><p>This file provides the value of the task’s timerslack value in nanoseconds.<br>This value specifies a amount of time that normal timers may be deferred<br>in order to coalesce timers and avoid unnecessary wakeups.</p>
<p>This allows a task’s interactivity vs power consumption trade off to be<br>adjusted.</p>
<p>Writing 0 to the file will set the tasks timerslack to the default value.</p>
<p>Valid values are from 0 - ULLONG_MAX</p>
<p>An application setting the value must have PTRACE_MODE_ATTACH_FSCREDS level<br>permissions on the task specified to change its timerslack_ns value.</p>
<h2 id="3-11-proc-patch-state-Livepatch-patch-operation-state"><a href="#3-11-proc-patch-state-Livepatch-patch-operation-state" class="headerlink" title="3.11    /proc//patch_state - Livepatch patch operation state"></a>3.11    /proc/<pid>/patch_state - Livepatch patch operation state</h2><p>When CONFIG_LIVEPATCH is enabled, this file displays the value of the<br>patch state for the task.</p>
<p>A value of ‘-1’ indicates that no patch is in transition.</p>
<p>A value of ‘0’ indicates that a patch is in transition and the task is<br>unpatched.  If the patch is being enabled, then the task hasn’t been<br>patched yet.  If the patch is being disabled, then the task has already<br>been unpatched.</p>
<p>A value of ‘1’ indicates that a patch is in transition and the task is<br>patched.  If the patch is being enabled, then the task has already been<br>patched.  If the patch is being disabled, then the task hasn’t been<br>unpatched yet.</p>
<hr>
<h2 id="Configuring-procfs"><a href="#Configuring-procfs" class="headerlink" title="Configuring procfs"></a>Configuring procfs</h2><h2 id="4-1-Mount-options"><a href="#4-1-Mount-options" class="headerlink" title="4.1    Mount options"></a>4.1    Mount options</h2><p>The following mount options are supported:</p>
<pre><code>hidepid=    Set /proc/&lt;pid&gt;/ access mode.
gid=        Set the group authorized to learn processes information.
</code></pre>
<p>hidepid=0 means classic mode - everybody may access all /proc/<pid>/ directories<br>(default).</p>
<p>hidepid=1 means users may not access any /proc/<pid>/ directories but their<br>own.  Sensitive files like cmdline, sched*, status are now protected against<br>other users.  This makes it impossible to learn whether any user runs<br>specific program (given the program doesn’t reveal itself by its behaviour).<br>As an additional bonus, as /proc/<pid>/cmdline is unaccessible for other users,<br>poorly written programs passing sensitive information via program arguments are<br>now protected against local eavesdroppers.</p>
<p>hidepid=2 means hidepid=1 plus all /proc/<pid>/ will be fully invisible to other<br>users.  It doesn’t mean that it hides a fact whether a process with a specific<br>pid value exists (it can be learned by other means, e.g. by “kill -0 $PID”),<br>but it hides process’ uid and gid, which may be learned by stat()’ing<br>/proc/<pid>/ otherwise.  It greatly complicates an intruder’s task of gathering<br>information about running processes, whether some daemon runs with elevated<br>privileges, whether other user runs some sensitive program, whether other users<br>run any program at all, etc.</p>
<p>gid= defines a group authorized to learn processes information otherwise<br>prohibited by hidepid=.  If you use some daemon like identd which needs to learn<br>information about processes information, just add identd to this group.</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_proc/" title="Kernel-4.18.0-80.el8_proc" target="_blank" rel="external">http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_proc/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_dax-hv-api/" title="Kernel-4.18.0-80.el8_dax-hv-api"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_digicolor-wdt/" title="Kernel-4.18.0-80.el8_digicolor-wdt"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>