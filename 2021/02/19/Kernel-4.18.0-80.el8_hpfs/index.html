<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-4.18.0-80.el8_hpfs | oosTech.com</title>
  <meta name="description" content="Read&#x2F;Write HPFS 2.091998-2004, Mikulas Patocka email: &amp;#109;&amp;#105;&amp;#107;&amp;#x75;&amp;#108;&amp;#97;&amp;#115;&amp;#64;&amp;#x61;&amp;#x72;&amp;#116;&amp;#97;&amp;#x78;&amp;#x2e;&amp;#x6b;&amp;#x61;&amp;#x72;&amp;#x6c;&amp;#105;&amp;#x6e;&amp;#46;&amp;#x6d;&amp;#x66;&amp;#x66;&amp;#x2e;">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-4.18.0-80.el8_hpfs">
<meta property="og:url" content="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_hpfs/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="Read&#x2F;Write HPFS 2.091998-2004, Mikulas Patocka email: &amp;#109;&amp;#105;&amp;#107;&amp;#x75;&amp;#108;&amp;#97;&amp;#115;&amp;#64;&amp;#x61;&amp;#x72;&amp;#116;&amp;#97;&amp;#x78;&amp;#x2e;&amp;#x6b;&amp;#x61;&amp;#x72;&amp;#x6c;&amp;#105;&amp;#x6e;&amp;#46;&amp;#x6d;&amp;#x66;&amp;#x66;&amp;#x2e;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:modified_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_hpfs/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_mpc5200/" class="title">Kernel-3.10.0-957.el7_mpc5200</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_6pack/" class="title">Kernel-3.10.0-957.el7_6pack</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-4.18.0-80.el8_hpfs" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-4.18.0-80.el8_hpfs
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_hpfs/" class="article-date">
	 published: <time datetime="2021-02-18T16:00:00.000Z" itemprop="datePublished">2021-02-19</time>
	</a>
</span>

        
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_hpfs/" class="article-date">
	   updated: <time datetime="2021-02-18T16:00:00.000Z" itemprop="dateUpdated">2021-02-19</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/02/19/Kernel-4.18.0-80.el8_hpfs/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>Read/Write HPFS 2.09<br>1998-2004, Mikulas Patocka</p>
<p>email: <a href="mailto:&#109;&#105;&#107;&#x75;&#108;&#97;&#115;&#64;&#x61;&#x72;&#116;&#97;&#x78;&#x2e;&#x6b;&#x61;&#x72;&#x6c;&#105;&#x6e;&#46;&#x6d;&#x66;&#x66;&#x2e;&#99;&#x75;&#x6e;&#105;&#46;&#99;&#x7a;">&#109;&#105;&#107;&#x75;&#108;&#97;&#115;&#64;&#x61;&#x72;&#116;&#97;&#x78;&#x2e;&#x6b;&#x61;&#x72;&#x6c;&#105;&#x6e;&#46;&#x6d;&#x66;&#x66;&#x2e;&#99;&#x75;&#x6e;&#105;&#46;&#99;&#x7a;</a><br>homepage: <a target="_blank" rel="noopener" href="http://artax.karlin.mff.cuni.cz/~mikulas/vyplody/hpfs/index-e.cgi">http://artax.karlin.mff.cuni.cz/~mikulas/vyplody/hpfs/index-e.cgi</a></p>
<p>CREDITS:<br>Chris Smith, 1993, original read-only HPFS, some code and hpfs structures file<br>    is taken from it<br>Jacques Gelinas, MSDos mmap, Inspired by fs/nfs/mmap.c (Jon Tombs 15 Aug 1993)<br>Werner Almesberger, 1992, 1993, MSDos option parser &amp; CR/LF conversion</p>
<p>Mount options</p>
<p>uid=xxx,gid=xxx,umask=xxx (default uid=gid=0 umask=default_system_umask)<br>    Set owner/group/mode for files that do not have it specified in extended<br>    attributes. Mode is inverted umask - for example umask 027 gives owner<br>    all permission, group read permission and anybody else no access. Note<br>    that for files mode is anded with 0666. If you want files to have ‘x’<br>    rights, you must use extended attributes.<br>case=lower,asis (default asis)<br>    File name lowercasing in readdir.<br>conv=binary,text,auto (default binary)<br>    CR/LF -&gt; LF conversion, if auto, decision is made according to extension<br>    - there is a list of text extensions (I thing it’s better to not convert<br>    text file than to damage binary file). If you want to change that list,<br>    change it in the source. Original readonly HPFS contained some strange<br>    heuristic algorithm that I removed. I thing it’s danger to let the<br>    computer decide whether file is text or binary. For example, DJGPP<br>    binaries contain small text message at the beginning and they could be<br>    misidentified and damaged under some circumstances.<br>check=none,normal,strict (default normal)<br>    Check level. Selecting none will cause only little speedup and big<br>    danger. I tried to write it so that it won’t crash if check=normal on<br>    corrupted filesystems. check=strict means many superfluous checks -<br>    used for debugging (for example it checks if file is allocated in<br>    bitmaps when accessing it).<br>errors=continue,remount-ro,panic (default remount-ro)<br>    Behaviour when filesystem errors found.<br>chkdsk=no,errors,always (default errors)<br>    When to mark filesystem dirty so that OS/2 checks it.<br>eas=no,ro,rw (default rw)<br>    What to do with extended attributes. ‘no’ - ignore them and use always<br>    values specified in uid/gid/mode options. ‘ro’ - read extended<br>    attributes but do not create them. ‘rw’ - create extended attributes<br>    when you use chmod/chown/chgrp/mknod/ln -s on the filesystem.<br>timeshift=(-)nnn (default 0)<br>    Shifts the time by nnn seconds. For example, if you see under linux<br>    one hour more, than under os/2, use timeshift=-3600.</p>
<p>File names</p>
<p>As in OS/2, filenames are case insensitive. However, shell thinks that names<br>are case sensitive, so for example when you create a file FOO, you can use<br>‘cat FOO’, ‘cat Foo’, ‘cat foo’ or ‘cat F*’ but not ‘cat f*’. Note, that you<br>also won’t be able to compile linux kernel (and maybe other things) on HPFS<br>because kernel creates different files with names like bootsect.S and<br>bootsect.s. When searching for file thats name has characters &gt;= 128, codepages<br>are used - see below.<br>OS/2 ignores dots and spaces at the end of file name, so this driver does as<br>well. If you create ‘a. …’, the file ‘a’ will be created, but you can still<br>access it under names ‘a.’, ‘a..’, ‘a .  . . ‘ etc.</p>
<p>Extended attributes</p>
<p>On HPFS partitions, OS/2 can associate to each file a special information called<br>extended attributes. Extended attributes are pairs of (key,value) where key is<br>an ascii string identifying that attribute and value is any string of bytes of<br>variable length. OS/2 stores window and icon positions and file types there. So<br>why not use it for unix-specific info like file owner or access rights? This<br>driver can do it. If you chown/chgrp/chmod on a hpfs partition, extended<br>attributes with keys “UID”, “GID” or “MODE” and 2-byte values are created. Only<br>that extended attributes those value differs from defaults specified in mount<br>options are created. Once created, the extended attributes are never deleted,<br>they’re just changed. It means that when your default uid=0 and you type<br>something like ‘chown luser file; chown root file’ the file will contain<br>extended attribute UID=0. And when you umount the fs and mount it again with<br>uid=luser_uid, the file will be still owned by root! If you chmod file to 444,<br>extended attribute “MODE” will not be set, this special case is done by setting<br>read-only flag. When you mknod a block or char device, besides “MODE”, the<br>special 4-byte extended attribute “DEV” will be created containing the device<br>number. Currently this driver cannot resize extended attributes - it means<br>that if somebody (I don’t know who?) has set “UID”, “GID”, “MODE” or “DEV”<br>attributes with different sizes, they won’t be rewritten and changing these<br>values doesn’t work.</p>
<p>Symlinks</p>
<p>You can do symlinks on HPFS partition, symlinks are achieved by setting extended<br>attribute named “SYMLINK” with symlink value. Like on ext2, you can chown and<br>chgrp symlinks but I don’t know what is it good for. chmoding symlink results<br>in chmoding file where symlink points. These symlinks are just for Linux use and<br>incompatible with OS/2. OS/2 PmShell symlinks are not supported because they are<br>stored in very crazy way. They tried to do it so that link changes when file is<br>moved … sometimes it works. But the link is partly stored in directory<br>extended attributes and partly in OS2SYS.INI. I don’t want (and don’t know how)<br>to analyze or change OS2SYS.INI.</p>
<p>Codepages</p>
<p>HPFS can contain several uppercasing tables for several codepages and each<br>file has a pointer to codepage its name is in. However OS/2 was created in<br>America where people don’t care much about codepages and so multiple codepages<br>support is quite buggy. I have Czech OS/2 working in codepage 852 on my disk.<br>Once I booted English OS/2 working in cp 850 and I created a file on my 852<br>partition. It marked file name codepage as 850 - good. But when I again booted<br>Czech OS/2, the file was completely inaccessible under any name. It seems that<br>OS/2 uppercases the search pattern with its system code page (852) and file<br>name it’s comparing to with its code page (850). These could never match. Is it<br>really what IBM developers wanted? But problems continued. When I created in<br>Czech OS/2 another file in that directory, that file was inaccessible too. OS/2<br>probably uses different uppercasing method when searching where to place a file<br>(note, that files in HPFS directory must be sorted) and when searching for<br>a file. Finally when I opened this directory in PmShell, PmShell crashed (the<br>funny thing was that, when rebooted, PmShell tried to reopen this directory<br>again :-). chkdsk happily ignores these errors and only low-level disk<br>modification saved me.  Never mix different language versions of OS/2 on one<br>system although HPFS was designed to allow that.<br>OK, I could implement complex codepage support to this driver but I think it<br>would cause more problems than benefit with such buggy implementation in OS/2.<br>So this driver simply uses first codepage it finds for uppercasing and<br>lowercasing no matter what’s file codepage index. Usually all file names are in<br>this codepage - if you don’t try to do what I described above :-)</p>
<p>Known bugs</p>
<p>HPFS386 on OS/2 server is not supported. HPFS386 installed on normal OS/2 client<br>should work. If you have OS/2 server, use only read-only mode. I don’t know how<br>to handle some HPFS386 structures like access control list or extended perm<br>list, I don’t know how to delete them when file is deleted and how to not<br>overwrite them with extended attributes. Send me some info on these structures<br>and I’ll make it. However, this driver should detect presence of HPFS386<br>structures, remount read-only and not destroy them (I hope).</p>
<p>When there’s not enough space for extended attributes, they will be truncated<br>and no error is returned.</p>
<p>OS/2 can’t access files if the path is longer than about 256 chars but this<br>driver allows you to do it. chkdsk ignores such errors.</p>
<p>Sometimes you won’t be able to delete some files on a very full filesystem<br>(returning error ENOSPC). That’s because file in non-leaf node in directory tree<br>(one directory, if it’s large, has dirents in tree on HPFS) must be replaced<br>with another node when deleted. And that new file might have larger name than<br>the old one so the new name doesn’t fit in directory node (dnode). And that<br>would result in directory tree splitting, that takes disk space. Workaround is<br>to delete other files that are leaf (probability that the file is non-leaf is<br>about 1/50) or to truncate file first to make some space.<br>You encounter this problem only if you have many directories so that<br>preallocated directory band is full i.e.<br>    number_of_directories / size_of_filesystem_in_mb &gt; 4.</p>
<p>You can’t delete open directories.</p>
<p>You can’t rename over directories (what is it good for?).</p>
<p>Renaming files so that only case changes doesn’t work. This driver supports it<br>but vfs doesn’t. Something like ‘mv file FILE’ won’t work.</p>
<p>All atimes and directory mtimes are not updated. That’s because of performance<br>reasons. If you extremely wish to update them, let me know, I’ll write it (but<br>it will be slow).</p>
<p>When the system is out of memory and swap, it may slightly corrupt filesystem<br>(lost files, unbalanced directories). (I guess all filesystem may do it).</p>
<p>When compiled, you get warning: function declaration isn’t a prototype. Does<br>anybody know what does it mean?</p>
<p>What does “unbalanced tree” message mean?</p>
<p>Old versions of this driver created sometimes unbalanced dnode trees. OS/2<br>chkdsk doesn’t scream if the tree is unbalanced (and sometimes creates<br>unbalanced trees too :-) but both HPFS and HPFS386 contain bug that it rarely<br>crashes when the tree is not balanced. This driver handles unbalanced trees<br>correctly and writes warning if it finds them. If you see this message, this is<br>probably because of directories created with old version of this driver.<br>Workaround is to move all files from that directory to another and then back<br>again. Do it in Linux, not OS/2! If you see this message in directory that is<br>whole created by this driver, it is BUG - let me know about it.</p>
<p>Bugs in OS/2</p>
<p>When you have two (or more) lost directories pointing each to other, chkdsk<br>locks up when repairing filesystem.</p>
<p>Sometimes (I think it’s random) when you create a file with one-char name under<br>OS/2, OS/2 marks it as ‘long’. chkdsk then removes this flag saying “Minor fs<br>error corrected”.</p>
<p>File names like “a .b” are marked as ‘long’ by OS/2 but chkdsk “corrects” it and<br>marks them as short (and writes “minor fs error corrected”). This bug is not in<br>HPFS386.</p>
<p>Codepage bugs described above.</p>
<p>If you don’t install fixpacks, there are many, many more…</p>
<p>History</p>
<p>0.90 First public release<br>0.91 Fixed bug that caused shooting to memory when write_inode was called on<br>    open inode (rarely happened)<br>0.92 Fixed a little memory leak in freeing directory inodes<br>0.93 Fixed bug that locked up the machine when there were too many filenames<br>    with first 15 characters same<br>     Fixed write_file to zero file when writing behind file end<br>0.94 Fixed a little memory leak when trying to delete busy file or directory<br>0.95 Fixed a bug that i_hpfs_parent_dir was not updated when moving files<br>1.90 First version for 2.1.1xx kernels<br>1.91 Fixed a bug that chk_sectors failed when sectors were at the end of disk<br>     Fixed a race-condition when write_inode is called while deleting file<br>     Fixed a bug that could possibly happen (with very low probability) when<br>         using 0xff in filenames<br>     Rewritten locking to avoid race-conditions<br>     Mount option ‘eas’ now works<br>     Fsync no longer returns error<br>     Files beginning with ‘.’ are marked hidden<br>     Remount support added<br>     Alloc is not so slow when filesystem becomes full<br>     Atimes are no more updated because it slows down operation<br>     Code cleanup (removed all commented debug prints)<br>1.92 Corrected a bug when sync was called just before closing file<br>1.93 Modified, so that it works with kernels &gt;= 2.1.131, I don’t know if it<br>    works with previous versions<br>     Fixed a possible problem with disks &gt; 64G (but I don’t have one, so I can’t<br>         test it)<br>     Fixed a file overflow at 2G<br>     Added new option ‘timeshift’<br>     Changed behaviour on HPFS386: It is now possible to operate on HPFS386 in<br>         read-only mode<br>     Fixed a bug that slowed down alloc and prevented allocating 100% space<br>         (this bug was not destructive)<br>1.94 Added workaround for one bug in Linux<br>     Fixed one buffer leak<br>     Fixed some incompatibilities with large extended attributes (but it’s still<br>    not 100% ok, I have no info on it and OS/2 doesn’t want to create them)<br>     Rewritten allocation<br>     Fixed a bug with i_blocks (du sometimes didn’t display correct values)<br>     Directories have no longer archive attribute set (some programs don’t like<br>    it)<br>     Fixed a bug that it set badly one flag in large anode tree (it was not<br>    destructive)<br>1.95 Fixed one buffer leak, that could happen on corrupted filesystem<br>     Fixed one bug in allocation in 1.94<br>1.96 Added workaround for one bug in OS/2 (HPFS locked up, HPFS386 reported<br>    error sometimes when opening directories in PMSHELL)<br>     Fixed a possible bitmap race<br>     Fixed possible problem on large disks<br>     You can now delete open files<br>     Fixed a nondestructive race in rename<br>1.97 Support for HPFS v3 (on large partitions)<br>     Fixed a bug that it didn’t allow creation of files &gt; 128M (it should be 2G)<br>1.97.1 Changed names of global symbols<br>       Fixed a bug when chmoding or chowning root directory<br>1.98 Fixed a deadlock when using old_readdir<br>     Better directory handling; workaround for “unbalanced tree” bug in OS/2<br>1.99 Corrected a possible problem when there’s not enough space while deleting<br>    file<br>     Now it tries to truncate the file if there’s not enough space when deleting<br>     Removed a lot of redundant code<br>2.00 Fixed a bug in rename (it was there since 1.96)<br>     Better anti-fragmentation strategy<br>2.01 Fixed problem with directory listing over NFS<br>     Directory lseek now checks for proper parameters<br>     Fixed race-condition in buffer code - it is in all filesystems in Linux;<br>        when reading device (cat /dev/hda) while creating files on it, files<br>        could be damaged<br>2.02 Workaround for bug in breada in Linux. breada could cause accesses beyond<br>        end of partition<br>2.03 Char, block devices and pipes are correctly created<br>     Fixed non-crashing race in unlink (Alexander Viro)<br>     Now it works with Japanese version of OS/2<br>2.04 Fixed error when ftruncate used to extend file<br>2.05 Fixed crash when got mount parameters without =<br>     Fixed crash when allocation of anode failed due to full disk<br>     Fixed some crashes when block io or inode allocation failed<br>2.06 Fixed some crash on corrupted disk structures<br>     Better allocation strategy<br>     Reschedule points added so that it doesn’t lock CPU long time<br>     It should work in read-only mode on Warp Server<br>2.07 More fixes for Warp Server. Now it really works<br>2.08 Creating new files is not so slow on large disks<br>     An attempt to sync deleted file does not generate filesystem error<br>2.09 Fixed error on extremely fragmented files</p>
<p> vim: set textwidth=80:</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_hpfs/" title="Kernel-4.18.0-80.el8_hpfs" target="_blank" rel="external">http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_hpfs/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_hpet/" title="Kernel-4.18.0-80.el8_hpet"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_hpsa/" title="Kernel-4.18.0-80.el8_hpsa"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>