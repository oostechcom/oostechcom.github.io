<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-4.18.0-80.el8_xfs | oosTech.com</title>
  <meta name="description" content="The SGI XFS FilesystemXFS is a high performance journaling filesystem which originatedon the SGI IRIX platform.  It is completely multi-threaded, cansupport large files and large filesystems, extended">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-4.18.0-80.el8_xfs">
<meta property="og:url" content="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_xfs/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="The SGI XFS FilesystemXFS is a high performance journaling filesystem which originatedon the SGI IRIX platform.  It is completely multi-threaded, cansupport large files and large filesystems, extended">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:modified_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_xfs/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#The-SGI-XFS-Filesystem"><span class="toc-number">1.</span> <span class="toc-text">The SGI XFS Filesystem</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mount-Options"><span class="toc-number">2.</span> <span class="toc-text">Mount Options</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Deprecated-Mount-Options"><span class="toc-number">3.</span> <span class="toc-text">Deprecated Mount Options</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Removed-Mount-Options"><span class="toc-number">4.</span> <span class="toc-text">Removed Mount Options</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sysctls"><span class="toc-number">5.</span> <span class="toc-text">sysctls</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Deprecated-Sysctls"><span class="toc-number">6.</span> <span class="toc-text">Deprecated Sysctls</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Removed-Sysctls"><span class="toc-number">7.</span> <span class="toc-text">Removed Sysctls</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Error-handling"><span class="toc-number">8.</span> <span class="toc-text">Error handling</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-4.18.0-80.el8_xfs" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-4.18.0-80.el8_xfs
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_xfs/" class="article-date">
	 published: <time datetime="2021-02-18T16:00:00.000Z" itemprop="datePublished">2021-02-19</time>
	</a>
</span>

        
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_xfs/" class="article-date">
	   updated: <time datetime="2021-02-18T16:00:00.000Z" itemprop="dateUpdated">2021-02-19</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/02/19/Kernel-4.18.0-80.el8_xfs/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="The-SGI-XFS-Filesystem"><a href="#The-SGI-XFS-Filesystem" class="headerlink" title="The SGI XFS Filesystem"></a>The SGI XFS Filesystem</h1><p>XFS is a high performance journaling filesystem which originated<br>on the SGI IRIX platform.  It is completely multi-threaded, can<br>support large files and large filesystems, extended attributes,<br>variable block sizes, is extent based, and makes extensive use of<br>Btrees (directories, extents, free space) to aid both performance<br>and scalability.</p>
<p>Refer to the documentation at <a target="_blank" rel="noopener" href="https://xfs.wiki.kernel.org/">https://xfs.wiki.kernel.org/</a><br>for further details.  This implementation is on-disk compatible<br>with the IRIX version of XFS.</p>
<h1 id="Mount-Options"><a href="#Mount-Options" class="headerlink" title="Mount Options"></a>Mount Options</h1><p>When mounting an XFS filesystem, the following options are accepted.<br>For boolean mount options, the names with the (*) suffix is the<br>default behaviour.</p>
<p>  allocsize=size<br>    Sets the buffered I/O end-of-file preallocation size when<br>    doing delayed allocation writeout (default size is 64KiB).<br>    Valid values for this option are page size (typically 4KiB)<br>    through to 1GiB, inclusive, in power-of-2 increments.</p>
<pre><code>The default behaviour is for dynamic end-of-file
preallocation size, which uses a set of heuristics to
optimise the preallocation size based on the current
allocation patterns within the file and the access patterns
to the file. Specifying a fixed allocsize value turns off
the dynamic behaviour.
</code></pre>
<p>  attr2<br>  noattr2<br>    The options enable/disable an “opportunistic” improvement to<br>    be made in the way inline extended attributes are stored<br>    on-disk.  When the new form is used for the first time when<br>    attr2 is selected (either when setting or removing extended<br>    attributes) the on-disk superblock feature bit field will be<br>    updated to reflect this format being in use.</p>
<pre><code>The default behaviour is determined by the on-disk feature
bit indicating that attr2 behaviour is active. If either
mount option it set, then that becomes the new default used
by the filesystem.

CRC enabled filesystems always use the attr2 format, and so
will reject the noattr2 mount option if it is set.
</code></pre>
<p>  discard<br>  nodiscard (*)<br>    Enable/disable the issuing of commands to let the block<br>    device reclaim space freed by the filesystem.  This is<br>    useful for SSD devices, thinly provisioned LUNs and virtual<br>    machine images, but may have a performance impact.</p>
<pre><code>Note: It is currently recommended that you use the fstrim
application to discard unused blocks rather than the discard
mount option because the performance impact of this option
is quite severe.
</code></pre>
<p>  grpid/bsdgroups<br>  nogrpid/sysvgroups (*)<br>    These options define what group ID a newly created file<br>    gets.  When grpid is set, it takes the group ID of the<br>    directory in which it is created; otherwise it takes the<br>    fsgid of the current process, unless the directory has the<br>    setgid bit set, in which case it takes the gid from the<br>    parent directory, and also gets the setgid bit set if it is<br>    a directory itself.</p>
<p>  filestreams<br>    Make the data allocator use the filestreams allocation mode<br>    across the entire filesystem rather than just on directories<br>    configured to use it.</p>
<p>  ikeep<br>  noikeep (*)<br>    When ikeep is specified, XFS does not delete empty inode<br>    clusters and keeps them around on disk.  When noikeep is<br>    specified, empty inode clusters are returned to the free<br>    space pool.</p>
<p>  inode32<br>  inode64 (*)<br>    When inode32 is specified, it indicates that XFS limits<br>    inode creation to locations which will not result in inode<br>    numbers with more than 32 bits of significance.</p>
<pre><code>When inode64 is specified, it indicates that XFS is allowed
to create inodes at any location in the filesystem,
including those which will result in inode numbers occupying
more than 32 bits of significance. 

inode32 is provided for backwards compatibility with older
systems and applications, since 64 bits inode numbers might
cause problems for some applications that cannot handle
large inode numbers.  If applications are in use which do
not handle inode numbers bigger than 32 bits, the inode32
option should be specified.
</code></pre>
<p>  largeio<br>  nolargeio (*)<br>    If “nolargeio” is specified, the optimal I/O reported in<br>    st_blksize by stat(2) will be as small as possible to allow<br>    user applications to avoid inefficient read/modify/write<br>    I/O.  This is typically the page size of the machine, as<br>    this is the granularity of the page cache.</p>
<pre><code>If &quot;largeio&quot; specified, a filesystem that was created with a
&quot;swidth&quot; specified will return the &quot;swidth&quot; value (in bytes)
in st_blksize. If the filesystem does not have a &quot;swidth&quot;
specified but does specify an &quot;allocsize&quot; then &quot;allocsize&quot;
(in bytes) will be returned instead. Otherwise the behaviour
is the same as if &quot;nolargeio&quot; was specified.
</code></pre>
<p>  logbufs=value<br>    Set the number of in-memory log buffers.  Valid numbers<br>    range from 2-8 inclusive.</p>
<pre><code>The default value is 8 buffers.

If the memory cost of 8 log buffers is too high on small
systems, then it may be reduced at some cost to performance
on metadata intensive workloads. The logbsize option below
controls the size of each buffer and so is also relevant to
this case.
</code></pre>
<p>  logbsize=value<br>    Set the size of each in-memory log buffer.  The size may be<br>    specified in bytes, or in kilobytes with a “k” suffix.<br>    Valid sizes for version 1 and version 2 logs are 16384 (16k)<br>    and 32768 (32k).  Valid sizes for version 2 logs also<br>    include 65536 (64k), 131072 (128k) and 262144 (256k). The<br>    logbsize must be an integer multiple of the log<br>    stripe unit configured at mkfs time.</p>
<pre><code>The default value for for version 1 logs is 32768, while the
default value for version 2 logs is MAX(32768, log_sunit).
</code></pre>
<p>  logdev=device and rtdev=device<br>    Use an external log (metadata journal) and/or real-time device.<br>    An XFS filesystem has up to three parts: a data section, a log<br>    section, and a real-time section.  The real-time section is<br>    optional, and the log section can be separate from the data<br>    section or contained within it.</p>
<p>  noalign<br>    Data allocations will not be aligned at stripe unit<br>    boundaries. This is only relevant to filesystems created<br>    with non-zero data alignment parameters (sunit, swidth) by<br>    mkfs.</p>
<p>  norecovery<br>    The filesystem will be mounted without running log recovery.<br>    If the filesystem was not cleanly unmounted, it is likely to<br>    be inconsistent when mounted in “norecovery” mode.<br>    Some files or directories may not be accessible because of this.<br>    Filesystems mounted “norecovery” must be mounted read-only or<br>    the mount will fail.</p>
<p>  nouuid<br>    Don’t check for double mounted file systems using the file<br>    system uuid.  This is useful to mount LVM snapshot volumes,<br>    and often used in combination with “norecovery” for mounting<br>    read-only snapshots.</p>
<p>  noquota<br>    Forcibly turns off all quota accounting and enforcement<br>    within the filesystem.</p>
<p>  uquota/usrquota/uqnoenforce/quota<br>    User disk quota accounting enabled, and limits (optionally)<br>    enforced.  Refer to xfs_quota(8) for further details.</p>
<p>  gquota/grpquota/gqnoenforce<br>    Group disk quota accounting enabled and limits (optionally)<br>    enforced.  Refer to xfs_quota(8) for further details.</p>
<p>  pquota/prjquota/pqnoenforce<br>    Project disk quota accounting enabled and limits (optionally)<br>    enforced.  Refer to xfs_quota(8) for further details.</p>
<p>  sunit=value and swidth=value<br>    Used to specify the stripe unit and width for a RAID device<br>    or a stripe volume.  “value” must be specified in 512-byte<br>    block units. These options are only relevant to filesystems<br>    that were created with non-zero data alignment parameters.</p>
<pre><code>The sunit and swidth parameters specified must be compatible
with the existing filesystem alignment characteristics.  In
general, that means the only valid changes to sunit are
increasing it by a power-of-2 multiple. Valid swidth values
are any integer multiple of a valid sunit value.

Typically the only time these mount options are necessary if
after an underlying RAID device has had it&#39;s geometry
modified, such as adding a new disk to a RAID5 lun and
reshaping it.
</code></pre>
<p>  swalloc<br>    Data allocations will be rounded up to stripe width boundaries<br>    when the current end of file is being extended and the file<br>    size is larger than the stripe width size.</p>
<p>  wsync<br>    When specified, all filesystem namespace operations are<br>    executed synchronously. This ensures that when the namespace<br>    operation (create, unlink, etc) completes, the change to the<br>    namespace is on stable storage. This is useful in HA setups<br>    where failover must not result in clients seeing<br>    inconsistent namespace presentation during or after a<br>    failover event.</p>
<h1 id="Deprecated-Mount-Options"><a href="#Deprecated-Mount-Options" class="headerlink" title="Deprecated Mount Options"></a>Deprecated Mount Options</h1><p>  Name                Removal Schedule</p>
<hr>
<h1 id="Removed-Mount-Options"><a href="#Removed-Mount-Options" class="headerlink" title="Removed Mount Options"></a>Removed Mount Options</h1><p>  Name                Removed</p>
<hr>
<p>  delaylog/nodelaylog        v4.0<br>  ihashsize            v4.0<br>  irixsgid            v4.0<br>  osyncisdsync/osyncisosync    v4.0<br>  barrier            v4.19<br>  nobarrier            v4.19</p>
<h1 id="sysctls"><a href="#sysctls" class="headerlink" title="sysctls"></a>sysctls</h1><p>The following sysctls are available for the XFS filesystem:</p>
<p>  fs.xfs.stats_clear        (Min: 0  Default: 0  Max: 1)<br>    Setting this to “1” clears accumulated XFS statistics<br>    in /proc/fs/xfs/stat.  It then immediately resets to “0”.</p>
<p>  fs.xfs.xfssyncd_centisecs    (Min: 100  Default: 3000  Max: 720000)<br>    The interval at which the filesystem flushes metadata<br>    out to disk and runs internal cache cleanup routines.</p>
<p>  fs.xfs.filestream_centisecs    (Min: 1  Default: 3000  Max: 360000)<br>    The interval at which the filesystem ages filestreams cache<br>    references and returns timed-out AGs back to the free stream<br>    pool.</p>
<p>  fs.xfs.speculative_prealloc_lifetime<br>        (Units: seconds   Min: 1  Default: 300  Max: 86400)<br>    The interval at which the background scanning for inodes<br>    with unused speculative preallocation runs. The scan<br>    removes unused preallocation from clean inodes and releases<br>    the unused space back to the free pool.</p>
<p>  fs.xfs.error_level        (Min: 0  Default: 3  Max: 11)<br>    A volume knob for error reporting when internal errors occur.<br>    This will generate detailed messages &amp; backtraces for filesystem<br>    shutdowns, for example.  Current threshold values are:</p>
<pre><code>    XFS_ERRLEVEL_OFF:       0
    XFS_ERRLEVEL_LOW:       1
    XFS_ERRLEVEL_HIGH:      5
</code></pre>
<p>  fs.xfs.panic_mask        (Min: 0  Default: 0  Max: 255)<br>    Causes certain error conditions to call BUG(). Value is a bitmask;<br>    OR together the tags which represent errors which should cause panics:</p>
<pre><code>    XFS_NO_PTAG                     0
    XFS_PTAG_IFLUSH                 0x00000001
    XFS_PTAG_LOGRES                 0x00000002
    XFS_PTAG_AILDELETE              0x00000004
    XFS_PTAG_ERROR_REPORT           0x00000008
    XFS_PTAG_SHUTDOWN_CORRUPT       0x00000010
    XFS_PTAG_SHUTDOWN_IOERROR       0x00000020
    XFS_PTAG_SHUTDOWN_LOGERROR      0x00000040
    XFS_PTAG_FSBLOCK_ZERO           0x00000080

This option is intended for debugging only.
</code></pre>
<p>  fs.xfs.irix_symlink_mode    (Min: 0  Default: 0  Max: 1)<br>    Controls whether symlinks are created with mode 0777 (default)<br>    or whether their mode is affected by the umask (irix mode).</p>
<p>  fs.xfs.irix_sgid_inherit    (Min: 0  Default: 0  Max: 1)<br>    Controls files created in SGID directories.<br>    If the group ID of the new file does not match the effective group<br>    ID or one of the supplementary group IDs of the parent dir, the<br>    ISGID bit is cleared if the irix_sgid_inherit compatibility sysctl<br>    is set.</p>
<p>  fs.xfs.inherit_sync        (Min: 0  Default: 1  Max: 1)<br>    Setting this to “1” will cause the “sync” flag set<br>    by the xfs_io(8) chattr command on a directory to be<br>    inherited by files in that directory.</p>
<p>  fs.xfs.inherit_nodump        (Min: 0  Default: 1  Max: 1)<br>    Setting this to “1” will cause the “nodump” flag set<br>    by the xfs_io(8) chattr command on a directory to be<br>    inherited by files in that directory.</p>
<p>  fs.xfs.inherit_noatime    (Min: 0  Default: 1  Max: 1)<br>    Setting this to “1” will cause the “noatime” flag set<br>    by the xfs_io(8) chattr command on a directory to be<br>    inherited by files in that directory.</p>
<p>  fs.xfs.inherit_nosymlinks    (Min: 0  Default: 1  Max: 1)<br>    Setting this to “1” will cause the “nosymlinks” flag set<br>    by the xfs_io(8) chattr command on a directory to be<br>    inherited by files in that directory.</p>
<p>  fs.xfs.inherit_nodefrag    (Min: 0  Default: 1  Max: 1)<br>    Setting this to “1” will cause the “nodefrag” flag set<br>    by the xfs_io(8) chattr command on a directory to be<br>    inherited by files in that directory.</p>
<p>  fs.xfs.rotorstep        (Min: 1  Default: 1  Max: 256)<br>    In “inode32” allocation mode, this option determines how many<br>    files the allocator attempts to allocate in the same allocation<br>    group before moving to the next allocation group.  The intent<br>    is to control the rate at which the allocator moves between<br>    allocation groups when allocating extents for new files.</p>
<h1 id="Deprecated-Sysctls"><a href="#Deprecated-Sysctls" class="headerlink" title="Deprecated Sysctls"></a>Deprecated Sysctls</h1><p>None at present.</p>
<h1 id="Removed-Sysctls"><a href="#Removed-Sysctls" class="headerlink" title="Removed Sysctls"></a>Removed Sysctls</h1><p>  Name                Removed</p>
<hr>
<p>  fs.xfs.xfsbufd_centisec    v4.0<br>  fs.xfs.age_buffer_centisecs    v4.0</p>
<h1 id="Error-handling"><a href="#Error-handling" class="headerlink" title="Error handling"></a>Error handling</h1><p>XFS can act differently according to the type of error found during its<br>operation. The implementation introduces the following concepts to the error<br>handler:</p>
<p> -failure speed:<br>    Defines how fast XFS should propagate an error upwards when a specific<br>    error is found during the filesystem operation. It can propagate<br>    immediately, after a defined number of retries, after a set time period,<br>    or simply retry forever.</p>
<p> -error classes:<br>    Specifies the subsystem the error configuration will apply to, such as<br>    metadata IO or memory allocation. Different subsystems will have<br>    different error handlers for which behaviour can be configured.</p>
<p> -error handlers:<br>    Defines the behavior for a specific error.</p>
<p>The filesystem behavior during an error can be set via sysfs files. Each<br>error handler works independently - the first condition met by an error handler<br>for a specific class will cause the error to be propagated rather than reset and<br>retried.</p>
<p>The action taken by the filesystem when the error is propagated is context<br>dependent - it may cause a shut down in the case of an unrecoverable error,<br>it may be reported back to userspace, or it may even be ignored because<br>there’s nothing useful we can with the error or anyone we can report it to (e.g.<br>during unmount).</p>
<p>The configuration files are organized into the following hierarchy for each<br>mounted filesystem:</p>
<p>  /sys/fs/xfs/<dev>/error/<class>/<error>/</p>
<p>Where:<br>  <dev><br>    The short device name of the mounted filesystem. This is the same device<br>    name that shows up in XFS kernel error messages as “XFS(<dev>): …”</p>
  <class>
    The subsystem the error configuration belongs to. As of 4.9, the defined
    classes are:

<pre><code>    - &quot;metadata&quot;: applies metadata buffer write IO
</code></pre>
  <error>
    The individual error handler configurations.


<p>Each filesystem has “global” error configuration options defined in their top<br>level directory:</p>
<p>  /sys/fs/xfs/<dev>/error/</p>
<p>  fail_at_unmount        (Min:  0  Default:  1  Max: 1)<br>    Defines the filesystem error behavior at unmount time.</p>
<pre><code>If set to a value of 1, XFS will override all other error configurations
during unmount and replace them with &quot;immediate fail&quot; characteristics.
i.e. no retries, no retry timeout. This will always allow unmount to
succeed when there are persistent errors present.

If set to 0, the configured retry behaviour will continue until all
retries and/or timeouts have been exhausted. This will delay unmount
completion when there are persistent errors, and it may prevent the
filesystem from ever unmounting fully in the case of &quot;retry forever&quot;
handler configurations.

Note: there is no guarantee that fail_at_unmount can be set whilst an
unmount is in progress. It is possible that the sysfs entries are
removed by the unmounting filesystem before a &quot;retry forever&quot; error
handler configuration causes unmount to hang, and hence the filesystem
must be configured appropriately before unmount begins to prevent
unmount hangs.
</code></pre>
<p>Each filesystem has specific error class handlers that define the error<br>propagation behaviour for specific errors. There is also a “default” error<br>handler defined, which defines the behaviour for all errors that don’t have<br>specific handlers defined. Where multiple retry constraints are configuredi for<br>a single error, the first retry configuration that expires will cause the error<br>to be propagated. The handler configurations are found in the directory:</p>
<p>  /sys/fs/xfs/<dev>/error/<class>/<error>/</p>
<p>  max_retries            (Min: -1  Default: Varies  Max: INTMAX)<br>    Defines the allowed number of retries of a specific error before<br>    the filesystem will propagate the error. The retry count for a given<br>    error context (e.g. a specific metadata buffer) is reset every time<br>    there is a successful completion of the operation.</p>
<pre><code>Setting the value to &quot;-1&quot; will cause XFS to retry forever for this
specific error.

Setting the value to &quot;0&quot; will cause XFS to fail immediately when the
specific error is reported.

Setting the value to &quot;N&quot; (where 0 &lt; N &lt; Max) will make XFS retry the
operation &quot;N&quot; times before propagating the error.
</code></pre>
<p>  retry_timeout_seconds        (Min:  -1  Default:  Varies  Max: 1 day)<br>    Define the amount of time (in seconds) that the filesystem is<br>    allowed to retry its operations when the specific error is<br>    found.</p>
<pre><code>Setting the value to &quot;-1&quot; will allow XFS to retry forever for this
specific error.

Setting the value to &quot;0&quot; will cause XFS to fail immediately when the
specific error is reported.

Setting the value to &quot;N&quot; (where 0 &lt; N &lt; Max) will allow XFS to retry the
operation for up to &quot;N&quot; seconds before propagating the error.
</code></pre>
<p>Note: The default behaviour for a specific error handler is dependent on both<br>the class and error context. For example, the default values for<br>“metadata/ENODEV” are “0” rather than “-1” so that this error handler defaults<br>to “fail immediately” behaviour. This is done because ENODEV is a fatal,<br>unrecoverable error no matter how many times the metadata IO is retried.</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_xfs/" title="Kernel-4.18.0-80.el8_xfs" target="_blank" rel="external">http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_xfs/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_xfs-self-describing-metadata/" title="Kernel-4.18.0-80.el8_xfs-self-describing-metadata"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_xillybus/" title="Kernel-4.18.0-80.el8_xillybus"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>