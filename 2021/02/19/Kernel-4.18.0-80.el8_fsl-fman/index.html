<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-4.18.0-80.el8_fsl-fman | oosTech.com</title>
  <meta name="description" content="&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Freescale Frame Manager Device Bindings CONTENTS  FMan Node FMan Port Node FMan MURAM Node FMan dTSEC&#x2F;XGEC&#x2F;mEMAC Node FMan">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-4.18.0-80.el8_fsl-fman">
<meta property="og:url" content="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_fsl-fman/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Freescale Frame Manager Device Bindings CONTENTS  FMan Node FMan Port Node FMan MURAM Node FMan dTSEC&#x2F;XGEC&#x2F;mEMAC Node FMan">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:modified_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_fsl-fman/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-4.18.0-80.el8_fsl-fman" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-4.18.0-80.el8_fsl-fman
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_fsl-fman/" class="article-date">
	 published: <time datetime="2021-02-18T16:00:00.000Z" itemprop="datePublished">2021-02-19</time>
	</a>
</span>

        
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_fsl-fman/" class="article-date">
	   updated: <time datetime="2021-02-18T16:00:00.000Z" itemprop="dateUpdated">2021-02-19</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/02/19/Kernel-4.18.0-80.el8_fsl-fman/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>=============================================================================<br>Freescale Frame Manager Device Bindings</p>
<p>CONTENTS</p>
<ul>
<li>FMan Node</li>
<li>FMan Port Node</li>
<li>FMan MURAM Node</li>
<li>FMan dTSEC/XGEC/mEMAC Node</li>
<li>FMan IEEE 1588 Node</li>
<li>FMan MDIO Node</li>
<li>Example</li>
</ul>
<p>=============================================================================<br>FMan Node</p>
<p>DESCRIPTION</p>
<p>Due to the fact that the FMan is an aggregation of sub-engines (ports, MACs,<br>etc.) the FMan node will have child nodes for each of them.</p>
<p>PROPERTIES</p>
<ul>
<li><p>compatible</p>
<pre><code>  Usage: required
  Value type: &lt;stringlist&gt;
  Definition: Must include &quot;fsl,fman&quot;
  FMan version can be determined via FM_IP_REV_1 register in the
  FMan block. The offset is 0xc4 from the beginning of the
  Frame Processing Manager memory map (0xc3000 from the
  beginning of the FMan node).
</code></pre>
</li>
<li><p>cell-index</p>
<pre><code>  Usage: required
  Value type: &lt;u32&gt;
  Definition: Specifies the index of the FMan unit.

  The cell-index value may be used by the SoC, to identify the
  FMan unit in the SoC memory map. In the table below,
  there&#39;s a description of the cell-index use in each SoC:

  - P1023:
  register[bit]            FMan unit    cell-index
  ============================================================
  DEVDISR[1]            1        0

  - P2041, P3041, P4080 P5020, P5040:
  register[bit]            FMan unit    cell-index
  ============================================================
  DCFG_DEVDISR2[6]        1        0
  DCFG_DEVDISR2[14]        2        1
      (Second FM available only in P4080 and P5040)

  - B4860, T1040, T2080, T4240:
  register[bit]            FMan unit    cell-index
  ============================================================
  DCFG_CCSR_DEVDISR2[24]        1        0
  DCFG_CCSR_DEVDISR2[25]        2        1
      (Second FM available only in T4240)

  DEVDISR, DCFG_DEVDISR2 and DCFG_CCSR_DEVDISR2 are located in
  the specific SoC &quot;Device Configuration/Pin Control&quot; Memory
  Map.
</code></pre>
</li>
<li><p>reg</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: A standard property. Specifies the offset of the
  following configuration registers:
  - BMI configuration registers.
  - QMI configuration registers.
  - DMA configuration registers.
  - FPM configuration registers.
  - FMan controller configuration registers.
</code></pre>
</li>
<li><p>ranges</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: A standard property.
</code></pre>
</li>
<li><p>clocks</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: phandle for the fman input clock.
</code></pre>
</li>
<li><p>clock-names</p>
<pre><code>  usage: required
  Value type: &lt;stringlist&gt;
  Definition: &quot;fmanclk&quot; for the fman input clock.
</code></pre>
</li>
<li><p>interrupts</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: A pair of IRQs are specified in this property.
  The first element is associated with the event interrupts and
  the second element is associated with the error interrupts.
</code></pre>
</li>
<li><p>fsl,qman-channel-range</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: Specifies the range of the available dedicated
  channels in the FMan. The first cell specifies the beginning
  of the range and the second cell specifies the number of
  channels.
  Further information available at:
  &quot;Work Queue (WQ) Channel Assignments in the QMan&quot; section
  in DPAA Reference Manual.
</code></pre>
</li>
<li><p>fsl,qman</p>
</li>
<li><p>fsl,bman</p>
<pre><code>  Usage: required
  Definition: See soc/fsl/qman.txt and soc/fsl/bman.txt
</code></pre>
</li>
</ul>
<p>=============================================================================<br>FMan MURAM Node</p>
<p>DESCRIPTION</p>
<p>FMan Internal memory - shared between all the FMan modules.<br>It contains data structures that are common and written to or read by<br>the modules.<br>FMan internal memory is split into the following parts:<br>    Packet buffering (Tx/Rx FIFOs)<br>    Frames internal context</p>
<p>PROPERTIES</p>
<ul>
<li><p>compatible</p>
<pre><code>  Usage: required
  Value type: &lt;stringlist&gt;
  Definition: Must include &quot;fsl,fman-muram&quot;
</code></pre>
</li>
<li><p>ranges</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: A standard property.
  Specifies the multi-user memory offset and the size within
  the FMan.
</code></pre>
</li>
</ul>
<p>EXAMPLE</p>
<p>muram@0 {<br>    compatible = “fsl,fman-muram”;<br>    ranges = &lt;0 0x000000 0x28000&gt;;<br>};</p>
<p>=============================================================================<br>FMan Port Node</p>
<p>DESCRIPTION</p>
<p>The Frame Manager (FMan) supports several types of hardware ports:<br>    Ethernet receiver (RX)<br>    Ethernet transmitter (TX)<br>    Offline/Host command (O/H)</p>
<p>PROPERTIES</p>
<ul>
<li><p>compatible</p>
<pre><code>  Usage: required
  Value type: &lt;stringlist&gt;
  Definition: A standard property.
  Must include one of the following:
      - &quot;fsl,fman-v2-port-oh&quot; for FManV2 OH ports
      - &quot;fsl,fman-v2-port-rx&quot; for FManV2 RX ports
      - &quot;fsl,fman-v2-port-tx&quot; for FManV2 TX ports
      - &quot;fsl,fman-v3-port-oh&quot; for FManV3 OH ports
      - &quot;fsl,fman-v3-port-rx&quot; for FManV3 RX ports
      - &quot;fsl,fman-v3-port-tx&quot; for FManV3 TX ports
</code></pre>
</li>
<li><p>cell-index</p>
<pre><code>  Usage: required
  Value type: &lt;u32&gt;
  Definition: Specifies the hardware port id.
  Each hardware port on the FMan has its own hardware PortID.
  Super set of all hardware Port IDs available at FMan Reference
  Manual under &quot;FMan Hardware Ports in Freescale Devices&quot; table.

  Each hardware port is assigned a 4KB, port-specific page in
  the FMan hardware port memory region (which is part of the
  FMan memory map). The first 4 KB in the FMan hardware ports
  memory region is used for what are called common registers.
  The subsequent 63 4KB pages are allocated to the hardware
  ports.
  The page of a specific port is determined by the cell-index.
</code></pre>
</li>
<li><p>reg</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: There is one reg region describing the port
  configuration registers.
</code></pre>
</li>
<li><p>fsl,fman-10g-port</p>
<pre><code>  Usage: optional
  Value type: boolean
  Definition: The default port rate is 1G.
  If this property exists, the port is s 10G port.
</code></pre>
</li>
<li><p>fsl,fman-best-effort-port</p>
<pre><code>  Usage: optional
  Value type: boolean
  Definition: Can be defined only if 10G-support is set.
  This property marks a best-effort 10G port (10G port that
  may not be capable of line rate).
</code></pre>
</li>
</ul>
<p>EXAMPLE</p>
<p>port@a8000 {<br>    cell-index = &lt;0x28&gt;;<br>    compatible = “fsl,fman-v2-port-tx”;<br>    reg = &lt;0xa8000 0x1000&gt;;<br>};</p>
<p>port@88000 {<br>    cell-index = &lt;0x8&gt;;<br>    compatible = “fsl,fman-v2-port-rx”;<br>    reg = &lt;0x88000 0x1000&gt;;<br>};</p>
<p>port@81000 {<br>    cell-index = &lt;0x1&gt;;<br>    compatible = “fsl,fman-v2-port-oh”;<br>    reg = &lt;0x81000 0x1000&gt;;<br>};</p>
<p>=============================================================================<br>FMan dTSEC/XGEC/mEMAC Node</p>
<p>DESCRIPTION</p>
<p>mEMAC/dTSEC/XGEC are the Ethernet network interfaces</p>
<p>PROPERTIES</p>
<ul>
<li><p>compatible</p>
<pre><code>  Usage: required
  Value type: &lt;stringlist&gt;
  Definition: A standard property.
  Must include one of the following:
  - &quot;fsl,fman-dtsec&quot; for dTSEC MAC
  - &quot;fsl,fman-xgec&quot; for XGEC MAC
  - &quot;fsl,fman-memac&quot; for mEMAC MAC
</code></pre>
</li>
<li><p>cell-index</p>
<pre><code>  Usage: required
  Value type: &lt;u32&gt;
  Definition: Specifies the MAC id.

  The cell-index value may be used by the FMan or the SoC, to
  identify the MAC unit in the FMan (or SoC) memory map.
  In the tables below there&#39;s a description of the cell-index
  use, there are two tables, one describes the use of cell-index
  by the FMan, the second describes the use by the SoC:

  1. FMan Registers

  FManV2:
  register[bit]        MAC        cell-index
  ============================================================
  FM_EPI[16]        XGEC        8
  FM_EPI[16+n]        dTSECn        n-1
  FM_NPI[11+n]        dTSECn        n-1
      n = 1,..,5

  FManV3:
  register[bit]        MAC        cell-index
  ============================================================
  FM_EPI[16+n]        mEMACn        n-1
  FM_EPI[25]        mEMAC10        9

  FM_NPI[11+n]        mEMACn        n-1
  FM_NPI[10]        mEMAC10        9
  FM_NPI[11]        mEMAC9        8
      n = 1,..8

  FM_EPI and FM_NPI are located in the FMan memory map.

  2. SoC registers:

  - P2041, P3041, P4080 P5020, P5040:
  register[bit]        FMan        MAC        cell
              Unit                index
  ============================================================
  DCFG_DEVDISR2[7]    1        XGEC        8
  DCFG_DEVDISR2[7+n]    1        dTSECn        n-1
  DCFG_DEVDISR2[15]    2        XGEC        8
  DCFG_DEVDISR2[15+n]    2        dTSECn        n-1
      n = 1,..5

  - T1040, T2080, T4240, B4860:
  register[bit]            FMan    MAC        cell
                  Unit            index
  ============================================================
  DCFG_CCSR_DEVDISR2[n-1]        1    mEMACn        n-1
  DCFG_CCSR_DEVDISR2[11+n]    2    mEMACn        n-1
      n = 1,..6,9,10

  EVDISR, DCFG_DEVDISR2 and DCFG_CCSR_DEVDISR2 are located in
  the specific SoC &quot;Device Configuration/Pin Control&quot; Memory
  Map.
</code></pre>
</li>
<li><p>reg</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: A standard property.
</code></pre>
</li>
<li><p>fsl,fman-ports</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: An array of two phandles - the first references is
  the FMan RX port and the second is the TX port used by this
  MAC.
</code></pre>
</li>
<li><p>ptp-timer</p>
<pre><code>  Usage required
  Value type: &lt;phandle&gt;
  Definition: A phandle for 1EEE1588 timer.
</code></pre>
</li>
<li><p>pcsphy-handle</p>
<pre><code>  Usage required for &quot;fsl,fman-memac&quot; MACs
  Value type: &lt;phandle&gt;
  Definition: A phandle for pcsphy.
</code></pre>
</li>
<li><p>tbi-handle</p>
<pre><code>  Usage required for &quot;fsl,fman-dtsec&quot; MACs
  Value type: &lt;phandle&gt;
  Definition: A phandle for tbiphy.
</code></pre>
</li>
</ul>
<p>EXAMPLE</p>
<p>fman1_tx28: port@a8000 {<br>    cell-index = &lt;0x28&gt;;<br>    compatible = “fsl,fman-v2-port-tx”;<br>    reg = &lt;0xa8000 0x1000&gt;;<br>};</p>
<p>fman1_rx8: port@88000 {<br>    cell-index = &lt;0x8&gt;;<br>    compatible = “fsl,fman-v2-port-rx”;<br>    reg = &lt;0x88000 0x1000&gt;;<br>};</p>
<p>ptp-timer: ptp_timer@fe000 {<br>    compatible = “fsl,fman-ptp-timer”;<br>    reg = &lt;0xfe000 0x1000&gt;;<br>};</p>
<p>ethernet@e0000 {<br>    compatible = “fsl,fman-dtsec”;<br>    cell-index = &lt;0&gt;;<br>    reg = &lt;0xe0000 0x1000&gt;;<br>    fsl,fman-ports = &lt;&amp;fman1_rx8 &amp;fman1_tx28&gt;;<br>    ptp-timer = &lt;&amp;ptp-timer&gt;;<br>    tbi-handle = &lt;&amp;tbi0&gt;;<br>};</p>
<p>============================================================================<br>FMan IEEE 1588 Node</p>
<p>DESCRIPTION</p>
<p>The FMan interface to support IEEE 1588</p>
<p>PROPERTIES</p>
<ul>
<li><p>compatible</p>
<pre><code>  Usage: required
  Value type: &lt;stringlist&gt;
  Definition: A standard property.
  Must include &quot;fsl,fman-ptp-timer&quot;.
</code></pre>
</li>
<li><p>reg</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: A standard property.
</code></pre>
</li>
</ul>
<p>EXAMPLE</p>
<p>ptp-timer@fe000 {<br>    compatible = “fsl,fman-ptp-timer”;<br>    reg = &lt;0xfe000 0x1000&gt;;<br>};</p>
<p>=============================================================================<br>FMan MDIO Node</p>
<p>DESCRIPTION</p>
<p>The MDIO is a bus to which the PHY devices are connected.</p>
<p>PROPERTIES</p>
<ul>
<li><p>compatible</p>
<pre><code>  Usage: required
  Value type: &lt;stringlist&gt;
  Definition: A standard property.
  Must include &quot;fsl,fman-mdio&quot; for 1 Gb/s MDIO from FMan v2.
  Must include &quot;fsl,fman-xmdio&quot; for 10 Gb/s MDIO from FMan v2.
  Must include &quot;fsl,fman-memac-mdio&quot; for 1/10 Gb/s MDIO from
  FMan v3.
</code></pre>
</li>
<li><p>reg</p>
<pre><code>  Usage: required
  Value type: &lt;prop-encoded-array&gt;
  Definition: A standard property.
</code></pre>
</li>
<li><p>bus-frequency</p>
<pre><code>  Usage: optional
  Value type: &lt;u32&gt;
  Definition: Specifies the external MDIO bus clock speed to
  be used, if different from the standard 2.5 MHz.
  This may be due to the standard speed being unsupported (e.g.
  due to a hardware problem), or to advertise that all relevant
  components in the system support a faster speed.
</code></pre>
</li>
<li><p>interrupts</p>
<pre><code>  Usage: required for external MDIO
  Value type: &lt;prop-encoded-array&gt;
  Definition: Event interrupt of external MDIO controller.
</code></pre>
</li>
<li><p>fsl,fman-internal-mdio</p>
<pre><code>  Usage: required for internal MDIO
  Value type: boolean
  Definition: Fman has internal MDIO for internal PCS(Physical
  Coding Sublayer) PHYs and external MDIO for external PHYs.
  The settings and programming routines for internal/external
  MDIO are different. Must be included for internal MDIO.
</code></pre>
</li>
</ul>
<p>For internal PHY device on internal mdio bus, a PHY node should be created.<br>See the definition of the PHY node in booting-without-of.txt for an<br>example of how to define a PHY (Internal PHY has no interrupt line).</p>
<ul>
<li>For “fsl,fman-mdio” compatible internal mdio bus, the PHY is TBI PHY.</li>
<li>For “fsl,fman-memac-mdio” compatible internal mdio bus, the PHY is PCS PHY,<br>PCS PHY addr must be ‘0’.</li>
</ul>
<p>EXAMPLE</p>
<p>Example for FMan v2 external MDIO:</p>
<p>mdio@f1000 {<br>    compatible = “fsl,fman-xmdio”;<br>    reg = &lt;0xf1000 0x1000&gt;;<br>    interrupts = &lt;101 2 0 0&gt;;<br>};</p>
<p>Example for FMan v2 internal MDIO:</p>
<p>mdio@e3120 {<br>    compatible = “fsl,fman-mdio”;<br>    reg = &lt;0xe3120 0xee0&gt;;<br>    fsl,fman-internal-mdio;</p>
<pre><code>tbi1: tbi-phy@8 &#123;
    reg = &lt;0x8&gt;;
    device_type = &quot;tbi-phy&quot;;
&#125;;
</code></pre>
<p>};</p>
<p>Example for FMan v3 internal MDIO:</p>
<p>mdio@f1000 {<br>    compatible = “fsl,fman-memac-mdio”;<br>    reg = &lt;0xf1000 0x1000&gt;;<br>    fsl,fman-internal-mdio;</p>
<pre><code>pcsphy6: ethernet-phy@0 &#123;
    reg = &lt;0x0&gt;;
&#125;;
</code></pre>
<p>};</p>
<p>=============================================================================<br>Example</p>
<p>fman@400000 {<br>    #address-cells = &lt;1&gt;;<br>    #size-cells = &lt;1&gt;;<br>    cell-index = &lt;1&gt;;<br>    compatible = “fsl,fman”<br>    ranges = &lt;0 0x400000 0x100000&gt;;<br>    reg = &lt;0x400000 0x100000&gt;;<br>    clocks = &lt;&amp;fman_clk&gt;;<br>    clock-names = “fmanclk”;<br>    interrupts = &lt;<br>        96 2 0 0<br>        16 2 1 1&gt;;<br>    fsl,qman-channel-range = &lt;0x40 0xc&gt;;</p>
<pre><code>muram@0 &#123;
    compatible = &quot;fsl,fman-muram&quot;;
    reg = &lt;0x0 0x28000&gt;;
&#125;;

port@81000 &#123;
    cell-index = &lt;1&gt;;
    compatible = &quot;fsl,fman-v2-port-oh&quot;;
    reg = &lt;0x81000 0x1000&gt;;
&#125;;

port@82000 &#123;
    cell-index = &lt;2&gt;;
    compatible = &quot;fsl,fman-v2-port-oh&quot;;
    reg = &lt;0x82000 0x1000&gt;;
&#125;;

port@83000 &#123;
    cell-index = &lt;3&gt;;
    compatible = &quot;fsl,fman-v2-port-oh&quot;;
    reg = &lt;0x83000 0x1000&gt;;
&#125;;

port@84000 &#123;
    cell-index = &lt;4&gt;;
    compatible = &quot;fsl,fman-v2-port-oh&quot;;
    reg = &lt;0x84000 0x1000&gt;;
&#125;;

port@85000 &#123;
    cell-index = &lt;5&gt;;
    compatible = &quot;fsl,fman-v2-port-oh&quot;;
    reg = &lt;0x85000 0x1000&gt;;
&#125;;

port@86000 &#123;
    cell-index = &lt;6&gt;;
    compatible = &quot;fsl,fman-v2-port-oh&quot;;
    reg = &lt;0x86000 0x1000&gt;;
&#125;;

fman1_rx_0x8: port@88000 &#123;
    cell-index = &lt;0x8&gt;;
    compatible = &quot;fsl,fman-v2-port-rx&quot;;
    reg = &lt;0x88000 0x1000&gt;;
&#125;;

fman1_rx_0x9: port@89000 &#123;
    cell-index = &lt;0x9&gt;;
    compatible = &quot;fsl,fman-v2-port-rx&quot;;
    reg = &lt;0x89000 0x1000&gt;;
&#125;;

fman1_rx_0xa: port@8a000 &#123;
    cell-index = &lt;0xa&gt;;
    compatible = &quot;fsl,fman-v2-port-rx&quot;;
    reg = &lt;0x8a000 0x1000&gt;;
&#125;;

fman1_rx_0xb: port@8b000 &#123;
    cell-index = &lt;0xb&gt;;
    compatible = &quot;fsl,fman-v2-port-rx&quot;;
    reg = &lt;0x8b000 0x1000&gt;;
&#125;;

fman1_rx_0xc: port@8c000 &#123;
    cell-index = &lt;0xc&gt;;
    compatible = &quot;fsl,fman-v2-port-rx&quot;;
    reg = &lt;0x8c000 0x1000&gt;;
&#125;;

fman1_rx_0x10: port@90000 &#123;
    cell-index = &lt;0x10&gt;;
    compatible = &quot;fsl,fman-v2-port-rx&quot;;
    reg = &lt;0x90000 0x1000&gt;;
&#125;;

fman1_tx_0x28: port@a8000 &#123;
    cell-index = &lt;0x28&gt;;
    compatible = &quot;fsl,fman-v2-port-tx&quot;;
    reg = &lt;0xa8000 0x1000&gt;;
&#125;;

fman1_tx_0x29: port@a9000 &#123;
    cell-index = &lt;0x29&gt;;
    compatible = &quot;fsl,fman-v2-port-tx&quot;;
    reg = &lt;0xa9000 0x1000&gt;;
&#125;;

fman1_tx_0x2a: port@aa000 &#123;
    cell-index = &lt;0x2a&gt;;
    compatible = &quot;fsl,fman-v2-port-tx&quot;;
    reg = &lt;0xaa000 0x1000&gt;;
&#125;;

fman1_tx_0x2b: port@ab000 &#123;
    cell-index = &lt;0x2b&gt;;
    compatible = &quot;fsl,fman-v2-port-tx&quot;;
    reg = &lt;0xab000 0x1000&gt;;
&#125;;

fman1_tx_0x2c: port@ac0000 &#123;
    cell-index = &lt;0x2c&gt;;
    compatible = &quot;fsl,fman-v2-port-tx&quot;;
    reg = &lt;0xac000 0x1000&gt;;
&#125;;

fman1_tx_0x30: port@b0000 &#123;
    cell-index = &lt;0x30&gt;;
    compatible = &quot;fsl,fman-v2-port-tx&quot;;
    reg = &lt;0xb0000 0x1000&gt;;
&#125;;

ethernet@e0000 &#123;
    compatible = &quot;fsl,fman-dtsec&quot;;
    cell-index = &lt;0&gt;;
    reg = &lt;0xe0000 0x1000&gt;;
    fsl,fman-ports = &lt;&amp;fman1_rx_0x8 &amp;fman1_tx_0x28&gt;;
    tbi-handle = &lt;&amp;tbi5&gt;;
&#125;;

ethernet@e2000 &#123;
    compatible = &quot;fsl,fman-dtsec&quot;;
    cell-index = &lt;1&gt;;
    reg = &lt;0xe2000 0x1000&gt;;
    fsl,fman-ports = &lt;&amp;fman1_rx_0x9 &amp;fman1_tx_0x29&gt;;
    tbi-handle = &lt;&amp;tbi6&gt;;
&#125;;

ethernet@e4000 &#123;
    compatible = &quot;fsl,fman-dtsec&quot;;
    cell-index = &lt;2&gt;;
    reg = &lt;0xe4000 0x1000&gt;;
    fsl,fman-ports = &lt;&amp;fman1_rx_0xa &amp;fman1_tx_0x2a&gt;;
    tbi-handle = &lt;&amp;tbi7&gt;;
&#125;;

ethernet@e6000 &#123;
    compatible = &quot;fsl,fman-dtsec&quot;;
    cell-index = &lt;3&gt;;
    reg = &lt;0xe6000 0x1000&gt;;
    fsl,fman-ports = &lt;&amp;fman1_rx_0xb &amp;fman1_tx_0x2b&gt;;
    tbi-handle = &lt;&amp;tbi8&gt;;
&#125;;

ethernet@e8000 &#123;
    compatible = &quot;fsl,fman-dtsec&quot;;
    cell-index = &lt;4&gt;;
    reg = &lt;0xf0000 0x1000&gt;;
    fsl,fman-ports = &lt;&amp;fman1_rx_0xc &amp;fman1_tx_0x2c&gt;;
    tbi-handle = &lt;&amp;tbi9&gt;;

ethernet@f0000 &#123;
    cell-index = &lt;8&gt;;
    compatible = &quot;fsl,fman-xgec&quot;;
    reg = &lt;0xf0000 0x1000&gt;;
    fsl,fman-ports = &lt;&amp;fman1_rx_0x10 &amp;fman1_tx_0x30&gt;;
&#125;;

ptp-timer@fe000 &#123;
    compatible = &quot;fsl,fman-ptp-timer&quot;;
    reg = &lt;0xfe000 0x1000&gt;;
&#125;;

mdio@f1000 &#123;
    compatible = &quot;fsl,fman-xmdio&quot;;
    reg = &lt;0xf1000 0x1000&gt;;
    interrupts = &lt;101 2 0 0&gt;;
&#125;;
</code></pre>
<p>};</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_fsl-fman/" title="Kernel-4.18.0-80.el8_fsl-fman" target="_blank" rel="external">http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_fsl-fman/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_fsl-flexcan/" title="Kernel-4.18.0-80.el8_fsl-flexcan"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_fsl-imx-cspi/" title="Kernel-4.18.0-80.el8_fsl-imx-cspi"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>