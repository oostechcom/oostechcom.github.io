<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kernel-4.18.0-80.el8_kconfig-language | oosTech.com</title>
  <meta name="description" content="IntroductionThe configuration database is a collection of configuration optionsorganized in a tree structure: +- Code maturity level options |  +- Prompt for development and&#x2F;or incomplete code&#x2F;drivers">
<meta property="og:type" content="article">
<meta property="og:title" content="Kernel-4.18.0-80.el8_kconfig-language">
<meta property="og:url" content="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_kconfig-language/index.html">
<meta property="og:site_name" content="oosTech">
<meta property="og:description" content="IntroductionThe configuration database is a collection of configuration optionsorganized in a tree structure: +- Code maturity level options |  +- Prompt for development and&#x2F;or incomplete code&#x2F;drivers">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:modified_time" content="2021-02-18T16:00:00.000Z">
<meta property="article:author" content="Sam Lee">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_kconfig-language/index.html">
  
    <link rel="alternate" href="/atom.xml" title="oosTech" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img src="/images/avatar.png" width="400" height="400">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">oosTech by Sam Lee</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="站内搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">站点首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档文档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">文档分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">常用链接</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">共享白板</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告牌</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p> 欢迎来到oosTech ，我是一个Linux 拥趸：D。 目前正在用的Linux 版本是 Red Hat Enterprise Linux release 8.3 </p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">文档分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a><span class="category-list-count">830</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a><span class="category-list-count">1658</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a><span class="category-list-count">3937</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3270/" class="title">Kernel-3.10.0-957.el7_3270</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-2-6-32-573-12-1-el6-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_2.6.32-573.12.1.el6_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-2.6.32-573.12.1.el6_devices/" class="title">Kernel-2.6.32-573.12.1.el6_devices</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_3c509/" class="title">Kernel-3.10.0-957.el7_3c509</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_4CCs/" class="title">Kernel-3.10.0-957.el7_4CCs</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Kernel-3-10-0-957-el7-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_3.10.0-957.el7_内核文档</a>
              </p>
              <p class="item-title">
                <a href="/2021/03/13/Kernel-3.10.0-957.el7_53c700/" class="title">Kernel-3.10.0-957.el7_53c700</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-12T16:00:00.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Menu-entries"><span class="toc-number">2.</span> <span class="toc-text">Menu entries</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Menu-attributes"><span class="toc-number">3.</span> <span class="toc-text">Menu attributes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Menu-dependencies"><span class="toc-number">4.</span> <span class="toc-text">Menu dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Menu-structure"><span class="toc-number">5.</span> <span class="toc-text">Menu structure</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kconfig-syntax"><span class="toc-number">6.</span> <span class="toc-text">Kconfig syntax</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kconfig-hints"><span class="toc-number">7.</span> <span class="toc-text">Kconfig hints</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-Kernel-4.18.0-80.el8_kconfig-language" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kernel-4.18.0-80.el8_kconfig-language
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_kconfig-language/" class="article-date">
	 published: <time datetime="2021-02-18T16:00:00.000Z" itemprop="datePublished">2021-02-19</time>
	</a>
</span>

        
	<a href="/2021/02/19/Kernel-4.18.0-80.el8_kconfig-language/" class="article-date">
	   updated: <time datetime="2021-02-18T16:00:00.000Z" itemprop="dateUpdated">2021-02-19</time>
	</a>


        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/Kernel-4-18-0-80-el8-%E5%86%85%E6%A0%B8%E6%96%87%E6%A1%A3/">Kernel_4.18.0-80.el8_内核文档</a>
  </span>

        

        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill"></i>
	    <!--<span id="busuanzi_container_page_pv" style="display:inline;">-->
			<span id="busuanzi_value_page_pv" style="display:inline;"></span>
		<!--</span>-->
	</span>



        <!--<span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/02/19/Kernel-4.18.0-80.el8_kconfig-language/#comments" class="article-comment-link">评论</a></span> -->
        
	
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>The configuration database is a collection of configuration options<br>organized in a tree structure:</p>
<pre><code>+- Code maturity level options
|  +- Prompt for development and/or incomplete code/drivers
+- General setup
|  +- Networking support
|  +- System V IPC
|  +- BSD Process Accounting
|  +- Sysctl support
+- Loadable module support
|  +- Enable loadable module support
|     +- Set version information on all module symbols
|     +- Kernel module loader
+- ...
</code></pre>
<p>Every entry has its own dependencies. These dependencies are used<br>to determine the visibility of an entry. Any child entry is only<br>visible if its parent entry is also visible.</p>
<h2 id="Menu-entries"><a href="#Menu-entries" class="headerlink" title="Menu entries"></a>Menu entries</h2><p>Most entries define a config option; all other entries help to organize<br>them. A single configuration option is defined like this:</p>
<p>config MODVERSIONS<br>    bool “Set version information on all module symbols”<br>    depends on MODULES<br>    help<br>      Usually, modules have to be recompiled whenever you switch to a new<br>      kernel.  …</p>
<p>Every line starts with a key word and can be followed by multiple<br>arguments.  “config” starts a new config entry. The following lines<br>define attributes for this config option. Attributes can be the type of<br>the config option, input prompt, dependencies, help text and default<br>values. A config option can be defined multiple times with the same<br>name, but every definition can have only a single input prompt and the<br>type must not conflict.</p>
<h2 id="Menu-attributes"><a href="#Menu-attributes" class="headerlink" title="Menu attributes"></a>Menu attributes</h2><p>A menu entry can have a number of attributes. Not all of them are<br>applicable everywhere (see syntax).</p>
<ul>
<li><p>type definition: “bool”/“tristate”/“string”/“hex”/“int”<br>Every config option must have a type. There are only two basic types:<br>tristate and string; the other types are based on these two. The type<br>definition optionally accepts an input prompt, so these two examples<br>are equivalent:</p>
<p>  bool “Networking support”<br>and<br>  bool<br>  prompt “Networking support”</p>
</li>
<li><p>input prompt: “prompt” <prompt> [“if” <expr>]<br>Every menu entry can have at most one prompt, which is used to display<br>to the user. Optionally dependencies only for this prompt can be added<br>with “if”.</p>
</li>
<li><p>default value: “default” <expr> [“if” <expr>]<br>A config option can have any number of default values. If multiple<br>default values are visible, only the first defined one is active.<br>Default values are not limited to the menu entry where they are<br>defined. This means the default can be defined somewhere else or be<br>overridden by an earlier definition.<br>The default value is only assigned to the config symbol if no other<br>value was set by the user (via the input prompt above). If an input<br>prompt is visible the default value is presented to the user and can<br>be overridden by him.<br>Optionally, dependencies only for this default value can be added with<br>“if”.</p>
<p>The default value deliberately defaults to ‘n’ in order to avoid bloating the<br>build. With few exceptions, new config options should not change this. The<br>intent is for “make oldconfig” to add as little as possible to the config from<br>release to release.</p>
<p>Note:<br>  Things that merit “default y/m” include:</p>
<p>  a) A new Kconfig option for something that used to always be built</p>
<pre><code> should be &quot;default y&quot;.
</code></pre>
<p>  b) A new gatekeeping Kconfig option that hides/shows other Kconfig</p>
<pre><code> options (but does not generate any code of its own), should be
 &quot;default y&quot; so people will see those other options.
</code></pre>
<p>  c) Sub-driver behavior or similar options for a driver that is</p>
<pre><code> &quot;default n&quot;. This allows you to provide sane defaults.
</code></pre>
<p>  d) Hardware or infrastructure that everybody expects, such as CONFIG_NET</p>
<pre><code> or CONFIG_BLOCK. These are rare exceptions.
</code></pre>
</li>
<li><p>type definition + default value:<br>  “def_bool”/“def_tristate” <expr> [“if” <expr>]<br>This is a shorthand notation for a type definition plus a value.<br>Optionally dependencies for this default value can be added with “if”.</p>
</li>
<li><p>dependencies: “depends on” <expr><br>This defines a dependency for this menu entry. If multiple<br>dependencies are defined, they are connected with ‘&amp;&amp;’. Dependencies<br>are applied to all other options within this menu entry (which also<br>accept an “if” expression), so these two examples are equivalent:</p>
<p>  bool “foo” if BAR<br>  default y if BAR<br>and<br>  depends on BAR<br>  bool “foo”<br>  default y</p>
</li>
<li><p>reverse dependencies: “select” <symbol> [“if” <expr>]<br>While normal dependencies reduce the upper limit of a symbol (see<br>below), reverse dependencies can be used to force a lower limit of<br>another symbol. The value of the current menu symbol is used as the<br>minimal value <symbol> can be set to. If <symbol> is selected multiple<br>times, the limit is set to the largest selection.<br>Reverse dependencies can only be used with boolean or tristate<br>symbols.<br>Note:<br>  select should be used with care. select will force<br>  a symbol to a value without visiting the dependencies.<br>  By abusing select you are able to select a symbol FOO even<br>  if FOO depends on BAR that is not set.<br>  In general use select only for non-visible symbols<br>  (no prompts anywhere) and for symbols with no dependencies.<br>  That will limit the usefulness but on the other hand avoid<br>  the illegal configurations all over.</p>
</li>
<li><p>weak reverse dependencies: “imply” <symbol> [“if” <expr>]<br>This is similar to “select” as it enforces a lower limit on another<br>symbol except that the “implied” symbol’s value may still be set to n<br>from a direct dependency or with a visible prompt.</p>
<p>Given the following example:</p>
<p>config FOO<br>  tristate<br>  imply BAZ</p>
<p>config BAZ<br>  tristate<br>  depends on BAR</p>
<p>The following values are possible:</p>
<p>  FOO        BAR        BAZ’s default    choice for BAZ</p>
<hr>
<p>  n        y        n        N/m/y<br>  m        y        m        M/y/n<br>  y        y        y        Y/n<br>  y        n        *        N</p>
<p>This is useful e.g. with multiple drivers that want to indicate their<br>ability to hook into a secondary subsystem while allowing the user to<br>configure that subsystem out without also having to unset these drivers.</p>
</li>
<li><p>limiting menu display: “visible if” <expr><br>This attribute is only applicable to menu blocks, if the condition is<br>false, the menu block is not displayed to the user (the symbols<br>contained there can still be selected by other symbols, though). It is<br>similar to a conditional “prompt” attribute for individual menu<br>entries. Default value of “visible” is true.</p>
</li>
<li><p>numerical ranges: “range” <symbol> <symbol> [“if” <expr>]<br>This allows to limit the range of possible input values for int<br>and hex symbols. The user can only input a value which is larger than<br>or equal to the first symbol and smaller than or equal to the second<br>symbol.</p>
</li>
<li><p>help text: “help” or “—help—“<br>This defines a help text. The end of the help text is determined by<br>the indentation level, this means it ends at the first line which has<br>a smaller indentation than the first line of the help text.<br>“—help—“ and “help” do not differ in behaviour, “—help—“ is<br>used to help visually separate configuration logic from help within<br>the file as an aid to developers.</p>
</li>
<li><p>misc options: “option” <symbol>[=<value>]<br>Various less common options can be defined via this option syntax,<br>which can modify the behaviour of the menu entry and its config<br>symbol. These options are currently possible:</p>
<ul>
<li><p>“defconfig_list”<br>This declares a list of default entries which can be used when<br>looking for the default configuration (which is used when the main<br>.config doesn’t exists yet.)</p>
</li>
<li><p>“modules”<br>This declares the symbol to be used as the MODULES symbol, which<br>enables the third modular state for all config symbols.<br>At most one symbol may have the “modules” option set.</p>
</li>
<li><p>“allnoconfig_y”<br>This declares the symbol as one that should have the value y when<br>using “allnoconfig”. Used for symbols that hide other symbols.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Menu-dependencies"><a href="#Menu-dependencies" class="headerlink" title="Menu dependencies"></a>Menu dependencies</h2><p>Dependencies define the visibility of a menu entry and can also reduce<br>the input range of tristate symbols. The tristate logic used in the<br>expressions uses one more state than normal boolean logic to express the<br>module state. Dependency expressions have the following syntax:</p>
<p><expr> ::= <symbol>                             (1)<br>           <symbol> ‘=’ <symbol>                (2)<br>           <symbol> ‘!=’ <symbol>               (3)<br>           <symbol1> ‘&lt;’ <symbol2>              (4)<br>           <symbol1> ‘&gt;’ <symbol2>              (4)<br>           <symbol1> ‘&lt;=’ <symbol2>             (4)<br>           <symbol1> ‘&gt;=’ <symbol2>             (4)<br>           ‘(‘ <expr> ‘)’                       (5)<br>           ‘!’ <expr>                           (6)<br>           <expr> ‘&amp;&amp;’ <expr>                   (7)<br>           <expr> ‘||’ <expr>                   (8)</p>
<p>Expressions are listed in decreasing order of precedence. </p>
<p>(1) Convert the symbol into an expression. Boolean and tristate symbols<br>    are simply converted into the respective expression values. All<br>    other symbol types result in ‘n’.<br>(2) If the values of both symbols are equal, it returns ‘y’,<br>    otherwise ‘n’.<br>(3) If the values of both symbols are equal, it returns ‘n’,<br>    otherwise ‘y’.<br>(4) If value of <symbol1> is respectively lower, greater, lower-or-equal,<br>    or greater-or-equal than value of <symbol2>, it returns ‘y’,<br>    otherwise ‘n’.<br>(5) Returns the value of the expression. Used to override precedence.<br>(6) Returns the result of (2-/expr/).<br>(7) Returns the result of min(/expr/, /expr/).<br>(8) Returns the result of max(/expr/, /expr/).</p>
<p>An expression can have a value of ‘n’, ‘m’ or ‘y’ (or 0, 1, 2<br>respectively for calculations). A menu entry becomes visible when its<br>expression evaluates to ‘m’ or ‘y’.</p>
<p>There are two types of symbols: constant and non-constant symbols.<br>Non-constant symbols are the most common ones and are defined with the<br>‘config’ statement. Non-constant symbols consist entirely of alphanumeric<br>characters or underscores.<br>Constant symbols are only part of expressions. Constant symbols are<br>always surrounded by single or double quotes. Within the quote, any<br>other character is allowed and the quotes can be escaped using ‘&#39;.</p>
<h2 id="Menu-structure"><a href="#Menu-structure" class="headerlink" title="Menu structure"></a>Menu structure</h2><p>The position of a menu entry in the tree is determined in two ways. First<br>it can be specified explicitly:</p>
<p>menu “Network device support”<br>    depends on NET</p>
<p>config NETDEVICES<br>    …</p>
<p>endmenu</p>
<p>All entries within the “menu” … “endmenu” block become a submenu of<br>“Network device support”. All subentries inherit the dependencies from<br>the menu entry, e.g. this means the dependency “NET” is added to the<br>dependency list of the config option NETDEVICES.</p>
<p>The other way to generate the menu structure is done by analyzing the<br>dependencies. If a menu entry somehow depends on the previous entry, it<br>can be made a submenu of it. First, the previous (parent) symbol must<br>be part of the dependency list and then one of these two conditions<br>must be true:</p>
<ul>
<li>the child entry must become invisible, if the parent is set to ‘n’</li>
<li>the child entry must only be visible, if the parent is visible</li>
</ul>
<p>config MODULES<br>    bool “Enable loadable module support”</p>
<p>config MODVERSIONS<br>    bool “Set version information on all module symbols”<br>    depends on MODULES</p>
<p>comment “module support disabled”<br>    depends on !MODULES</p>
<p>MODVERSIONS directly depends on MODULES, this means it’s only visible if<br>MODULES is different from ‘n’. The comment on the other hand is only<br>visible when MODULES is set to ‘n’.</p>
<h2 id="Kconfig-syntax"><a href="#Kconfig-syntax" class="headerlink" title="Kconfig syntax"></a>Kconfig syntax</h2><p>The configuration file describes a series of menu entries, where every<br>line starts with a keyword (except help texts). The following keywords<br>end a menu entry:</p>
<ul>
<li>config</li>
<li>menuconfig</li>
<li>choice/endchoice</li>
<li>comment</li>
<li>menu/endmenu</li>
<li>if/endif</li>
<li>source<br>The first five also start the definition of a menu entry.</li>
</ul>
<p>config:</p>
<pre><code>&quot;config&quot; &lt;symbol&gt;
&lt;config options&gt;
</code></pre>
<p>This defines a config symbol <symbol> and accepts any of above<br>attributes as options.</p>
<p>menuconfig:<br>    “menuconfig” <symbol><br>    <config options></p>
<p>This is similar to the simple config entry above, but it also gives a<br>hint to front ends, that all suboptions should be displayed as a<br>separate list of options. To make sure all the suboptions will really<br>show up under the menuconfig entry and not outside of it, every item<br>from the <config options> list must depend on the menuconfig symbol.<br>In practice, this is achieved by using one of the next two constructs:</p>
<p>(1):<br>menuconfig M<br>if M<br>    config C1<br>    config C2<br>endif</p>
<p>(2):<br>menuconfig M<br>config C1<br>    depends on M<br>config C2<br>    depends on M</p>
<p>In the following examples (3) and (4), C1 and C2 still have the M<br>dependency, but will not appear under menuconfig M anymore, because<br>of C0, which doesn’t depend on M:</p>
<p>(3):<br>menuconfig M<br>    config C0<br>if M<br>    config C1<br>    config C2<br>endif</p>
<p>(4):<br>menuconfig M<br>config C0<br>config C1<br>    depends on M<br>config C2<br>    depends on M</p>
<p>choices:</p>
<pre><code>&quot;choice&quot; [symbol]
&lt;choice options&gt;
&lt;choice block&gt;
&quot;endchoice&quot;
</code></pre>
<p>This defines a choice group and accepts any of the above attributes as<br>options. A choice can only be of type bool or tristate.  If no type is<br>specified for a choice, it’s type will be determined by the type of<br>the first choice element in the group or remain unknown if none of the<br>choice elements have a type specified, as well.</p>
<p>While a boolean choice only allows a single config entry to be<br>selected, a tristate choice also allows any number of config entries<br>to be set to ‘m’. This can be used if multiple drivers for a single<br>hardware exists and only a single driver can be compiled/loaded into<br>the kernel, but all drivers can be compiled as modules.</p>
<p>A choice accepts another option “optional”, which allows to set the<br>choice to ‘n’ and no entry needs to be selected.<br>If no [symbol] is associated with a choice, then you can not have multiple<br>definitions of that choice. If a [symbol] is associated to the choice,<br>then you may define the same choice (ie. with the same entries) in another<br>place.</p>
<p>comment:</p>
<pre><code>&quot;comment&quot; &lt;prompt&gt;
&lt;comment options&gt;
</code></pre>
<p>This defines a comment which is displayed to the user during the<br>configuration process and is also echoed to the output files. The only<br>possible options are dependencies.</p>
<p>menu:</p>
<pre><code>&quot;menu&quot; &lt;prompt&gt;
&lt;menu options&gt;
&lt;menu block&gt;
&quot;endmenu&quot;
</code></pre>
<p>This defines a menu block, see “Menu structure” above for more<br>information. The only possible options are dependencies and “visible”<br>attributes.</p>
<p>if:</p>
<pre><code>&quot;if&quot; &lt;expr&gt;
&lt;if block&gt;
&quot;endif&quot;
</code></pre>
<p>This defines an if block. The dependency expression <expr> is appended<br>to all enclosed menu entries.</p>
<p>source:</p>
<pre><code>&quot;source&quot; &lt;prompt&gt;
</code></pre>
<p>This reads the specified configuration file. This file is always parsed.</p>
<p>mainmenu:</p>
<pre><code>&quot;mainmenu&quot; &lt;prompt&gt;
</code></pre>
<p>This sets the config program’s title bar if the config program chooses<br>to use it. It should be placed at the top of the configuration, before any<br>other statement.</p>
<p>‘#’ Kconfig source file comment:</p>
<p>An unquoted ‘#’ character anywhere in a source file line indicates<br>the beginning of a source file comment.  The remainder of that line<br>is a comment.</p>
<h2 id="Kconfig-hints"><a href="#Kconfig-hints" class="headerlink" title="Kconfig hints"></a>Kconfig hints</h2><p>This is a collection of Kconfig tips, most of which aren’t obvious at<br>first glance and most of which have become idioms in several Kconfig<br>files.</p>
<p>Adding common features and make the usage configurable</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">It is a common idiom to implement a feature&#x2F;functionality that are</span><br><span class="line">relevant for some architectures but not all.</span><br><span class="line">The recommended way to do so is to use a config variable named HAVE_*</span><br><span class="line">that is defined in a common Kconfig file and selected by the relevant</span><br><span class="line">architectures.</span><br><span class="line">An example is the generic IOMAP functionality.</span><br><span class="line"></span><br><span class="line">We would in lib&#x2F;Kconfig see:</span><br><span class="line"></span><br><span class="line"># Generic IOMAP is used to ...</span><br><span class="line">config HAVE_GENERIC_IOMAP</span><br><span class="line"></span><br><span class="line">config GENERIC_IOMAP</span><br><span class="line">	depends on HAVE_GENERIC_IOMAP &amp;&amp; FOO</span><br><span class="line"></span><br><span class="line">And in lib&#x2F;Makefile we would see:</span><br><span class="line">obj-$(CONFIG_GENERIC_IOMAP) +&#x3D; iomap.o</span><br><span class="line"></span><br><span class="line">For each architecture using the generic IOMAP functionality we would see:</span><br><span class="line"></span><br><span class="line">config X86</span><br><span class="line">	select ...</span><br><span class="line">	select HAVE_GENERIC_IOMAP</span><br><span class="line">	select ...</span><br><span class="line"></span><br><span class="line">Note: we use the existing config option and avoid creating a new</span><br><span class="line">config variable to select HAVE_GENERIC_IOMAP.</span><br><span class="line"></span><br><span class="line">Note: the use of the internal config variable HAVE_GENERIC_IOMAP, it is</span><br><span class="line">introduced to overcome the limitation of select which will force a</span><br><span class="line">config option to &#39;y&#39; no matter the dependencies.</span><br><span class="line">The dependencies are moved to the symbol GENERIC_IOMAP and we avoid the</span><br><span class="line">situation where select forces a symbol equals to &#39;y&#39;.</span><br><span class="line"></span><br><span class="line">Adding features that need compiler support</span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line"></span><br><span class="line">There are several features that need compiler support. The recommended way</span><br><span class="line">to describe the dependency on the compiler feature is to use &quot;depends on&quot;</span><br><span class="line">followed by a test macro.</span><br><span class="line"></span><br><span class="line">config STACKPROTECTOR</span><br><span class="line">	bool &quot;Stack Protector buffer overflow detection&quot;</span><br><span class="line">	depends on $(cc-option,-fstack-protector)</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">If you need to expose a compiler capability to makefiles and&#x2F;or C source files,</span><br><span class="line">CC_HAS_ is the recommended prefix for the config option.</span><br><span class="line"></span><br><span class="line">config CC_HAS_STACKPROTECTOR_NONE</span><br><span class="line">	def_bool $(cc-option,-fno-stack-protector)</span><br><span class="line"></span><br><span class="line">Build as module only</span><br><span class="line">~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">To restrict a component build to module-only, qualify its config symbol</span><br><span class="line">with &quot;depends on m&quot;.  E.g.:</span><br><span class="line"></span><br><span class="line">config FOO</span><br><span class="line">	depends on BAR &amp;&amp; m</span><br><span class="line"></span><br><span class="line">limits FOO to module (&#x3D;m) or disabled (&#x3D;n).</span><br><span class="line"></span><br><span class="line">Kconfig recursive dependency limitations</span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line"></span><br><span class="line">If you&#39;ve hit the Kconfig error: &quot;recursive dependency detected&quot; you&#39;ve run</span><br><span class="line">into a recursive dependency issue with Kconfig, a recursive dependency can be</span><br><span class="line">summarized as a circular dependency. The kconfig tools need to ensure that</span><br><span class="line">Kconfig files comply with specified configuration requirements. In order to do</span><br><span class="line">that kconfig must determine the values that are possible for all Kconfig</span><br><span class="line">symbols, this is currently not possible if there is a circular relation</span><br><span class="line">between two or more Kconfig symbols. For more details refer to the &quot;Simple</span><br><span class="line">Kconfig recursive issue&quot; subsection below. Kconfig does not do recursive</span><br><span class="line">dependency resolution; this has a few implications for Kconfig file writers.</span><br><span class="line">We&#39;ll first explain why this issues exists and then provide an example</span><br><span class="line">technical limitation which this brings upon Kconfig developers. Eager</span><br><span class="line">developers wishing to try to address this limitation should read the next</span><br><span class="line">subsections.</span><br><span class="line"></span><br><span class="line">Simple Kconfig recursive issue</span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line"></span><br><span class="line">Read: Documentation&#x2F;kbuild&#x2F;Kconfig.recursion-issue-01</span><br><span class="line"></span><br><span class="line">Test with:</span><br><span class="line"></span><br><span class="line">make KBUILD_KCONFIG&#x3D;Documentation&#x2F;kbuild&#x2F;Kconfig.recursion-issue-01 allnoconfig</span><br><span class="line"></span><br><span class="line">Cumulative Kconfig recursive issue</span><br><span class="line">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line"></span><br><span class="line">Read: Documentation&#x2F;kbuild&#x2F;Kconfig.recursion-issue-02</span><br><span class="line"></span><br><span class="line">Test with:</span><br><span class="line"></span><br><span class="line">make KBUILD_KCONFIG&#x3D;Documentation&#x2F;kbuild&#x2F;Kconfig.recursion-issue-02 allnoconfig</span><br><span class="line"></span><br><span class="line">Practical solutions to kconfig recursive issue</span><br></pre></td></tr></table></figure>

<p>Developers who run into the recursive Kconfig issue have three options<br>at their disposal. We document them below and also provide a list of<br>historical issues resolved through these different solutions.</p>
<p>  a) Remove any superfluous “select FOO” or “depends on FOO”<br>  b) Match dependency semantics:<br>    b1) Swap all “select FOO” to “depends on FOO” or,<br>    b2) Swap all “depends on FOO” to “select FOO”<br>  c) Consider the use of “imply” instead of “select”</p>
<p>The resolution to a) can be tested with the sample Kconfig file<br>Documentation/kbuild/Kconfig.recursion-issue-01 through the removal<br>of the “select CORE” from CORE_BELL_A_ADVANCED as that is implicit already<br>since CORE_BELL_A depends on CORE. At times it may not be possible to remove<br>some dependency criteria, for such cases you can work with solution b).</p>
<p>The two different resolutions for b) can be tested in the sample Kconfig file<br>Documentation/kbuild/Kconfig.recursion-issue-02.</p>
<p>Below is a list of examples of prior fixes for these types of recursive issues;<br>all errors appear to involve one or more select’s and one or more “depends on”.</p>
<p>commit          fix<br>======          ===<br>06b718c01208    select A -&gt; depends on A<br>c22eacfe82f9    depends on A -&gt; depends on B<br>6a91e854442c    select A -&gt; depends on A<br>118c565a8f2e    select A -&gt; select B<br>f004e5594705    select A -&gt; depends on A<br>c7861f37b4c6    depends on A -&gt; (null)<br>80c69915e5fb    select A -&gt; (null)              (1)<br>c2218e26c0d0    select A -&gt; depends on A        (1)<br>d6ae99d04e1c    select A -&gt; depends on A<br>95ca19cf8cbf    select A -&gt; depends on A<br>8f057d7bca54    depends on A -&gt; (null)<br>8f057d7bca54    depends on A -&gt; select A<br>a0701f04846e    select A -&gt; depends on A<br>0c8b92f7f259    depends on A -&gt; (null)<br>e4e9e0540928    select A -&gt; depends on A        (2)<br>7453ea886e87    depends on A &gt; (null)           (1)<br>7b1fff7e4fdf    select A -&gt; depends on A<br>86c747d2a4f0    select A -&gt; depends on A<br>d9f9ab51e55e    select A -&gt; depends on A<br>0c51a4d8abd6    depends on A -&gt; select A        (3)<br>e98062ed6dc4    select A -&gt; depends on A        (3)<br>91e5d284a7f1    select A -&gt; (null)</p>
<p>(1) Partial (or no) quote of error.<br>(2) That seems to be the gist of that fix.<br>(3) Same error.</p>
<p>Future kconfig work</p>
<pre><code>
Work on kconfig is welcomed on both areas of clarifying semantics and on
evaluating the use of a full SAT solver for it. A full SAT solver can be
desirable to enable more complex dependency mappings and / or queries,
for instance on possible use case for a SAT solver could be that of handling
the current known recursive dependency issues. It is not known if this would
address such issues but such evaluation is desirable. If support for a full SAT
solver proves too complex or that it cannot address recursive dependency issues
Kconfig should have at least clear and well defined semantics which also
addresses and documents limitations or requirements such as the ones dealing
with recursive dependencies.

Further work on both of these areas is welcomed on Kconfig. We elaborate
on both of these in the next two subsections.

Semantics of Kconfig
</code></pre>
<p>The use of Kconfig is broad, Linux is now only one of Kconfig’s users:<br>one study has completed a broad analysis of Kconfig use in 12 projects [0].<br>Despite its widespread use, and although this document does a reasonable job<br>in documenting basic Kconfig syntax a more precise definition of Kconfig<br>semantics is welcomed. One project deduced Kconfig semantics through<br>the use of the xconfig configurator [1]. Work should be done to confirm if<br>the deduced semantics matches our intended Kconfig design goals.</p>
<p>Having well defined semantics can be useful for tools for practical<br>evaluation of depenencies, for instance one such use known case was work to<br>express in boolean abstraction of the inferred semantics of Kconfig to<br>translate Kconfig logic into boolean formulas and run a SAT solver on this to<br>find dead code / features (always inactive), 114 dead features were found in<br>Linux using this methodology [1] (Section 8: Threats to validity).</p>
<p>Confirming this could prove useful as Kconfig stands as one of the the leading<br>industrial variability modeling languages [1] [2]. Its study would help<br>evaluate practical uses of such languages, their use was only theoretical<br>and real world requirements were not well understood. As it stands though<br>only reverse engineering techniques have been used to deduce semantics from<br>variability modeling languages such as Kconfig [3].</p>
<p>[0] <a target="_blank" rel="noopener" href="http://www.eng.uwaterloo.ca/~shshe/kconfig_semantics.pdf">http://www.eng.uwaterloo.ca/~shshe/kconfig_semantics.pdf</a><br>[1] <a target="_blank" rel="noopener" href="http://gsd.uwaterloo.ca/sites/default/files/vm-2013-berger.pdf">http://gsd.uwaterloo.ca/sites/default/files/vm-2013-berger.pdf</a><br>[2] <a target="_blank" rel="noopener" href="http://gsd.uwaterloo.ca/sites/default/files/ase241-berger_0.pdf">http://gsd.uwaterloo.ca/sites/default/files/ase241-berger_0.pdf</a><br>[3] <a target="_blank" rel="noopener" href="http://gsd.uwaterloo.ca/sites/default/files/icse2011.pdf">http://gsd.uwaterloo.ca/sites/default/files/icse2011.pdf</a></p>
<p>Full SAT solver for Kconfig</p>
<pre><code>
Although SAT solvers [0] haven&#39;t yet been used by Kconfig directly, as noted in
the previous subsection, work has been done however to express in boolean
abstraction the inferred semantics of Kconfig to translate Kconfig logic into
boolean formulas and run a SAT solver on it [1]. Another known related project
is CADOS [2] (former VAMOS [3]) and the tools, mainly undertaker [4], which has
been introduced first with [5].  The basic concept of undertaker is to exract
variability models from Kconfig, and put them together with a propositional
formula extracted from CPP #ifdefs and build-rules into a SAT solver in order
to find dead code, dead files, and dead symbols. If using a SAT solver is
desirable on Kconfig one approach would be to evaluate repurposing such efforts
somehow on Kconfig. There is enough interest from mentors of existing projects
to not only help advise how to integrate this work upstream but also help
maintain it long term. Interested developers should visit:

http://kernelnewbies.org/KernelProjects/kconfig-sat

[0] http://www.cs.cornell.edu/~sabhar/chapters/SATSolvers-KR-Handbook.pdf
[1] http://gsd.uwaterloo.ca/sites/default/files/vm-2013-berger.pdf
[2] https://cados.cs.fau.de
[3] https://vamos.cs.fau.de
[4] https://undertaker.cs.fau.de
[5] https://www4.cs.fau.de/Publications/2011/tartler_11_eurosys.pdf
</code></pre>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_kconfig-language/" title="Kernel-4.18.0-80.el8_kconfig-language" target="_blank" rel="external">http://www.oostech.com/2021/02/19/Kernel-4.18.0-80.el8_kconfig-language/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">oosTech by Sam Lee</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_ixgb/" title="Kernel-4.18.0-80.el8_ixgb"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/02/19/Kernel-4.18.0-80.el8_kdump/" title="Kernel-4.18.0-80.el8_kdump"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
    <div class="container" align="left">
    <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
      <img src="/images/wechatp.png" itemprop="contentUrl">
      <span>欢迎关注公众号</span>
    </div>
    </div>
</nav>

  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>您能有收获就是我们最大的动力</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码捐赠</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">不管多少都是对分享的肯定</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码捐赠</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://google.com/" target="_blank" title="Google" data-toggle=tooltip data-placement=top><i class="icon icon-google"></i></a></li>
        
        <li><a href="https://twitter.com/" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
	<a target="_blank" rel="noopener" href="https://beian.miit.gov.cn" text-align: center >粤ICP备2021024811号</a>
        </div>
<!--    
    <div>
     <img src="/images/logo.png" width="140" height="140">
    </div>
-->
    </div>


        <!-- 不蒜子统计    //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js -->
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <!--<span id="busuanzi_container_site_pv" style="display:inline;">-->本站总访问量<span id="busuanzi_value_site_pv" style="display:inline;></span>次</span>
        <span class="post-meta-divider">|</span>
  
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>







   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>











</body>
</html>